!function(a,b,c,d){"use strict";function e(a,b){return(new RegExp(b+"=(.+?)(&|$)").exec(a)||[,null])[1]}a.appbuddy={a:{},selectors:{body:c("body")},init:function(){appbuddy.a=appbuddy.selectors,appbuddy.uiEvents(),appbuddy.avatarUI(),appbuddy.setEmbedIframe(),appbuddy.viewLargeAvatar.init(),appbuddy.modals.init(),appbuddy.l18n.init()},viewLargeAvatar:{_init:!1,init:function(){this._init||(c("#item-header-avatar a").on("click",appbuddy.viewLargeAvatar.open),this._init=!0)},open:function(a){console.log(c(this).data("fullAvatar"))}},setEmbedIframe:function(){var a,c,d,e;for(a=b.querySelectorAll("iframe.wp-embedded-content"),c=0;c<a.length;c++)d=a[c],e=jQuery(d).data("secret"),e&&jQuery('[data-secret="'+e+'"]').length?(jQuery('[data-secret="'+e+'"]').show(),jQuery(d).remove()):d.setAttribute("width",jQuery(d).parent().width())},avatarUI:function(){apppCore.noGoBackFlags.push(function(){a.location.href.indexOf("/profile/change-avatar/")>1&&(a.apppCore.noGoBackFlag="changing-avatar")}),a.location.href.indexOf("/profile/change-avatar/")>1?"object"!=typeof BP_Confirm||"undefined"!=typeof bp&&"undefined"!=typeof bp.Avatar&&"undefined"!=typeof BP_Uploader?(c('#avatar-upload input[type="submit"]').remove(),c('#avatar-upload input[type="file"]').remove(),a.bp&&a.bp.Avatar&&bp.Avatar.start()):a.location.reload():(a.location.href.indexOf("/profile/change-cover-image/")>1||a.location.href.indexOf("/admin/group-cover-image/")>1)&&("object"!=typeof BP_Confirm||"undefined"!=typeof bp&&"undefined"!=typeof bp.CoverImage&&"undefined"!=typeof BP_Uploader?a.bp&&a.bp.CoverImage&&0===c("#bp-upload-ui").length&&bp.CoverImage.start():a.location.reload())},modals:{init:function(){c(b).on("create_dynamic_modals",appbuddy.modals.dynamic.create)},dynamic:{create:function(){c(".activity-image.dynamic-modal").apppmodal()}}},l18n:{defaults:{login_process:"Logging in....",login_error:"Error Logging in."},init:function(){"undefined"!=typeof app_buddy.l18n?appbuddy.l18n.t=app_buddy.l18n:appbuddy.l18n.t=appbuddy.l18n.defaults}},ajax_html:function(a,b){appbuddy.updateCoverImage(b.html)},updateCoverImage:function(a){c("#appbuddy-css-inline-css").remove(),a.find("#appbuddy-css-inline-css").clone().appendTo("body")},uiEvents:function(){appbuddy.a.body.on("click",".destructive",function(a){c(a.target).parents("#attach-image-sheet").removeClass("active").addClass("hide"),c("#cam-status").html(""),c("#image-status").html(""),c("#attach-image").val("")}),appbuddy.a.body.on("click","#attach-photo",function(a){c("#attach-image-sheet").removeClass("hide").addClass("active")}),"undefined"==typeof jQuery.fn.apppmodal?appbuddy.a.body.on("click",".activity-image",function(a){a.target;c(this).clone().appendTo("body").wrap('<div class="image-pop"></div>').removeClass("activity-image").addClass("close-pop")}):c(".activity-inner img").addClass("dynamic-modal"),appbuddy.a.body.on("click",".close-pop",function(a){c(".close-pop").parent().remove()}),appbuddy.a.body.on("click",".add-activity-image",function(a){a.preventDefault(),c("#whats-new-form-in-modal").toggleClass("hide"),c("#activity_add_media").toggleClass("show")}),appbuddy.a.body.on("click",".io-modal-open",function(a){c("#aw-whats-new-submit")&&c("#aw-whats-new-submit").prop("disabled",!1);var b=c(a.target).parent().attr("href");"#activity-post-form"===b&&("string"==typeof navigator.appVersion&&/iphone|ipad/gi.test(navigator.appVersion)||setTimeout(function(){c("textarea#whats-new").focus()},1e3))}),appbuddy.a.body.on("click","#activity-post-form .io-modal-close",function(a){a.preventDefault(),c("#whats-new-form-in-modal").removeClass("hide"),c("#activity_add_media").removeClass("show"),c(".ajax-spinner").hide(),c("#cam-status").html(""),c("#image-status").html(""),c("#attach-image").val("")}),appbuddy.a.body.on("click","#ab-submit-image",function(a){a.preventDefault(),c(".ajax-spinner").show()})}},c(b).ready(appbuddy.init).on("load_ajax_content_done",appbuddy.init),c(b).on("deviceready",appbuddy.init),c("body").on("appp_ajax_html",appbuddy.ajax_html);var f=function(){c("#main").on("click",".activity-header a, .activity-inner a, .item-avatar a, .item-title a, .pagination-links a, .item-list-tabs a, #item-buttons a.group-button, #send-private-message a, .message-title a, #message-recipients a, table.notifications a, #member-list li h5 a, #members-list li h5 a, #admins-list li h5 a, .activity-meta a.view, #member-list a",function(b){var d=c(this),e=c(this).attr("href");"_blank"===c(d).attr("target")?(b.preventDefault(),a.open(e,"_blank")):d.addClass("ajaxify")}),c("#main").on("click","#post-mention a",function(a){a.preventDefault();var b=(c(this),c(this).attr("href")),d=e(b,"r"),f="slide-in-up-add ng-animate slide-in-up slide-in-up-add-active",g="slide-in-up-remove slide-in-up-remove-active";c("#whats-new").val("@"+d),c("#activity-post-form").css("display","block").removeClass(g).addClass(f)}),c(".ac-form").on("touchmove",function(a){a.preventDefault()})};c(b).on("ready",f).bind("load_ajax_content_done",f),c("form#appbuddy-loginform").on("submit",function(a){c("form#appbuddy-loginform p.status").show().text(appbuddy.l18n.t.login_process),c.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:"appbuddy_login",username:c("form#appbuddy-loginform #username").val(),password:c("form#appbuddy-loginform #password").val(),security:c("form#appbuddy-loginform #security").val()},success:function(a){if(c("form#login p.status").text(a),a.success===!0){var d=apppCore.ver?apppCore.ver:"1";apppresser.sendLoginMsg(1,a.data),"undefined"!=typeof appp_ajax_login.login_redirect?b.location.href=appp_ajax_login.login_redirect+"?appp="+d:b.location.href="?appp="+d}else c("form#appbuddy-loginform p.status").show().text(appbuddy.l18n.t.login_error)}}),a.preventDefault()})}(window,document,jQuery);