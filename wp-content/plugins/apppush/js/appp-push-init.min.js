window.appp_push=function(a,b,c){"use strict";var d={};return d.initialize=function(){d.bindEvents()},d.bindEvents=function(){b.addEventListener("deviceready",d.onDeviceReady,!1)},d.onDeviceReady=function(){var a=PushWoosh.getHWId();d.receivedEvent("deviceready");var b=apppCore.ajaxurl;b&&jQuery.ajax({type:"POST",dataType:"json",url:b,data:{action:"appp_push_device_id",device_id:a},success:function(a){}})},d.tokenHandler=function(a){return PushWoosh?(PushWoosh.appCode=apppPushVars.app_code,PushWoosh.register(a,function(a){d.log("PushWoosh register success: "+JSON.stringify(a))},function(a){d.log("Couldn't register with PushWoosh"+a)}),void d.log("Token Handler "+a)):void d.log("No PushWoosh object present")},d.errorHandler=function(a){d.log("Error Handler  "+a)},d.successHandler=function(a){d.log("Success! Result = "+a)},d.receivedEvent=function(b){var c=a.plugins.pushNotification;c.unregister(d.successHandler,d.errorHandler),"android"==device.platform||"Android"==device.platform?(d.log("GCM ID: "+apppPushVars.gcm_id),c.register(d.successHandler,d.errorHandler,{senderID:apppPushVars.gcm_id,ecb:"appp_push.onNotificationGCM"})):c.register(d.tokenHandler,d.errorHandler,{badge:"true",sound:"true",alert:"true",ecb:"appp_push.onNotificationAPN"})},d.onNotificationAPN=function(b){var c,e=a.plugins.pushNotification;if(c=apppPushVars.notifications_title?apppPushVars.notifications_title:"Notification",b.alert&&navigator.notification.alert(b.alert,null,c,"Done"),b.badge&&e.setApplicationIconBadgeNumber(d.successHandler,b.badge),b.sound){var f=new Media(b.sound);f.play()}},d.onNotificationGCM=function(a){var b;switch(b=apppPushVars.notifications_title?apppPushVars.notifications_title:"Notification",a.event){case"registered":a.regid.length>0&&(PushWoosh.appCode=apppPushVars.app_code,PushWoosh.register(a.regid,function(a){d.log("PushWoosh register success: "+JSON.stringify(a))},function(a){d.log("Couldn't register with PushWoosh"+a)}),d.log("Registration id = "+a.regid));break;case"message":navigator.notification.alert(a.message,null,b,"Done"),d.log("msgcnt = "+a.msgcnt);break;case"error":d.log("GCM error = "+a.msg);break;default:d.log("An unknown GCM event has occurred")}},d.log=function(){apppCore.log&&apppCore.log(arguments)},d.initialize(),d}(window,document);