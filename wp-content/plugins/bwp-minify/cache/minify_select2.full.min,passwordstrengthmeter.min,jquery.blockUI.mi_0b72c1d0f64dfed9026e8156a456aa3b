/*! Select2 4.0.3 | https://github.com/select2/select2/blob/master/LICENSE.md */!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var b;return function(){if(!b||!b.requirejs){b?c=b:b={};var a,c,d;!function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(a=a.split("/"),g=a.length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if(m=a[k],"."===m)a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;k>0&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(c=a.split("/"),k=c.length;k>0;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;l>0;l-=1)if(e=o[n.slice(0,l).join("/")],e&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(b,d.concat([a,c]))}}function h(a){return function(b){return f(b,a)}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return c>-1&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}function l(a){return function(){return s&&s.config&&s.config[a]||{}}}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(e=f(e,b),c=j(e)),e?a=c&&c.normalize?c.normalize(a,h(b)):f(a,b):(a=f(a,b),d=k(a),e=d[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return"undefined"!=typeof b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:l(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if(m=o(c[n],f),k=m.f,"require"===k)u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if(s=a,s.deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])},d.amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d}}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];"function"==typeof e&&"constructor"!==d&&c.push(d)}return c}var c={};c.Extend=function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},c.Decorate=function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;d>0&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}function e(){this.constructor=d}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new e;for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=(function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){var a=Array.prototype.unshift;return a.call(arguments,b),e.apply(this,arguments)}}),k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d};var d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),c[0]._type=a,a in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;d>c;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;a>c;c++){var d=Math.floor(36*Math.random());b+=d.toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];f=f.substring(0,1).toLowerCase()+f.substring(1),f in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return e!==f||"hidden"!==f&&"visible"!==f?"scroll"===e||"scroll"===f?!0:d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth:!1},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b,b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),d[0].className+=" select2-results__message",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null==a.results||0===a.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)},c.prototype.position=function(a,b){var c=b.find(".select2-results");c.append(a)},c.prototype.sort=function(a){var b=this.options.get("sorter");return b(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");b.length>0?b.first().trigger("mouseenter"):a.first().trigger("mouseenter"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()}),e=b.$results.find(".select2-results__option[aria-selected]");e.each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&a.inArray(e,d)>-1?b.attr("aria-selected","true"):b.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();var b=this.options.get("translations").get("searching"),c={disabled:!0,loading:!0,text:b(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]);for(var e in d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group";a(h);this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b,c){var d=this,e=b.id+"-results";this.$results.attr("id",e),b.on("results:all",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("results:append",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on("query",function(a){d.hideMessages(),d.showLoading(a)}),b.on("select",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("unselect",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("open",function(){d.$results.attr("aria-expanded","true"),d.$results.attr("aria-hidden","false"),d.setClasses(),d.ensureHighlightVisible()}),b.on("close",function(){d.$results.attr("aria-expanded","false"),d.$results.attr("aria-hidden","true"),d.$results.removeAttr("aria-activedescendant")}),b.on("results:toggle",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?d.trigger("close",{}):d.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);0===e?d.$results.scrollTop(0):0>h-g&&d.$results.scrollTop(i)}}),b.on("results:next",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a),e=c+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):h>g&&d.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),b.on("results:message",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=a.deltaY>0&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var c=a(this),e=c.data("data");return"true"===c.attr("aria-selected")?void(d.options.get("multiple")?d.trigger("unselect",{originalEvent:b,data:e}):d.trigger("close",{})):void d.trigger("select",{originalEvent:b,data:e})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(b){var c=a(this).data("data");d.getHighlightedResults().removeClass("select2-results__option--highlighted"),d.trigger("results:focus",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){var a=this.$results.find(".select2-results__option--highlighted");return a},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var b=this.$results.find("[aria-selected]"),c=b.index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),2>=c?this.$results.scrollTop(0):(g>this.$results.outerHeight()||0>g)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){var a={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46};return a}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b,b},d.prototype.bind=function(a,b){var d=this,e=(a.id+"-container",a.id+"-results");this.container=a,this.$selection.on("focus",function(a){d.trigger("focus",a)}),this.$selection.on("blur",function(a){d._handleBlur(a)}),this.$selection.on("keydown",function(a){d.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){d.update(a.data)}),a.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",e),d._attachCloseHandler(a)}),a.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)}),a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var c=a(b.target),d=c.closest(".select2"),e=a(".select2.select2-container--open");e.each(function(){var b=a(this);if(this!=d[0]){var c=b.data("element");c.select2("close")}})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){var c=b.find(".selection");c.append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d),this.$selection.attr("aria-labelledby",d),this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(a){}),this.$selection.on("blur",function(a){}),a.on("focus",function(b){a.isOpen()||c.$selection.focus()}),a.on("selection:update",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},e.prototype.display=function(a,b){var c=this.options.get("templateSelection"),d=this.options.get("escapeMarkup");return d(c(a,b))},e.prototype.selectionContainer=function(){return a("<span></span>")},e.prototype.update=function(a){if(0===a.length)return void this.clear();var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d),c.prop("title",b.title||b.text)},e}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(b,c){var e=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){e.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!e.options.get("disabled")){var c=a(this),d=c.parent(),f=d.data("data");e.trigger("unselect",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a,b){var c=this.options.get("templateSelection"),d=this.options.get("escapeMarkup");return d(c(a,b))},d.prototype.selectionContainer=function(){var b=a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>');return b},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop("title",e.title||e.text),f.data("data",e),b.push(f)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id,d=b.length>1;if(d||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)},b}),b.define("select2/selection/allowClear",["jquery","../keys"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var c=this.$selection.find(".select2-selection__clear");if(0!==c.length){b.stopPropagation();for(var d=c.data("data"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger("unselect",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(this.$selection.find(".select2-selection__placeholder").length>0||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},c}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.trigger("focus")}),b.on("close",function(){e.$search.val(""),e.$search.removeAttr("aria-activedescendant"),e.$search.trigger("focus")}),b.on("enable",function(){e.$search.prop("disabled",!1),e._transferTabIndex()}),b.on("disable",function(){e.$search.prop("disabled",!0)}),b.on("focus",function(a){e.$search.trigger("focus")}),b.on("results:focus",function(a){e.$search.attr("aria-activedescendant",a.id)}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e._handleBlur(a)}),this.$selection.on("keydown",".select2-search--inline",function(a){a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented();var b=a.which;if(b===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(d.length>0){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()}}});var f=document.documentMode,g=f&&11>=f;this.$selection.on("input.searchcheck",".select2-search--inline",function(a){return g?void e.$selection.off("input.search input.searchcheck"):void e.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(g&&"input"===a.type)return void e.$selection.off("input.search input.searchcheck");var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)})},d.prototype._transferTabIndex=function(a){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";if(""!==this.$search.attr("placeholder"))a=this.$selection.find(".select2-selection__rendered").innerWidth();else{var b=this.$search.val().length+1;a=.75*b+"em"}this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){var a={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};return a}),b.define("select2/data/base",["../utils"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(a,b){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return d+=a.generateChars(4),d+=null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4)},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");
if(this.$element.prop("multiple"))this.current(function(d){var e=[];a=[a],a.push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,void this.$element.trigger("change")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})},d.prototype.bind=function(a,b){var c=this;this.container=a,a.on("select",function(a){c.select(a.data)}),a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this,f=this.$element.children();f.each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup"),b.label=a.text):(b=document.createElement("option"),void 0!==b.textContent?b.textContent=a.text:b.innerText=a.text),a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(b=c.data(a[0],"data"),null!=b)return b;if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return b=this._normalizeItem(b),b.element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a}),a=c.extend({},{text:""},a);var b={selected:!1,disabled:!1};return null!=a.id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},b,a)},d.prototype.matches=function(a,b){var c=this.options.get("matcher");return c(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(c.inArray(j.id,g)>=0){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){d.status&&"0"===d.status||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a)),"function"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");void 0!==f&&(this.createTag=f);var g=d.get("insertTag");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0),k=i.text===b.term;if(k||j)return f?!1:(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr("data-select2-tag",!0),e.addOptions([m]),e.insertTag(g,l)}a.results=g,c(a)}var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,d)},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){var c=(this._lastTag,this.$element.find("option[data-select2-tag]"));c.each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(b,c,d){function e(b){var c=g._normalizeItem(b),d=g.$element.find("option").filter(function(){return a(this).val()===c.id});if(!d.length){var e=g.option(c);e.attr("data-select2-tag",!0),g._removeOldTags(),g.addOptions([e])}f(c)}function f(a){g.trigger("select",{data:a})}var g=this;c.term=c.term||"";var h=this.tokenizer(c,this.options,e);h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),l=a.extend({},c,{term:k}),m=i(l);null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",this.maximumInputLength>0&&b.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return d.maximumSelectionLength>0&&f>=d.maximumSelectionLength?void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b,b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(b){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")}),c.on("focus",function(){c.isOpen()&&e.$search.focus()}),c.on("results:all",function(a){if(null==a.query.term||""===a.query.term){var b=e.showSearch(a);b?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide")}})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;d>=0;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1),d=e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1);c+50>=d&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c,c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(b){var c=a(this).data("select2-scroll-position");a(this).scrollTop(c.y)}),a(window).on(f+" "+g+" "+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id,h=this.$container.parents().filter(b.hasScroll);h.off(e),a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h={height:this.$dropdown.outerHeight(!1)},i={top:b.scrollTop(),bottom:b.scrollTop()+b.height()},j=i.top<f.top-h.height,k=i.bottom>f.bottom+h.height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h.height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return a(c.data.results)<this.minimumResultsForSearch?!1:b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;if("select"===c._type||"unselect"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},a}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){var b=a.minimum-a.input.length,c="Please enter "+b+" or more characters";return c},loadingMore:function(){return"Loading more results…"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}D.prototype.apply=function(l){if(l=a.extend(!0,{},this.defaults,l),null==l.dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,l.minimumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),l.maximumInputLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),l.maximumSelectionLength>0&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(l.language.indexOf("-")>0){var H=l.language.split("-"),I=H[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+"en"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){function b(a){return l[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&e.children.length>0){for(var f=a.extend(!0,{},e),g=e.children.length-1;g>=0;g--){var h=e.children[g],i=c(d,h);null==i&&f.children.splice(g,1)}return f.children.length>0?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return j.indexOf(k)>-1?e:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:c,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var d=a.camelCase(b),e={};e[d]=c;var f=j._convertData(e);a.extend(this.defaults,f)};var E=new D;return E}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(a.prop("dir")?this.options.dir=a.prop("dir"):a.closest("[dir]").prop("dir")?this.options.dir=a.closest("[dir]").prop("dir"):this.options.dir="ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),a.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.data("data",a.data("select2Tags")),a.data("tags",!0)),a.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",a.data("ajaxUrl")),a.data("ajax--url",a.data("ajaxUrl")));var e={};e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);f=d._convertData(f);for(var g in f)b.inArray(g,c)>-1||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){var b="";return b=null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4),b=b.replace(/(:|\.|\[|\]|,)/g,""),b="select2-"+b},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return 0>=e?"auto":e+"px"}if("style"==b){var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;i>h;h+=1){var j=g[h].replace(/\s/g,""),k=j.match(c);if(null!==k&&k.length>=1)return k[1]}return null}return b},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this.$element.on("focus.select2",function(a){b.trigger("focus",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("focus",function(a){b.focus(a)}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open",{}),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&b.addedNodes.length>0)for(var e=0;e<b.addedNodes.length;e++){var f=b.addedNodes[e];f.selected&&(c=!0)}else b.removedNodes&&b.removedNodes.length>0&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null;
},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),b.define("select2/compat/utils",["jquery"],function(a){function b(b,c,d){var e,f,g=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each(function(){0===this.indexOf("select2-")&&g.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&(f=d(this),null!=f&&g.push(f))})),b.attr("class",g.join(" "))}return{syncCssClasses:b}}),b.define("select2/compat/containerCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("containerCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptContainerCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("containerCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/dropdownCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("dropdownCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptDropdownCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("dropdownCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/initSelection",["jquery"],function(a){function b(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=c.get("initSelection"),this._isInitialized=!1,a.call(this,b,c)}return b.prototype.current=function(b,c){var d=this;return this._isInitialized?void b.call(this,c):void this.initSelection.call(null,this.$element,function(b){d._isInitialized=!0,a.isArray(b)||(b=[b]),c(b)})},b}),b.define("select2/compat/inputData",["jquery"],function(a){function b(a,b,c){this._currentData=[],this._valueSeparator=c.get("valueSeparator")||",","hidden"===b.prop("type")&&c.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),a.call(this,b,c)}return b.prototype.current=function(b,c){function d(b,c){var e=[];return b.selected||-1!==a.inArray(b.id,c)?(b.selected=!0,e.push(b)):b.selected=!1,b.children&&e.push.apply(e,d(b.children,c)),e}for(var e=[],f=0;f<this._currentData.length;f++){var g=this._currentData[f];e.push.apply(e,d(g,this.$element.val().split(this._valueSeparator)))}c(e)},b.prototype.select=function(b,c){if(this.options.get("multiple")){var d=this.$element.val();d+=this._valueSeparator+c.id,this.$element.val(d),this.$element.trigger("change")}else this.current(function(b){a.map(b,function(a){a.selected=!1})}),this.$element.val(c.id),this.$element.trigger("change")},b.prototype.unselect=function(a,b){var c=this;b.selected=!1,this.current(function(a){for(var d=[],e=0;e<a.length;e++){var f=a[e];b.id!=f.id&&d.push(f.id)}c.$element.val(d.join(c._valueSeparator)),c.$element.trigger("change")})},b.prototype.query=function(a,b,c){for(var d=[],e=0;e<this._currentData.length;e++){var f=this._currentData[e],g=this.matches(b,f);null!==g&&d.push(g)}c({results:d})},b.prototype.addOptions=function(b,c){var d=a.map(c,function(b){return a.data(b[0],"data")});this._currentData.push.apply(this._currentData,d)},b}),b.define("select2/compat/matcher",["jquery"],function(a){function b(b){function c(c,d){var e=a.extend(!0,{},d);if(null==c.term||""===a.trim(c.term))return e;if(d.children){for(var f=d.children.length-1;f>=0;f--){var g=d.children[f],h=b(c.term,g.text,g);h||e.children.splice(f,1)}if(e.children.length>0)return e}return b(c.term,d.text,d)?e:null}return c}return b}),b.define("select2/compat/query",[],function(){function a(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),a.call(this,b,c)}return a.prototype.query=function(a,b,c){b.callback=c;var d=this.options.get("query");d.call(null,b)},a}),b.define("select2/dropdown/attachContainer",[],function(){function a(a,b,c){a.call(this,b,c)}return a.prototype.position=function(a,b,c){var d=c.find(".dropdown-wrapper");d.append(b),b.addClass("select2-dropdown--below"),c.addClass("select2-container--below")},a}),b.define("select2/dropdown/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);var d=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$dropdown.on(d.join(" "),function(a){a.stopPropagation()})},a}),b.define("select2/selection/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);var d=["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"];this.$selection.on(d.join(" "),function(a){a.stopPropagation()})},a}),function(c){"function"==typeof b.define&&b.define.amd?b.define("jquery-mousewheel",["jquery"],c):"object"==typeof exports?module.exports=c:c(a)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),b.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(a,b,c,d){if(null==a.fn.select2){var e=["open","close","destroy"];a.fn.select2=function(b){if(b=b||{},"object"==typeof b)return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if("string"==typeof b){var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data("select2");null==c&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2."),d=c[b].apply(c,f)}),a.inArray(b,e)>-1?this:d}throw new Error("Invalid arguments for Select2: "+b)}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c});
;jQuery(function(s){var r={init:function(){s(document.body).on("keyup change","form.register #reg_password, form.checkout #account_password, form.edit-account #password_1, form.lost_reset_password #password_1",this.strengthMeter),s("form.checkout #createaccount").change()},strengthMeter:function(){var e=s("form.register, form.checkout, form.edit-account, form.lost_reset_password"),t=s('input[type="submit"]',e),a=s("#reg_password, #account_password, #password_1",e),o=1,d=a.val();r.includeMeter(e,a),o=r.checkPasswordStrength(e,a),d.length>0&&o<wc_password_strength_meter_params.min_password_strength&&!e.is("form.checkout")?t.attr("disabled","disabled").addClass("disabled"):t.removeAttr("disabled","disabled").removeClass("disabled")},includeMeter:function(r,e){var t=r.find(".woocommerce-password-strength");""===e.val()?(t.remove(),s(document.body).trigger("wc-password-strength-removed")):0===t.length&&(e.after('<div class="woocommerce-password-strength" aria-live="polite"></div>'),s(document.body).trigger("wc-password-strength-added"))},checkPasswordStrength:function(s,r){var e=s.find(".woocommerce-password-strength"),t=s.find(".woocommerce-password-hint"),a='<small class="woocommerce-password-hint">'+wc_password_strength_meter_params.i18n_password_hint+"</small>",o=wp.passwordStrength.meter(r.val(),wp.passwordStrength.userInputBlacklist()),d="";switch(e.removeClass("short bad good strong"),t.remove(),o<wc_password_strength_meter_params.min_password_strength&&(d=" - "+wc_password_strength_meter_params.i18n_password_error),o){case 0:e.addClass("short").html(pwsL10n["short"]+d),e.after(a);break;case 1:case 2:e.addClass("bad").html(pwsL10n.bad+d),e.after(a);break;case 3:e.addClass("good").html(pwsL10n.good+d);break;case 4:e.addClass("strong").html(pwsL10n.strong+d);break;case 5:e.addClass("short").html(pwsL10n.mismatch)}return o}};r.init()});
;/*!
 * jQuery blockUI plugin
 * Version 2.70.0-2014.11.23
 * Requires jQuery v1.7 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2013 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
!function(){"use strict";function e(e){function t(t,n){var s,h,k=t==window,y=n&&n.message!==undefined?n.message:undefined;if(!(n=e.extend({},e.blockUI.defaults,n||{})).ignoreIfBlocked||!e(t).data("blockUI.isBlocked")){if(n.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,n.overlayCSS||{}),s=e.extend({},e.blockUI.defaults.css,n.css||{}),n.onOverlayClick&&(n.overlayCSS.cursor="pointer"),h=e.extend({},e.blockUI.defaults.themedCSS,n.themedCSS||{}),y=y===undefined?n.message:y,k&&p&&o(window,{fadeOut:0}),y&&"string"!=typeof y&&(y.parentNode||y.jquery)){var m=y.jquery?y[0]:y,g={};e(t).data("blockUI.history",g),g.el=m,g.parent=m.parentNode,g.display=m.style.display,g.position=m.style.position,g.parent&&g.parent.removeChild(m)}e(t).data("blockUI.onUnblock",n.onUnblock);var v,I,w,U,x=n.baseZ;v=e(r||n.forceIframe?'<iframe class="blockUI" style="z-index:'+x+++';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+n.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),I=e(n.theme?'<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+x+++';display:none"></div>':'<div class="blockUI blockOverlay" style="z-index:'+x+++';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>'),n.theme&&k?(U='<div class="blockUI '+n.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:fixed">',n.title&&(U+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),U+='<div class="ui-widget-content ui-dialog-content"></div>',U+="</div>"):n.theme?(U='<div class="blockUI '+n.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(x+10)+';display:none;position:absolute">',n.title&&(U+='<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(n.title||"&nbsp;")+"</div>"),U+='<div class="ui-widget-content ui-dialog-content"></div>',U+="</div>"):U=k?'<div class="blockUI '+n.blockMsgClass+' blockPage" style="z-index:'+(x+10)+';display:none;position:fixed"></div>':'<div class="blockUI '+n.blockMsgClass+' blockElement" style="z-index:'+(x+10)+';display:none;position:absolute"></div>',w=e(U),y&&(n.theme?(w.css(h),w.addClass("ui-widget-content")):w.css(s)),n.theme||I.css(n.overlayCSS),I.css("position",k?"fixed":"absolute"),(r||n.forceIframe)&&v.css("opacity",0);var C=[v,I,w],S=e(k?"body":t);e.each(C,function(){this.appendTo(S)}),n.theme&&n.draggable&&e.fn.draggable&&w.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var O=f&&(!e.support.boxModel||e("object,embed",k?null:t).length>0);if(u||O){if(k&&n.allowBodyStretch&&e.support.boxModel&&e("html,body").css("height","100%"),(u||!e.support.boxModel)&&!k)var E=a(t,"borderTopWidth"),T=a(t,"borderLeftWidth"),M=E?"(0 - "+E+")":0,B=T?"(0 - "+T+")":0;e.each(C,function(e,t){var o=t[0].style;if(o.position="absolute",e<2)k?o.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.support.boxModel?0:"+n.quirksmodeOffsetHack+') + "px"'):o.setExpression("height",'this.parentNode.offsetHeight + "px"'),k?o.setExpression("width",'jQuery.support.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):o.setExpression("width",'this.parentNode.offsetWidth + "px"'),B&&o.setExpression("left",B),M&&o.setExpression("top",M);else if(n.centerY)k&&o.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),o.marginTop=0;else if(!n.centerY&&k){var i="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+(n.css&&n.css.top?parseInt(n.css.top,10):0)+') + "px"';o.setExpression("top",i)}})}if(y&&(n.theme?w.find(".ui-widget-content").append(y):w.append(y),(y.jquery||y.nodeType)&&e(y).show()),(r||n.forceIframe)&&n.showOverlay&&v.show(),n.fadeIn){var j=n.onBlock?n.onBlock:c,H=n.showOverlay&&!y?j:c,z=y?j:c;n.showOverlay&&I._fadeIn(n.fadeIn,H),y&&w._fadeIn(n.fadeIn,z)}else n.showOverlay&&I.show(),y&&w.show(),n.onBlock&&n.onBlock.bind(w)();if(i(1,t,n),k?(p=w[0],b=e(n.focusableElements,p),n.focusInput&&setTimeout(l,20)):d(w[0],n.centerX,n.centerY),n.timeout){var W=setTimeout(function(){k?e.unblockUI(n):e(t).unblock(n)},n.timeout);e(t).data("blockUI.timeout",W)}}}function o(t,o){var s,l=t==window,d=e(t),a=d.data("blockUI.history"),c=d.data("blockUI.timeout");c&&(clearTimeout(c),d.removeData("blockUI.timeout")),o=e.extend({},e.blockUI.defaults,o||{}),i(0,t,o),null===o.onUnblock&&(o.onUnblock=d.data("blockUI.onUnblock"),d.removeData("blockUI.onUnblock"));var r;r=l?e(document.body).children().filter(".blockUI").add("body > .blockUI"):d.find(">.blockUI"),o.cursorReset&&(r.length>1&&(r[1].style.cursor=o.cursorReset),r.length>2&&(r[2].style.cursor=o.cursorReset)),l&&(p=b=null),o.fadeOut?(s=r.length,r.stop().fadeOut(o.fadeOut,function(){0==--s&&n(r,a,o,t)})):n(r,a,o,t)}function n(t,o,n,i){var s=e(i);if(!s.data("blockUI.isBlocked")){t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),o&&o.el&&(o.el.style.display=o.display,o.el.style.position=o.position,o.el.style.cursor="default",o.parent&&o.parent.appendChild(o.el),s.removeData("blockUI.history")),s.data("blockUI.static")&&s.css("position","static"),"function"==typeof n.onUnblock&&n.onUnblock(i,n);var l=e(document.body),d=l.width(),a=l[0].style.width;l.width(d-1).width(d),l[0].style.width=a}}function i(t,o,n){var i=o==window,l=e(o);if((t||(!i||p)&&(i||l.data("blockUI.isBlocked")))&&(l.data("blockUI.isBlocked",t),i&&n.bindEvents&&(!t||n.showOverlay))){var d="mousedown mouseup keydown keypress keyup touchstart touchend touchmove";t?e(document).bind(d,n,s):e(document).unbind(d,s)}}function s(t){if("keydown"===t.type&&t.keyCode&&9==t.keyCode&&p&&t.data.constrainTabKey){var o=b,n=!t.shiftKey&&t.target===o[o.length-1],i=t.shiftKey&&t.target===o[0];if(n||i)return setTimeout(function(){l(i)},10),!1}var s=t.data,d=e(t.target);return d.hasClass("blockOverlay")&&s.onOverlayClick&&s.onOverlayClick(t),d.parents("div."+s.blockMsgClass).length>0||0===d.parents().children().filter("div.blockUI").length}function l(e){if(b){var t=b[!0===e?b.length-1:0];t&&t.focus()}}function d(e,t,o){var n=e.parentNode,i=e.style,s=(n.offsetWidth-e.offsetWidth)/2-a(n,"borderLeftWidth"),l=(n.offsetHeight-e.offsetHeight)/2-a(n,"borderTopWidth");t&&(i.left=s>0?s+"px":"0"),o&&(i.top=l>0?l+"px":"0")}function a(t,o){return parseInt(e.css(t,o),10)||0}e.fn._fadeIn=e.fn.fadeIn;var c=e.noop||function(){},r=/MSIE/.test(navigator.userAgent),u=/MSIE 6.0/.test(navigator.userAgent)&&!/MSIE 8.0/.test(navigator.userAgent),f=(document.documentMode,e.isFunction(document.createElement("div").style.setExpression));e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){o(window,e)},e.growlUI=function(t,o,n,i){var s=e('<div class="growlUI"></div>');t&&s.append("<h1>"+t+"</h1>"),o&&s.append("<h2>"+o+"</h2>"),n===undefined&&(n=3e3);var l=function(t){t=t||{},e.blockUI({message:s,fadeIn:"undefined"!=typeof t.fadeIn?t.fadeIn:700,fadeOut:"undefined"!=typeof t.fadeOut?t.fadeOut:1e3,timeout:"undefined"!=typeof t.timeout?t.timeout:n,centerY:!1,showOverlay:!1,onUnblock:i,css:e.blockUI.defaults.growlCSS})};l();s.css("opacity");s.mouseover(function(){l({fadeIn:0,timeout:3e4});var t=e(".blockMsg");t.stop(),t.fadeTo(300,1)}).mouseout(function(){e(".blockMsg").fadeOut(1e3)})},e.fn.block=function(o){if(this[0]===window)return e.blockUI(o),this;var n=e.extend({},e.blockUI.defaults,o||{});return this.each(function(){var t=e(this);n.ignoreIfBlocked&&t.data("blockUI.isBlocked")||t.unblock({fadeOut:0})}),this.each(function(){"static"==e.css(this,"position")&&(this.style.position="relative",e(this).data("blockUI.static",!0)),this.style.zoom=1,t(this,o)})},e.fn.unblock=function(t){return this[0]===window?(e.unblockUI(t),this):this.each(function(){o(this,t)})},e.blockUI.version=2.7,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},cursorReset:"default",growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,focusableElements:":input:enabled:visible",onBlock:null,onUnblock:null,onOverlayClick:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg",ignoreIfBlocked:!1};var p=null,b=[]}"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)}();
;/*!
 * JavaScript Cookie v2.1.4
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */
!function(e){var n=!1;if("function"==typeof define&&define.amd&&(define(e),n=!0),"object"==typeof exports&&(module.exports=e(),n=!0),!n){var o=window.Cookies,t=window.Cookies=e();t.noConflict=function(){return window.Cookies=o,t}}}(function(){function e(){for(var e=0,n={};e<arguments.length;e++){var o=arguments[e];for(var t in o)n[t]=o[t]}return n}function n(o){function t(n,r,i){var c;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(i=e({path:"/"},t.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{c=JSON.stringify(r),/^[\{\[]/.test(c)&&(r=c)}catch(m){}r=o.write?o.write(r,n):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),n=(n=(n=encodeURIComponent(String(n))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var f="";for(var s in i)i[s]&&(f+="; "+s,!0!==i[s]&&(f+="="+i[s]));return document.cookie=n+"="+r+f}n||(c={});for(var p=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<p.length;u++){var l=p[u].split("="),C=l.slice(1).join("=");'"'===C.charAt(0)&&(C=C.slice(1,-1));try{var g=l[0].replace(d,decodeURIComponent);if(C=o.read?o.read(C,g):o(C,g)||C.replace(d,decodeURIComponent),this.json)try{C=JSON.parse(C)}catch(m){}if(n===g){c=C;break}n||(c[g]=C)}catch(m){}}return c}}return t.set=t,t.get=function(e){return t.call(t,e)},t.getJSON=function(){return t.apply({json:!0},[].slice.call(arguments))},t.defaults={},t.remove=function(n,o){t(n,"",e(o,{expires:-1}))},t.withConverter=n,t}return n(function(){})});
;jQuery(function(o){o(".woocommerce-ordering").on("change","select.orderby",function(){o(this).closest("form").submit()}),o("input.qty:not(.product-quantity input.qty)").each(function(){var e=parseFloat(o(this).attr("min"));e>=0&&parseFloat(o(this).val())<e&&o(this).val(e)}),jQuery(".woocommerce-store-notice__dismiss-link").click(function(){Cookies.set("store_notice","hidden",{path:"/"}),jQuery(".woocommerce-store-notice").hide()}),"hidden"===Cookies.get("store_notice")?jQuery(".woocommerce-store-notice").hide():jQuery(".woocommerce-store-notice").show()});
;jQuery(function(e){function t(){o&&sessionStorage.setItem("wc_cart_created",(new Date).getTime())}function n(e){o&&(localStorage.setItem(a,e),sessionStorage.setItem(a,e))}function r(){e.ajax(s)}if("undefined"==typeof wc_cart_fragments_params)return!1;var o,a=wc_cart_fragments_params.ajax_url.toString()+"-wc_cart_hash";try{o="sessionStorage"in window&&null!==window.sessionStorage,window.sessionStorage.setItem("wc","test"),window.sessionStorage.removeItem("wc"),window.localStorage.setItem("wc","test"),window.localStorage.removeItem("wc")}catch(w){o=!1}var s={url:wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),type:"POST",success:function(r){r&&r.fragments&&(e.each(r.fragments,function(t,n){e(t).replaceWith(n)}),o&&(sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(r.fragments)),n(r.cart_hash),r.cart_hash&&t()),e(document.body).trigger("wc_fragments_refreshed"))}};if(o){var i=null;e(document.body).on("wc_fragment_refresh updated_wc_div",function(){r()}),e(document.body).on("added_to_cart",function(e,r,o){var s=sessionStorage.getItem(a);null!==s&&s!==undefined&&""!==s||t(),sessionStorage.setItem(wc_cart_fragments_params.fragment_name,JSON.stringify(r)),n(o)}),e(document.body).on("wc_fragments_refreshed",function(){clearTimeout(i),i=setTimeout(r,864e5)}),e(window).on("storage onstorage",function(e){a===e.originalEvent.key&&localStorage.getItem(a)!==sessionStorage.getItem(a)&&r()}),e(window).on("pageshow",function(t){t.originalEvent.persisted&&(e(".widget_shopping_cart_content").empty(),e(document.body).trigger("wc_fragment_refresh"))});try{var c=e.parseJSON(sessionStorage.getItem(wc_cart_fragments_params.fragment_name)),_=sessionStorage.getItem(a),g=Cookies.get("woocommerce_cart_hash"),m=sessionStorage.getItem("wc_cart_created");if(null!==_&&_!==undefined&&""!==_||(_=""),null!==g&&g!==undefined&&""!==g||(g=""),_&&(null===m||m===undefined||""===m))throw"No cart_created";if(m){var d=1*m+864e5,f=(new Date).getTime();if(d<f)throw"Fragment expired";i=setTimeout(r,d-f)}if(!c||!c["div.widget_shopping_cart_content"]||_!==g)throw"No fragment";e.each(c,function(t,n){e(t).replaceWith(n)}),e(document.body).trigger("wc_fragments_loaded")}catch(w){r()}}else r();Cookies.get("woocommerce_items_in_cart")>0?e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show():e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").hide(),e(document.body).on("adding_to_cart",function(){e(".hide_cart_widget_if_empty").closest(".widget_shopping_cart").show()})});
;/*! Magnific Popup - v1.0.0 - 2015-01-03
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2015 Dmitry Semenov; */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",j="AfterClose",k="BeforeAppend",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isIE7=-1!==c.indexOf("MSIE 7."),b.isIE8=-1!==c.indexOf("MSIE 8."),b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",b.ev=c.mainEl&&c.mainEl.length?c.mainEl.eq(0):d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.wrap.css(b.fixedContentPos?{overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}:{top:v.scrollTop(),position:"absolute"}),(b.st.fixedBgPos===!1||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup"+p+" focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=b.st[d]?b.st[d].markup:!1;y("FirstMarkupParse",f),b.currTemplate[d]=f?a(f):!0}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y(k),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||2!==c.which&&!c.ctrlKey&&!c.metaKey){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(a,c){if(void 0===c||c===!1)return!0;if(e=a.split("_"),e.length>1){var d=b.find(p+"-"+e[0]);if(d.length>0){var f=e[1];"replaceWith"===f?d[0]!==c[0]&&d.replaceWith(c):"img"===f?d.is("img")?d.attr("src",c):d.replaceWith('<img src="'+c+'" class="'+d.attr("class")+'" />'):d.attr(e[1],c)}}else b.find(p+"-"+a).html(c)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(F),w(h+"."+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I="ajax",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+"."+I,K),w("BeforeChange."+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus("loading");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y("ParseAjax",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),""}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return b.currItem.hasSize?b.currItem.img:!1},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var P="iframe",Q="//about:blank",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find("iframe");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+"."+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=b.st.gallery,e=".mfp-gallery",g=Boolean(a.fn.mfpFastClick);return b.direction=!0,c&&c.enabled?(f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s),h=g?"mfpFastClick":"click";e[h](function(){b.prev()}),f[h](function(){b.next()}),b.isIE7&&(x("b",e[0],!1,!0),x("a",e[0],!1,!0),x("b",f[0],!1,!0),x("a",f[0],!1,!0)),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowLeft&&g&&b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(),b.arrowRight=b.arrowLeft=null})):!1},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w("ImageHasSize."+U,function(a,b){b.img.css({"max-width":b.img[0].naturalWidth/c,width:"100%"})}),w("ElementParse."+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),function(){var b=1e3,c="ontouchstart"in window,d=function(){v.off("touchmove"+f+" touchend"+f)},e="mfpFastClick",f="."+e;a.fn.mfpFastClick=function(e){return a(this).each(function(){var g,h=a(this);if(c){var i,j,k,l,m,n;h.on("touchstart"+f,function(a){l=!1,n=1,m=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],j=m.clientX,k=m.clientY,v.on("touchmove"+f,function(a){m=a.originalEvent?a.originalEvent.touches:a.touches,n=m.length,m=m[0],(Math.abs(m.clientX-j)>10||Math.abs(m.clientY-k)>10)&&(l=!0,d())}).on("touchend"+f,function(a){d(),l||n>1||(g=!0,a.preventDefault(),clearTimeout(i),i=setTimeout(function(){g=!1},b),e())})})}h.on("click"+f,function(){g||e()})})},a.fn.destroyMfpFastClick=function(){a(this).off("touchstart"+f+" click"+f),c&&v.off("touchmove"+f+" touchend"+f)}}(),A()});
;/*! 
 * Inbox JavaScript Library 
 * @package Inbox 
 */function get_parameter_by_name(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}function get_query_variable(a,b){if("undefined"==typeof a||""==a||"undefined"==typeof b||""==b)return"";for(var c=a.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==b)return e[1]}return!1}function get_tinymce_content(a){return jQuery("#wp-"+a+"-wrap").hasClass("tmce-active")?tinyMCE.activeEditor.getContent():jQuery("#"+a).val()}function draft_screen_auto_save(){leavetype=function(){clearTimeout(window.bbm_autosave_secout),window.bbm_autosave_secout=setTimeout(function(){"view"==bbm_object.current_action&&(draft_save_notification_s(),draft_reply_screen()),"compose"==bbm_object.current_action&&(draft_save_notification_s(),draft_compose_screen())},3e3)},entertype=function(){clearTimeout(window.bbm_autosave_secout)},"view"==bbm_object.current_action&&(jQuery(document).on("keyup","#message_content",leavetype),jQuery(document).on("keydown","#message_content",entertype),"on"==bbm_object.editor_feature&&(window.bbm_draft_leavetype=leavetype,window.bbm_draft_entertype=entertype)),"compose"==bbm_object.current_action&&(jQuery(document).on("keyup","#message_content",leavetype),jQuery(document).on("keydown","#message_content",entertype),"on"==bbm_object.editor_feature&&(window.bbm_draft_leavetype=leavetype,window.bbm_draft_entertype=entertype))}function draft_save_notification_s(){clearTimeout(window.draft_save_notification),lang=bbm_object.lang,afterdom=!1,"view"==bbm_object.current_action&&(afterdom=jQuery("#message_content")),"compose"==bbm_object.current_action&&(afterdom=jQuery("#message_content")),"on"==bbm_object.editor_feature&&(afterdom=jQuery("#wp-message_content-wrap")),jQuery(".autodraftnotify").remove(),afterdom.after('<div class="autodraftnotify"><i class="fa fa-spinner fa-spin"></i> '+lang.auto_draft_saving+"</div>"),jQuery("#save_as_draft").prop("disable",!0)}function draft_save_notification_e(a){jQuery(".autodraftnotify").html(a),jQuery("#save_as_draft").prop("disable",!1)}function draft_reply_screen(){var a=get_tinymce_content("message_content"),b=jQuery("#bbm-attachment-id").val();if(""!=a||""!=b){var c=jQuery("#thread_id").val(),d={action:"bbm_draft_ajax",task:"save_as_draft",thread_id:c,draft_content:a,bbm_attachment:jQuery("#bbm-attachment-uri").val()};jQuery.post(ajaxurl,d,function(a){draft_save_notification_e(),draft_save_notification_e(a),a&&jQuery("#buddypress #item-header").find("#message").remove()})}}function draft_compose_screen(){var a=get_tinymce_content("message_content"),b={action:"bbm_draft_ajax",task:"compose_save_as_draft",form_data:jQuery("form#send_message_form").serialize(),draft_content:a,recipients:jQuery("#send-to-usernames").attr("class"),draft_uniqid:jQuery("#draft_uniqid").val(),draft_id:get_parameter_by_name("draft_id")};jQuery.post(ajaxurl,b,function(a){draft_save_notification_e(),draft_save_notification_e(a),a&&jQuery("#buddypress #item-header").find("#message").remove()})}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(a){var b,c,d,e,f,g,h="Close",i="BeforeClose",j="AfterClose",k="BeforeAppend",l="MarkupParse",m="Open",n="Change",o="mfp",p="."+o,q="mfp-ready",r="mfp-removing",s="mfp-prevent-close",t=function(){},u=!!window.jQuery,v=a(window),w=function(a,c){b.ev.on(o+a+p,c)},x=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},y=function(c,d){b.ev.triggerHandler(o+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},z=function(c){return c===g&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),g=c),b.currTemplate.closeBtn},A=function(){a.magnificPopup.instance||(b=new t,b.init(),a.magnificPopup.instance=b)},B=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};t.prototype={constructor:t,init:function(){var c=navigator.appVersion;b.isIE7=-1!==c.indexOf("MSIE 7."),b.isIE8=-1!==c.indexOf("MSIE 8."),b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=B(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),d=a(document),b.popupsCache={}},open:function(c){var e;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var g,h=c.items;for(e=0;e<h.length;e++)if(g=h[e],g.parsed&&(g=g.el[0]),g===c.el[0]){b.index=e;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],f="",b.ev=c.mainEl&&c.mainEl.length?c.mainEl.eq(0):d,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=x("bg").on("click"+p,function(){b.close()}),b.wrap=x("wrap").attr("tabindex",-1).on("click"+p,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=x("container",b.wrap)),b.contentContainer=x("content"),b.st.preloader&&(b.preloader=x("preloader",b.container,b.st.tLoading));var i=a.magnificPopup.modules;for(e=0;e<i.length;e++){var j=i[e];j=j.charAt(0).toUpperCase()+j.slice(1),b["init"+j].call(b)}y("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(w(l,function(a,b,c,d){c.close_replaceWith=z(d.type)}),f+=" mfp-close-btn-in"):b.wrap.append(z())),b.st.alignTop&&(f+=" mfp-align-top"),b.wrap.css(b.fixedContentPos?{overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}:{top:v.scrollTop(),position:"absolute"}),(b.st.fixedBgPos===!1||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:d.height(),position:"absolute"}),b.st.enableEscapeKey&&d.on("keyup"+p,function(a){27===a.keyCode&&b.close()}),v.on("resize"+p,function(){b.updateSize()}),b.st.closeOnContentClick||(f+=" mfp-auto-cursor"),f&&b.wrap.addClass(f);var k=b.wH=v.height(),n={};if(b.fixedContentPos&&b._hasScrollBar(k)){var o=b._getScrollbarSize();o&&(n.marginRight=o)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):n.overflow="hidden");var r=b.st.mainClass;return b.isIE7&&(r+=" mfp-ie7"),r&&b._addClassToMFP(r),b.updateItemHTML(),y("BuildControls"),a("html").css(n),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||a(document.body)),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(q),b._setFocus()):b.bgOverlay.addClass(q),d.on("focusin"+p,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(k),y(m),c},close:function(){b.isOpen&&(y(i),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(r),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){y(h);var c=r+" "+q+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var e={marginRight:""};b.isIE7?a("body, html").css("overflow",""):e.overflow="",a("html").css(e)}d.off("keyup"+p+" focusin"+p),b.ev.off(p),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,y(j)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||v.height();b.fixedContentPos||b.wrap.css("height",b.wH),y("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(y("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var f=!!b.st[d]&&b.st[d].markup;y("FirstMarkupParse",f),b.currTemplate[d]=!f||a(f)}e&&e!==c.type&&b.container.removeClass("mfp-"+e+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,y(n,c),e=c.type,b.container.prepend(b.contentContainer),y("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(".mfp-close").length||b.content.append(z()):b.content=a:b.content="",y(k),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,y("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||2!==c.which&&!c.ctrlKey&&!c.metaKey){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(v.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};y("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(s)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?d.height():document.body.scrollHeight)>(a||v.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){return c.target===b.wrap[0]||a.contains(b.wrap[0],c.target)?void 0:(b._setFocus(),!1)},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),y(l,[b,c,d]),a.each(c,function(a,c){if(void 0===c||c===!1)return!0;if(e=a.split("_"),e.length>1){var d=b.find(p+"-"+e[0]);if(d.length>0){var f=e[1];"replaceWith"===f?d[0]!==c[0]&&d.replaceWith(c):"img"===f?d.is("img")?d.attr("src",c):d.replaceWith('<img src="'+c+'" class="'+d.attr("class")+'" />'):d.attr(e[1],c)}}else b.find(p+"-"+a).html(c)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:t.prototype,modules:[],open:function(b,c){return A(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},a.fn.magnificPopup=function(c){A();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=u?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),u?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var C,D,E,F="inline",G=function(){E&&(D.after(E.addClass(C)).detach(),E=null)};a.magnificPopup.registerModule(F,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(F),w(h+"."+F,function(){G()})},getInline:function(c,d){if(G(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(D||(C=e.hiddenClass,D=x(C),C="mfp-"+C),E=f.after(D).detach().removeClass(C)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var H,I="ajax",J=function(){H&&a(document.body).removeClass(H)},K=function(){J(),b.req&&b.req.abort()};a.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){b.types.push(I),H=b.st.ajax.cursor,w(h+"."+I,K),w("BeforeChange."+I,K)},getAjax:function(c){H&&a(document.body).addClass(H),b.updateStatus("loading");var d=a.extend({url:c.src,success:function(d,e,f){var g={data:d,xhr:f};y("ParseAjax",g),b.appendContent(a(g.data),I),c.finished=!0,J(),b._setFocus(),setTimeout(function(){b.wrap.addClass(q)},16),b.updateStatus("ready"),y("AjaxContentAdded")},error:function(){J(),c.finished=c.loadError=!0,b.updateStatus("error",b.st.ajax.tError.replace("%url%",c.src))}},b.st.ajax.settings);return b.req=a.ajax(d),""}}});var L,M=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var c=b.st.image,d=".image";b.types.push("image"),w(m+d,function(){"image"===b.currItem.type&&c.cursor&&a(document.body).addClass(c.cursor)}),w(h+d,function(){c.cursor&&a(document.body).removeClass(c.cursor),v.off("resize"+p)}),w("Resize"+d,b.resizeImage),b.isLowIE&&w("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,L&&clearInterval(L),a.isCheckingImgSize=!1,y("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){L&&clearInterval(L),L=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(L),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,y("ImageLoadComplete")):(e++,200>e?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.el&&c.el.find("img").length&&(j.alt=c.el.find("img").attr("alt")),c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:M(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(L&&clearInterval(L),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var N,O=function(){return void 0===N&&(N=void 0!==document.createElement("p").style.MozTransform),N};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,j=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};w("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),a=b._getItemToZoom(),!a)return void k();f=j(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,y("ZoomAnimationEnded")},16)},g)},16)}}),w(i+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=j(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),w(h+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return!!b.currItem.hasSize&&b.currItem.img},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(u?d.innerHeight():d[0].offsetHeight)-g-f};return O()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}});var P="iframe",Q="//about:blank",R=function(a){if(b.currTemplate[P]){var c=b.currTemplate[P].find("iframe");c.length&&(a||(c[0].src=Q),b.isIE8&&c.css("display",a?"block":"none"))}};a.magnificPopup.registerModule(P,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){b.types.push(P),w("BeforeChange",function(a,b,c){b!==c&&(b===P?R():c===P&&R(!0))}),w(h+"."+P,function(){R()})},getIframe:function(c,d){var e=c.src,f=b.st.iframe;a.each(f.patterns,function(){return e.indexOf(this.index)>-1?(this.id&&(e="string"==typeof this.id?e.substr(e.lastIndexOf(this.id)+this.id.length,e.length):this.id.call(this,e)),e=this.src.replace("%id%",e),!1):void 0});var g={};return f.srcAction&&(g[f.srcAction]=e),b._parseMarkup(d,g,c),b.updateStatus("ready"),d}}});var S=function(a){var c=b.items.length;return a>c-1?a-c:0>a?c+a:a},T=function(a,b,c){return a.replace(/%curr%/gi,b+1).replace(/%total%/gi,c)};a.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var c=b.st.gallery,e=".mfp-gallery",g=Boolean(a.fn.mfpFastClick);return b.direction=!0,!(!c||!c.enabled)&&(f+=" mfp-gallery",w(m+e,function(){c.navigateByImgClick&&b.wrap.on("click"+e,".mfp-img",function(){return b.items.length>1?(b.next(),!1):void 0}),d.on("keydown"+e,function(a){37===a.keyCode?b.prev():39===a.keyCode&&b.next()})}),w("UpdateStatus"+e,function(a,c){c.text&&(c.text=T(c.text,b.currItem.index,b.items.length))}),w(l+e,function(a,d,e,f){var g=b.items.length;e.counter=g>1?T(c.tCounter,f.index,g):""}),w("BuildControls"+e,function(){if(b.items.length>1&&c.arrows&&!b.arrowLeft){var d=c.arrowMarkup,e=b.arrowLeft=a(d.replace(/%title%/gi,c.tPrev).replace(/%dir%/gi,"left")).addClass(s),f=b.arrowRight=a(d.replace(/%title%/gi,c.tNext).replace(/%dir%/gi,"right")).addClass(s),h=g?"mfpFastClick":"click";e[h](function(){b.prev()}),f[h](function(){b.next()}),b.isIE7&&(x("b",e[0],!1,!0),x("a",e[0],!1,!0),x("b",f[0],!1,!0),x("a",f[0],!1,!0)),b.container.append(e.add(f))}}),w(n+e,function(){b._preloadTimeout&&clearTimeout(b._preloadTimeout),b._preloadTimeout=setTimeout(function(){b.preloadNearbyImages(),b._preloadTimeout=null},16)}),void w(h+e,function(){d.off(e),b.wrap.off("click"+e),b.arrowLeft&&g&&b.arrowLeft.add(b.arrowRight).destroyMfpFastClick(),b.arrowRight=b.arrowLeft=null}))},next:function(){b.direction=!0,b.index=S(b.index+1),b.updateItemHTML()},prev:function(){b.direction=!1,b.index=S(b.index-1),b.updateItemHTML()},goTo:function(a){b.direction=a>=b.index,b.index=a,b.updateItemHTML()},preloadNearbyImages:function(){var a,c=b.st.gallery.preload,d=Math.min(c[0],b.items.length),e=Math.min(c[1],b.items.length);for(a=1;a<=(b.direction?e:d);a++)b._preloadItem(b.index+a);for(a=1;a<=(b.direction?d:e);a++)b._preloadItem(b.index-a)},_preloadItem:function(c){if(c=S(c),!b.items[c].preloaded){var d=b.items[c];d.parsed||(d=b.parseEl(c)),y("LazyLoad",d),"image"===d.type&&(d.img=a('<img class="mfp-img" />').on("load.mfploader",function(){d.hasSize=!0}).on("error.mfploader",function(){d.hasSize=!0,d.loadError=!0,y("LazyLoadError",d)}).attr("src",d.src)),d.preloaded=!0}}}});var U="retina";a.magnificPopup.registerModule(U,{options:{replaceSrc:function(a){return a.src.replace(/\.\w+$/,function(a){return"@2x"+a})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var a=b.st.retina,c=a.ratio;c=isNaN(c)?c():c,c>1&&(w("ImageHasSize."+U,function(a,b){b.img.css({"max-width":b.img[0].naturalWidth/c,width:"100%"})}),w("ElementParse."+U,function(b,d){d.src=a.replaceSrc(d,c)}))}}}}),function(){var b=1e3,c="ontouchstart"in window,d=function(){v.off("touchmove"+f+" touchend"+f)},e="mfpFastClick",f="."+e;a.fn.mfpFastClick=function(e){return a(this).each(function(){var g,h=a(this);if(c){var i,j,k,l,m,n;h.on("touchstart"+f,function(a){l=!1,n=1,m=a.originalEvent?a.originalEvent.touches[0]:a.touches[0],j=m.clientX,k=m.clientY,v.on("touchmove"+f,function(a){m=a.originalEvent?a.originalEvent.touches:a.touches,n=m.length,m=m[0],(Math.abs(m.clientX-j)>10||Math.abs(m.clientY-k)>10)&&(l=!0,d())}).on("touchend"+f,function(a){d(),l||n>1||(g=!0,a.preventDefault(),clearTimeout(i),i=setTimeout(function(){g=!1},b),e())})})}h.on("click"+f,function(){g||e()})})},a.fn.destroyMfpFastClick=function(){a(this).off("touchstart"+f+" click"+f),c&&v.off("touchmove"+f+" touchend"+f)}}(),A()}),jQuery(document).ready(function(){jQuery("body").hasClass("messages")&&jQuery("body").hasClass("bp-user")&&(window.bbm_visual_editor_event=function(){tinymce.editors.length>0?jQuery("#wp-message_content-wrap").hasClass("tmce-active")&&jQuery("#wp-message_content-wrap").find("iframe").contents().find("body").on("keyup",function(){jQuery("#message_content").val(get_tinymce_content("message_content"))}):setTimeout(function(){window.bbm_visual_editor_event()},100)},"object"==typeof tinymce&&window.bbm_visual_editor_event()),jQuery(".bbm-modal").magnificPopup({type:"inline",preloader:!1,callbacks:{open:function(){jQuery(".popup_error_message").length&&jQuery(".popup_error_message").html("")}}}),jQuery(document).on("click",".bbm-modal-cancel",function(a){a.preventDefault(),jQuery.magnificPopup.close()}),jQuery(".add-bbm-label-details #label_add").on("click",function(){var a=jQuery("#bbm_current_thread_id").val(),b=jQuery(".add-bbm-label-details #bbm_label_name").val(),c={action:"bbm_label_ajax",task:"add_new_label",thread_id:a,label_name:b};jQuery.post(ajaxurl,c,function(a){var a=jQuery.parseJSON(a);jQuery.magnificPopup.close(),jQuery("#buddypress #item-body .bp-template-notice").remove(),""!=a.label_id&&(jQuery(".thread-subject-label").load(window.location.href+" .thread-subject-label",function(){jQuery(".thread-subject-label > .thread-subject-label").attr("class","")}),jQuery(".bbm_label_dropdown .multiSelect li:first").after('<li><span class="bbm-label-input"><input name="bbm_label_id_'+a.label_id+'" type="checkbox" checked="1" value="'+a.label_id+'" class="styled"><strong></strong></span><div class="bbm-label-wrap">'+b+'<i class="fa fa-times-circle bbm_label_delete"></i></div></li>')),""!=a.message&&alert(a.message),jQuery(".add-bbm-label-details #bbm_label_name").val("")})}),jQuery(".bbm_label_dropdown input:checkbox").on("change",function(){var a=jQuery(this).val(),b=jQuery("#bbm_current_thread_id").val(),c=jQuery(this).is(":checked"),d=c?"bbm_label_add_message":"bbm_label_remove_message",e={action:"bbm_label_ajax",task:d,label_id:a,thread_id:b};jQuery.post(ajaxurl,e,function(a){var a=jQuery.parseJSON(a);"bbm_label_add_message"==d&&(jQuery("#message-subject .thread-subject-label").length?jQuery("#message-subject .thread-subject-label").append(a.label_html):jQuery("#message-subject").append('<span class="thread-subject-label">'+a.label_html+"</span>")),"bbm_label_remove_message"==d&&jQuery("#message-subject .thread-subject-label ."+a.label_class).remove()})}),jQuery(".bbm_label_dropdown").on("click",".bbm_label_delete",function(){var a=jQuery(this).closest("li");if(!confirm("Are you sure you want to delete this label? It will be removed from all conversations."))return!1;var b=jQuery(this).closest("li").find("input").val(),c={action:"bbm_delete_label_ajax",label_id:b};jQuery.post(ajaxurl,c,function(b){var b=jQuery.parseJSON(b);b&&(jQuery(".thread-subject-label").load(window.location.href+" .thread-subject-label"),jQuery(a).fadeOut(),alert(b.message))})}),jQuery("#send-reply #save_as_draft").on("click",function(){draft_save_notification_s(),draft_reply_screen()}),"view"==bbm_object.current_action&&"on"==bbm_object.draft_autosave&&draft_screen_auto_save(),jQuery("#send_message_form #save_as_draft").on("click",function(){draft_save_notification_s(),draft_compose_screen()}),"compose"==bbm_object.current_action&&"on"==bbm_object.draft_feature&&"on"==bbm_object.draft_autosave&&draft_screen_auto_save(),jQuery("#message-type-select").on("change",function(a){var b=this.value,c=jQuery("#message-threads td.bulk-select-check :checkbox");"all"==b?c.prop("checked","true"):c.prop("checked",!1)}),jQuery("#messages-options-nav-drafts, .messages-options-nav").on("click","#delete_drafts_messages",function(){var a=[],b=jQuery("#message-threads td.bulk-select-check :checkbox:checked");b.each(function(){a.push(jQuery(this).attr("value"))});var c={action:"bbm_draft_ajax",task:"bulk_delete_drafts",draft_ids:a.join(",")};jQuery.post(ajaxurl,c,function(a){location.reload()})}),jQuery(".bbm_label_dropdown dt a").on("click",function(){jQuery(".bbm_label_dropdown dd ul").slideToggle("fast")}),jQuery(".bbm_label_dropdown dd ul li a").on("click",function(){jQuery(".bbm_label_dropdown dd ul").hide()}),jQuery(document).bind("click",function(a){var b=jQuery(a.target);b.parents().hasClass("bbm_label_dropdown")||jQuery(".bbm_label_dropdown dd ul").hide()}),jQuery('.mutliSelect input[type="checkbox"]').on("click",function(){jQuery(this).closest(".mutliSelect").find('input[type="checkbox"]').val(),jQuery(this).val()+","});var a=jQuery("#send_message_form"),b=a.find('input[name="send-notice"]');if(0!==b.length&&b.change(function(){jQuery(this).is(":checked")?(a.find(".bbm-attachment-wrapper").hide(),a.find("#save_as_draft").hide()):(a.find(".bbm-attachment-wrapper").show(),a.find("#save_as_draft").show())}),null!=bbm_object.attachment_feature&&"on"==bbm_object.attachment_feature){var c=bbm_object.uploader||{},d=bbm_object.lang,e=bbm_object.selectors;if("compose"==bbm_object.current_action)var f=jQuery(e.form_message),g="send_message_form";else var f=jQuery(e.form_reply),g="send-reply";if(0===f.length)return!1;var h=f.find('input[type="submit"],button[type="submit"]'),i=f.find('input[name="bbm-attachment-uri"]'),j=f.find('input[name="bbm-attachment-id"]'),k=jQuery("#bb-buddyboss-attachment"),l=new plupload.Uploader({runtimes:"html5,silverlight,flash,html4",browse_button:"bb-buddyboss-attachment",container:document.getElementById(g),dragdrop:!1,max_file_size:c.max_file_size||"5mb",multi_selection:c.multiselect||!1,url:ajaxurl,multipart:!0,multipart_params:{action:"bb_buddyboss_message_attachment",cookie:encodeURIComponent(document.cookie)},flash_swf_url:c.flash_swf_url||"",silverlight_xap_url:c.silverlight_xap_url||"",filters:c.filters,init:{FilesAdded:function(a,b){h.attr("disabled","disabled").addClass("loading");var c=k.html();k.attr("disabled","disabled").addClass("loading").data("org_text",c).html(d.uploading),a.start()},FileUploaded:function(a,b,e){h.removeAttr("disabled").removeClass("loading"),k.removeAttr("disabled").removeClass("loading").html(k.data("org_text"));var f=jQuery.parseJSON(e.response),g=JSON.stringify(f);if(c.multiselect);else{var l=f.attachment_id,m=(f.url,"<span class='bbm-uploaded-file'>"+f.name+"<a href='#' data-attachment_id='"+f.file+"' class='remove-uploaded-file'  title='"+d.remove+"'>x</a></span>");k.after(m)}old_data=i.val(),old_data=old_data.split("||||||||"),old_data[old_data.length]=g,g=old_data.join("||||||||"),i.val(g),j.val(l).change(),window.bbm_attachment_btn_status()},Error:function(a,b){h.removeAttr("disabled").removeClass("loading"),k.removeAttr("disabled").removeClass("loading").html(k.data("org_text")),m(b.code),a.refresh(),c.multiselect||(i.val(""),j.val("").change())}}});l.init(),window.bbinboxuploader=l,jQuery(window).load(function(){window.bbinboxuploader.refresh()}),jQuery("body").click(function(){window.bbinboxuploader.refresh()}),jQuery.ajaxPrefilter(function(a,b,c){var d=get_query_variable(a.data,"action");if("undefined"!=typeof d&&"messages_send_reply"==d){var e=jQuery("#bbm-attachment-uri").val(),f=jQuery.extend({},b.data,{attachment_uri:e});a.data=jQuery.param(f),a.success=function(a){return function(b,c,d){if(parseInt(b)!=-1){jQuery(".bbm-uploaded-file").remove(),jQuery("#bbm-attachment-uri").val(""),jQuery("#bbm-attachment-id").val("");try{tinyMCE.activeEditor.setContent("")}catch(e){}}jQuery.isFunction(a)&&a(b,c,d)}}(a.success)}}),jQuery(".remove-uploaded-file").on("click",function(){_this=this,jQuery(this).closest(".bbm-uploaded-file").remove();var a=jQuery(this).attr("data-attachment_id"),b=jQuery("#bbm_draft_id").val(),c=jQuery("#thread_id").val(),d={action:"bbm_attachment_ajax",task:"remove_attachment",attachment_id:a,bbm_draft_id:b,thread_id:c};return jQuery.post(ajaxurl,d,function(a){"undefined"!=typeof a&&""!=a&&(jQuery(_this).parent().remove(),
alert(a),window.bbm_attachment_btn_status())}),!1});var m=function(a){switch(a){case plupload.FILE_EXTENSION_ERROR:alert(d.upload_error.file_type);break;case plupload.FILE_SIZE_ERROR:alert(d.upload_error.file_size);break;default:alert(d.upload_error.generic)}}}}),window.bbm_autosave_secout=null,window.bbm_attachment_btn_status=function(){"0"!=jQuery(".bbm-uploaded-file").length?jQuery("#bb-buddyboss-attachment").html(jQuery("#bb-buddyboss-attachment").data("another-txt")+' <i class="fa fa-paperclip"></i>'):jQuery("#bb-buddyboss-attachment").html(jQuery("#bb-buddyboss-attachment").data("txt")+' <i class="fa fa-paperclip"></i>')};
;;(function(jq){'use strict';jq(document).on('click','.sl-button',function(){var button=jq(this);var post_id=button.attr('data-post-id');var security=button.attr('data-nonce');var iscomment=button.attr('data-iscomment');var allbuttons;if(iscomment==='1'){allbuttons=jq('.sl-comment-button-'+post_id);}else{allbuttons=jq('.sl-button-'+post_id);}
if(post_id!==''){jq.ajax({type:'POST',url:recommendPost.ajaxurl,data:{action:'process_simple_like',post_id:post_id,nonce:security,is_comment:iscomment},beforeSend:function(){button.find('i').addClass('fa-spinner fa-spin');},success:function(response){var icon=response.icon;var count=response.count;allbuttons.html(icon+count);if(response.status==='unliked'){var like_text=recommendPost.like;allbuttons.prop('title',like_text);allbuttons.removeClass('liked');}else{var unlike_text=recommendPost.unlike;allbuttons.prop('title',unlike_text);allbuttons.addClass('liked');}
button.find('i').removeClass('fa-spinner fa-spin');}});}
return false;});})(jQuery);;
/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js */
if(!("classList"in document.createElement("_"))){(function(view){"use strict";if(!('Element'in view))return;var
classListProp="classList",protoProp="prototype",elemCtrProto=view.Element[protoProp],objCtr=Object,strTrim=String[protoProp].trim||function(){return this.replace(/^\s+|\s+$/g,"");},arrIndexOf=Array[protoProp].indexOf||function(item){var
i=0,len=this.length;for(;i<len;i++){if(i in this&&this[i]===item){return i;}}
return-1;},DOMEx=function(type,message){this.name=type;this.code=DOMException[type];this.message=message;},checkTokenAndGetIndex=function(classList,token){if(token===""){throw new DOMEx("SYNTAX_ERR","An invalid or illegal string was specified");}
if(/\s/.test(token)){throw new DOMEx("INVALID_CHARACTER_ERR","String contains an invalid character");}
return arrIndexOf.call(classList,token);},ClassList=function(elem){var
trimmedClasses=strTrim.call(elem.getAttribute("class")||""),classes=trimmedClasses?trimmedClasses.split(/\s+/):[],i=0,len=classes.length;for(;i<len;i++){this.push(classes[i]);}
this._updateClassName=function(){elem.setAttribute("class",this.toString());};},classListProto=ClassList[protoProp]=[],classListGetter=function(){return new ClassList(this);};DOMEx[protoProp]=Error[protoProp];classListProto.item=function(i){return this[i]||null;};classListProto.contains=function(token){token+="";return checkTokenAndGetIndex(this,token)!==-1;};classListProto.add=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=false;do{token=tokens[i]+"";if(checkTokenAndGetIndex(this,token)===-1){this.push(token);updated=true;}}
while(++i<l);if(updated){this._updateClassName();}};classListProto.remove=function(){var
tokens=arguments,i=0,l=tokens.length,token,updated=false,index;do{token=tokens[i]+"";index=checkTokenAndGetIndex(this,token);while(index!==-1){this.splice(index,1);updated=true;index=checkTokenAndGetIndex(this,token);}}
while(++i<l);if(updated){this._updateClassName();}};classListProto.toggle=function(token,force){token+="";var
result=this.contains(token),method=result?force!==true&&"remove":force!==false&&"add";if(method){this[method](token);}
if(force===true||force===false){return force;}else{return!result;}};classListProto.toString=function(){return this.join(" ");};if(objCtr.defineProperty){var classListPropDesc={get:classListGetter,enumerable:true,configurable:true};try{objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc);}catch(ex){if(ex.number===-0x7FF5EC54){classListPropDesc.enumerable=false;objCtr.defineProperty(elemCtrProto,classListProp,classListPropDesc);}}}else if(objCtr[protoProp].__defineGetter__){elemCtrProto.__defineGetter__(classListProp,classListGetter);}}(self));}
/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
(function(view){"use strict";view.URL=view.URL||view.webkitURL;if(view.Blob&&view.URL){try{new Blob;return;}catch(e){}}
var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||(function(view){var
get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1];},FakeBlobBuilder=function BlobBuilder(){this.data=[];},FakeBlob=function Blob(data,type,encoding){this.data=data;this.size=data.length;this.type=type;this.encoding=encoding;},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type];},file_ex_codes=("NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR "
+"NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR").split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;FakeBlob.fake=FB_proto.fake=true;while(file_ex_code--){FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1;}
if(!real_URL.createObjectURL){URL=view.URL=function(uri){var
uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a"),uri_origin;uri_info.href=uri;if(!("origin"in uri_info)){if(uri_info.protocol.toLowerCase()==="data:"){uri_info.origin=null;}else{uri_origin=uri.match(origin);uri_info.origin=uri_origin&&uri_origin[1];}}
return uri_info;};}
URL.createObjectURL=function(blob){var
type=blob.type,data_URI_header;if(type===null){type="application/octet-stream";}
if(blob instanceof FakeBlob){data_URI_header="data:"+type;if(blob.encoding==="base64"){return data_URI_header+";base64,"+blob.data;}else if(blob.encoding==="URI"){return data_URI_header+","+decodeURIComponent(blob.data);}if(btoa){return data_URI_header+";base64,"+btoa(blob.data);}else{return data_URI_header+","+encodeURIComponent(blob.data);}}else if(real_create_object_URL){return real_create_object_URL.call(real_URL,blob);}};URL.revokeObjectURL=function(object_URL){if(object_URL.substring(0,5)!=="data:"&&real_revoke_object_URL){real_revoke_object_URL.call(real_URL,object_URL);}};FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){var
str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;for(;i<buf_len;i++){str+=String.fromCharCode(buf[i]);}
bb.push(str);}else if(get_class(data)==="Blob"||get_class(data)==="File"){if(FileReaderSync){var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data));}else{throw new FileException("NOT_READABLE_ERR");}}else if(data instanceof FakeBlob){if(data.encoding==="base64"&&atob){bb.push(atob(data.data));}else if(data.encoding==="URI"){bb.push(decodeURIComponent(data.data));}else if(data.encoding==="raw"){bb.push(data.data);}}else{if(typeof data!=="string"){data+="";}
bb.push(unescape(encodeURIComponent(data)));}};FBB_proto.getBlob=function(type){if(!arguments.length){type=null;}
return new FakeBlob(this.data.join(""),type,"raw");};FBB_proto.toString=function(){return"[object BlobBuilder]";};FB_proto.slice=function(start,end,type){var args=arguments.length;if(args<3){type=null;}
return new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding);};FB_proto.toString=function(){return"[object Blob]";};FB_proto.close=function(){this.size=0;delete this.data;};return FakeBlobBuilder;}(view));view.Blob=function(blobParts,options){var type=options?(options.type||""):"";var builder=new BlobBuilder();if(blobParts){for(var i=0,len=blobParts.length;i<len;i++){if(Uint8Array&&blobParts[i]instanceof Uint8Array){builder.append(blobParts[i].buffer);}
else{builder.append(blobParts[i]);}}}
var blob=builder.getBlob(type);if(!blob.slice&&blob.webkitSlice){blob.slice=blob.webkitSlice;}
return blob;};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__;};view.Blob.prototype=getPrototypeOf(new view.Blob());}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content||this));(function(root,factory){'use strict';if(typeof module==='object'){module.exports=factory;}else if(typeof define==='function'&&define.amd){define(function(){return factory;});}else{root.MediumEditor=factory;}}(this,function(){'use strict';function MediumEditor(elements,options){'use strict';return this.init(elements,options);}
MediumEditor.extensions={};(function(window){'use strict';function copyInto(overwrite,dest){var prop,sources=Array.prototype.slice.call(arguments,2);dest=dest||{};for(var i=0;i<sources.length;i++){var source=sources[i];if(source){for(prop in source){if(source.hasOwnProperty(prop)&&typeof source[prop]!=='undefined'&&(overwrite||dest.hasOwnProperty(prop)===false)){dest[prop]=source[prop];}}}}
return dest;}
var nodeContainsWorksWithTextNodes=false;try{var testParent=document.createElement('div'),testText=document.createTextNode(' ');testParent.appendChild(testText);nodeContainsWorksWithTextNodes=testParent.contains(testText);}catch(exc){}
var Util={isIE:((navigator.appName==='Microsoft Internet Explorer')||((navigator.appName==='Netscape')&&(new RegExp('Trident/.*rv:([0-9]{1,}[.0-9]{0,})').exec(navigator.userAgent)!==null))),isMac:(window.navigator.platform.toUpperCase().indexOf('MAC')>=0),keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77},isMetaCtrlKey:function(event){if((Util.isMac&&event.metaKey)||(!Util.isMac&&event.ctrlKey)){return true;}
return false;},isKey:function(event,keys){var keyCode=Util.getKeyCode(event);if(false===Array.isArray(keys)){return keyCode===keys;}
if(-1===keys.indexOf(keyCode)){return false;}
return true;},getKeyCode:function(event){var keyCode=event.which;if(null===keyCode){keyCode=event.charCode!==null?event.charCode:event.keyCode;}
return keyCode;},blockContainerElementNames:['p','h1','h2','h3','h4','h5','h6','blockquote','pre','ul','li','ol','address','article','aside','audio','canvas','dd','dl','dt','fieldset','figcaption','figure','footer','form','header','hgroup','main','nav','noscript','output','section','video','table','thead','tbody','tfoot','tr','th','td'],emptyElementNames:['br','col','colgroup','hr','img','input','source','wbr'],extend:function extend(){var args=[true].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args);},defaults:function defaults(){var args=[false].concat(Array.prototype.slice.call(arguments));return copyInto.apply(this,args);},createLink:function(document,textNodes,href,target){var anchor=document.createElement('a');Util.moveTextRangeIntoElement(textNodes[0],textNodes[textNodes.length-1],anchor);anchor.setAttribute('href',href);if(target){anchor.setAttribute('target',target);}
return anchor;},findOrCreateMatchingTextNodes:function(document,element,match){var treeWalker=document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,false),matchedNodes=[],currentTextIndex=0,startReached=false,currentNode=null,newNode=null;while((currentNode=treeWalker.nextNode())!==null){if(!startReached&&match.start<(currentTextIndex+currentNode.nodeValue.length)){startReached=true;newNode=Util.splitStartNodeIfNeeded(currentNode,match.start,currentTextIndex);}
if(startReached){Util.splitEndNodeIfNeeded(currentNode,newNode,match.end,currentTextIndex);}
if(startReached&&currentTextIndex===match.end){break;}else if(startReached&&currentTextIndex>(match.end+1)){throw new Error('PerformLinking overshot the target!');}
if(startReached){matchedNodes.push(newNode||currentNode);}
currentTextIndex+=currentNode.nodeValue.length;if(newNode!==null){currentTextIndex+=newNode.nodeValue.length;treeWalker.nextNode();}
newNode=null;}
return matchedNodes;},splitStartNodeIfNeeded:function(currentNode,matchStartIndex,currentTextIndex){if(matchStartIndex!==currentTextIndex){return currentNode.splitText(matchStartIndex-currentTextIndex);}
return null;},splitEndNodeIfNeeded:function(currentNode,newNode,matchEndIndex,currentTextIndex){var textIndexOfEndOfFarthestNode,endSplitPoint;textIndexOfEndOfFarthestNode=currentTextIndex+(newNode||currentNode).nodeValue.length+
(newNode?currentNode.nodeValue.length:0)-
1;endSplitPoint=(newNode||currentNode).nodeValue.length-
(textIndexOfEndOfFarthestNode+1-matchEndIndex);if(textIndexOfEndOfFarthestNode>=matchEndIndex&&currentTextIndex!==textIndexOfEndOfFarthestNode&&endSplitPoint!==0){(newNode||currentNode).splitText(endSplitPoint);}},splitByBlockElements:function(element){var toRet=[],blockElementQuery=MediumEditor.util.blockContainerElementNames.join(',');if(element.nodeType===3||element.querySelectorAll(blockElementQuery).length===0){return[element];}
for(var i=0;i<element.childNodes.length;i++){var child=element.childNodes[i];if(child.nodeType===3){toRet.push(child);}else{var blockElements=child.querySelectorAll(blockElementQuery);if(blockElements.length===0){toRet.push(child);}else{toRet=toRet.concat(MediumEditor.util.splitByBlockElements(child));}}}
return toRet;},findAdjacentTextNodeWithContent:function findAdjacentTextNodeWithContent(rootNode,targetNode,ownerDocument){var pastTarget=false,nextNode,nodeIterator=ownerDocument.createNodeIterator(rootNode,NodeFilter.SHOW_TEXT,null,false);nextNode=nodeIterator.nextNode();while(nextNode){if(nextNode===targetNode){pastTarget=true;}else if(pastTarget){if(nextNode.nodeType===3&&nextNode.nodeValue&&nextNode.nodeValue.trim().length>0){break;}}
nextNode=nodeIterator.nextNode();}
return nextNode;},isDescendant:function isDescendant(parent,child,checkEquality){if(!parent||!child){return false;}
if(parent===child){return!!checkEquality;}
if(parent.nodeType!==1){return false;}
if(nodeContainsWorksWithTextNodes||child.nodeType!==3){return parent.contains(child);}
var node=child.parentNode;while(node!==null){if(node===parent){return true;}
node=node.parentNode;}
return false;},isElement:function isElement(obj){return!!(obj&&obj.nodeType===1);},throttle:function(func,wait){var THROTTLE_INTERVAL=50,context,args,result,timeout=null,previous=0,later=function(){previous=Date.now();timeout=null;result=func.apply(context,args);if(!timeout){context=args=null;}};if(!wait&&wait!==0){wait=THROTTLE_INTERVAL;}
return function(){var now=Date.now(),remaining=wait-(now-previous);context=this;args=arguments;if(remaining<=0||remaining>wait){if(timeout){clearTimeout(timeout);timeout=null;}
previous=now;result=func.apply(context,args);if(!timeout){context=args=null;}}else if(!timeout){timeout=setTimeout(later,remaining);}
return result;};},traverseUp:function(current,testElementFunction){if(!current){return false;}
do{if(current.nodeType===1){if(testElementFunction(current)){return current;}
if(Util.isMediumEditorElement(current)){return false;}}
current=current.parentNode;}while(current);return false;},htmlEntities:function(str){return String(str).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');},insertHTMLCommand:function(doc,html){var selection,range,el,fragment,node,lastNode,toReplace;if(doc.queryCommandSupported('insertHTML')){try{return doc.execCommand('insertHTML',false,html);}catch(ignore){}}
selection=doc.getSelection();if(selection.rangeCount){range=selection.getRangeAt(0);toReplace=range.commonAncestorContainer;if(Util.isMediumEditorElement(toReplace)&&!toReplace.firstChild){range.selectNode(toReplace.appendChild(doc.createTextNode('')));}else if((toReplace.nodeType===3&&range.startOffset===0&&range.endOffset===toReplace.nodeValue.length)||(toReplace.nodeType!==3&&toReplace.innerHTML===range.toString())){while(!Util.isMediumEditorElement(toReplace)&&toReplace.parentNode&&toReplace.parentNode.childNodes.length===1&&!Util.isMediumEditorElement(toReplace.parentNode)){toReplace=toReplace.parentNode;}
range.selectNode(toReplace);}
range.deleteContents();el=doc.createElement('div');el.innerHTML=html;fragment=doc.createDocumentFragment();while(el.firstChild){node=el.firstChild;lastNode=fragment.appendChild(node);}
range.insertNode(fragment);if(lastNode){range=range.cloneRange();range.setStartAfter(lastNode);range.collapse(true);selection.removeAllRanges();selection.addRange(range);}}},execFormatBlock:function(doc,tagName){var blockContainer=Util.getTopBlockContainer(MediumEditor.selection.getSelectionStart(doc));if(tagName==='blockquote'){if(blockContainer){var childNodes=Array.prototype.slice.call(blockContainer.childNodes);if(childNodes.some(function(childNode){return Util.isBlockContainer(childNode);})){return doc.execCommand('outdent',false,null);}}
if(Util.isIE){return doc.execCommand('indent',false,tagName);}}
if(blockContainer&&tagName===blockContainer.nodeName.toLowerCase()){tagName='p';}
if(Util.isIE){tagName='<'+tagName+'>';}
return doc.execCommand('formatBlock',false,tagName);},setTargetBlank:function(el,anchorUrl){var i,url=anchorUrl||false;if(el.nodeName.toLowerCase()==='a'){el.target='_blank';}else{el=el.getElementsByTagName('a');for(i=0;i<el.length;i+=1){if(false===url||url===el[i].attributes.href.value){el[i].target='_blank';}}}},addClassToAnchors:function(el,buttonClass){var classes=buttonClass.split(' '),i,j;if(el.nodeName.toLowerCase()==='a'){for(j=0;j<classes.length;j+=1){el.classList.add(classes[j]);}}else{el=el.getElementsByTagName('a');for(i=0;i<el.length;i+=1){for(j=0;j<classes.length;j+=1){el[i].classList.add(classes[j]);}}}},isListItem:function(node){if(!node){return false;}
if(node.nodeName.toLowerCase()==='li'){return true;}
var parentNode=node.parentNode,tagName=parentNode.nodeName.toLowerCase();while(tagName==='li'||(!Util.isBlockContainer(parentNode)&&tagName!=='div')){if(tagName==='li'){return true;}
parentNode=parentNode.parentNode;if(parentNode){tagName=parentNode.nodeName.toLowerCase();}else{return false;}}
return false;},cleanListDOM:function(ownerDocument,element){if(element.nodeName.toLowerCase()!=='li'){return;}
var list=element.parentElement;if(list.parentElement.nodeName.toLowerCase()==='p'){Util.unwrap(list.parentElement,ownerDocument);MediumEditor.selection.moveCursor(ownerDocument,element.firstChild,element.firstChild.textContent.length);}},splitOffDOMTree:function(rootNode,leafNode,splitLeft){var splitOnNode=leafNode,createdNode=null,splitRight=!splitLeft;while(splitOnNode!==rootNode){var currParent=splitOnNode.parentNode,newParent=currParent.cloneNode(false),targetNode=(splitRight?splitOnNode:currParent.firstChild),appendLast;if(createdNode){if(splitRight){newParent.appendChild(createdNode);}else{appendLast=createdNode;}}
createdNode=newParent;while(targetNode){var sibling=targetNode.nextSibling;if(targetNode===splitOnNode){if(!targetNode.hasChildNodes()){targetNode.parentNode.removeChild(targetNode);}else{targetNode=targetNode.cloneNode(false);}
if(targetNode.textContent){createdNode.appendChild(targetNode);}
targetNode=(splitRight?sibling:null);}else{targetNode.parentNode.removeChild(targetNode);if(targetNode.hasChildNodes()||targetNode.textContent){createdNode.appendChild(targetNode);}
targetNode=sibling;}}
if(appendLast){createdNode.appendChild(appendLast);}
splitOnNode=currParent;}
return createdNode;},moveTextRangeIntoElement:function(startNode,endNode,newElement){if(!startNode||!endNode){return false;}
var rootNode=Util.findCommonRoot(startNode,endNode);if(!rootNode){return false;}
if(endNode===startNode){var temp=startNode.parentNode,sibling=startNode.nextSibling;temp.removeChild(startNode);newElement.appendChild(startNode);if(sibling){temp.insertBefore(newElement,sibling);}else{temp.appendChild(newElement);}
return newElement.hasChildNodes();}
var rootChildren=[],firstChild,lastChild,nextNode;for(var i=0;i<rootNode.childNodes.length;i++){nextNode=rootNode.childNodes[i];if(!firstChild){if(Util.isDescendant(nextNode,startNode,true)){firstChild=nextNode;}}else{if(Util.isDescendant(nextNode,endNode,true)){lastChild=nextNode;break;}else{rootChildren.push(nextNode);}}}
var afterLast=lastChild.nextSibling,fragment=rootNode.ownerDocument.createDocumentFragment();if(firstChild===startNode){firstChild.parentNode.removeChild(firstChild);fragment.appendChild(firstChild);}else{fragment.appendChild(Util.splitOffDOMTree(firstChild,startNode));}
rootChildren.forEach(function(element){element.parentNode.removeChild(element);fragment.appendChild(element);});if(lastChild===endNode){lastChild.parentNode.removeChild(lastChild);fragment.appendChild(lastChild);}else{fragment.appendChild(Util.splitOffDOMTree(lastChild,endNode,true));}
newElement.appendChild(fragment);if(lastChild.parentNode===rootNode){rootNode.insertBefore(newElement,lastChild);}else if(afterLast){rootNode.insertBefore(newElement,afterLast);}else{rootNode.appendChild(newElement);}
return newElement.hasChildNodes();},depthOfNode:function(inNode){var theDepth=0,node=inNode;while(node.parentNode!==null){node=node.parentNode;theDepth++;}
return theDepth;},findCommonRoot:function(inNode1,inNode2){var depth1=Util.depthOfNode(inNode1),depth2=Util.depthOfNode(inNode2),node1=inNode1,node2=inNode2;while(depth1!==depth2){if(depth1>depth2){node1=node1.parentNode;depth1-=1;}else{node2=node2.parentNode;depth2-=1;}}
while(node1!==node2){node1=node1.parentNode;node2=node2.parentNode;}
return node1;},isElementAtBeginningOfBlock:function(node){var textVal,sibling;while(!Util.isBlockContainer(node)&&!Util.isMediumEditorElement(node)){sibling=node;while(sibling=sibling.previousSibling){textVal=sibling.nodeType===3?sibling.nodeValue:sibling.textContent;if(textVal.length>0){return false;}}
node=node.parentNode;}
return true;},isMediumEditorElement:function(element){return element&&element.getAttribute&&!!element.getAttribute('data-medium-editor-element');},getContainerEditorElement:function(element){return Util.traverseUp(element,function(node){return Util.isMediumEditorElement(node);});},isBlockContainer:function(element){return element&&element.nodeType!==3&&Util.blockContainerElementNames.indexOf(element.nodeName.toLowerCase())!==-1;},getClosestBlockContainer:function(node){return Util.traverseUp(node,function(node){return Util.isBlockContainer(node);});},getTopBlockContainer:function(element){var topBlock=element;Util.traverseUp(element,function(el){if(Util.isBlockContainer(el)){topBlock=el;}
return false;});return topBlock;},getFirstSelectableLeafNode:function(element){while(element&&element.firstChild){element=element.firstChild;}
element=Util.traverseUp(element,function(el){return Util.emptyElementNames.indexOf(el.nodeName.toLowerCase())===-1;});if(element.nodeName.toLowerCase()==='table'){var firstCell=element.querySelector('th, td');if(firstCell){element=firstCell;}}
return element;},getFirstTextNode:function(element){if(element.nodeType===3){return element;}
for(var i=0;i<element.childNodes.length;i++){var textNode=Util.getFirstTextNode(element.childNodes[i]);if(textNode!==null){return textNode;}}
return null;},ensureUrlHasProtocol:function(url){if(url.indexOf('://')===-1){return'http://'+url;}
return url;},warn:function(){if(window.console!==undefined&&typeof window.console.warn==='function'){window.console.warn.apply(window.console,arguments);}},deprecated:function(oldName,newName,version){var m=oldName+' is deprecated, please use '+newName+' instead.';if(version){m+=' Will be removed in '+version;}
Util.warn(m);},deprecatedMethod:function(oldName,newName,args,version){Util.deprecated(oldName,newName,version);if(typeof this[newName]==='function'){this[newName].apply(this,args);}},cleanupAttrs:function(el,attrs){attrs.forEach(function(attr){el.removeAttribute(attr);});},cleanupTags:function(el,tags){tags.forEach(function(tag){if(el.nodeName.toLowerCase()===tag){el.parentNode.removeChild(el);}});},getClosestTag:function(el,tag){return Util.traverseUp(el,function(element){return element.nodeName.toLowerCase()===tag.toLowerCase();});},unwrap:function(el,doc){var fragment=doc.createDocumentFragment(),nodes=Array.prototype.slice.call(el.childNodes);for(var i=0;i<nodes.length;i++){fragment.appendChild(nodes[i]);}
if(fragment.childNodes.length){el.parentNode.replaceChild(fragment,el);}else{el.parentNode.removeChild(el);}}};MediumEditor.util=Util;}(window));(function(){'use strict';var Extension=function(options){MediumEditor.util.extend(this,options);};Extension.extend=function(protoProps){var parent=this,child;if(protoProps&&protoProps.hasOwnProperty('constructor')){child=protoProps.constructor;}else{child=function(){return parent.apply(this,arguments);};}
MediumEditor.util.extend(child,parent);var Surrogate=function(){this.constructor=child;};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate();if(protoProps){MediumEditor.util.extend(child.prototype,protoProps);}
return child;};Extension.prototype={init:function(){},base:undefined,name:undefined,checkState:undefined,destroy:undefined,queryCommandState:undefined,isActive:undefined,isAlreadyApplied:undefined,setActive:undefined,setInactive:undefined,'window':undefined,'document':undefined,getEditorElements:function(){return this.base.elements;},getEditorId:function(){return this.base.id;},getEditorOption:function(option){return this.base.options[option];}};['execAction','on','off','subscribe','trigger'].forEach(function(helper){Extension.prototype[helper]=function(){return this.base[helper].apply(this.base,arguments);};});MediumEditor.Extension=Extension;})();(function(){'use strict';function filterOnlyParentElements(node){if(MediumEditor.util.isBlockContainer(node)){return NodeFilter.FILTER_ACCEPT;}else{return NodeFilter.FILTER_SKIP;}}
var Selection={findMatchingSelectionParent:function(testElementFunction,contentWindow){var selection=contentWindow.getSelection(),range,current;if(selection.rangeCount===0){return false;}
range=selection.getRangeAt(0);current=range.commonAncestorContainer;return MediumEditor.util.traverseUp(current,testElementFunction);},getSelectionElement:function(contentWindow){return this.findMatchingSelectionParent(function(el){return MediumEditor.util.isMediumEditorElement(el);},contentWindow);},exportSelection:function(root,doc){if(!root){return null;}
var selectionState=null,selection=doc.getSelection();if(selection.rangeCount>0){var range=selection.getRangeAt(0),preSelectionRange=range.cloneRange(),start;preSelectionRange.selectNodeContents(root);preSelectionRange.setEnd(range.startContainer,range.startOffset);start=preSelectionRange.toString().length;selectionState={start:start,end:start+range.toString().length};if(start!==0){var emptyBlocksIndex=this.getIndexRelativeToAdjacentEmptyBlocks(doc,root,range.startContainer,range.startOffset);if(emptyBlocksIndex!==-1){selectionState.emptyBlocksIndex=emptyBlocksIndex;}}}
return selectionState;},importSelection:function(selectionState,root,doc,favorLaterSelectionAnchor){if(!selectionState||!root){return;}
var range=doc.createRange();range.setStart(root,0);range.collapse(true);var node=root,nodeStack=[],charIndex=0,foundStart=false,stop=false,nextCharIndex;while(!stop&&node){if(node.nodeType===3){nextCharIndex=charIndex+node.length;if(!foundStart&&selectionState.start>=charIndex&&selectionState.start<=nextCharIndex){range.setStart(node,selectionState.start-charIndex);foundStart=true;}
if(foundStart&&selectionState.end>=charIndex&&selectionState.end<=nextCharIndex){range.setEnd(node,selectionState.end-charIndex);stop=true;}
charIndex=nextCharIndex;}else{var i=node.childNodes.length-1;while(i>=0){nodeStack.push(node.childNodes[i]);i-=1;}}
if(!stop){node=nodeStack.pop();}}
if(typeof selectionState.emptyBlocksIndex!=='undefined'){range=this.importSelectionMoveCursorPastBlocks(doc,root,selectionState.emptyBlocksIndex,range);}
if(favorLaterSelectionAnchor){range=this.importSelectionMoveCursorPastAnchor(selectionState,range);}
var sel=doc.getSelection();sel.removeAllRanges();sel.addRange(range);},importSelectionMoveCursorPastAnchor:function(selectionState,range){var nodeInsideAnchorTagFunction=function(node){return node.nodeName.toLowerCase()==='a';};if(selectionState.start===selectionState.end&&range.startContainer.nodeType===3&&range.startOffset===range.startContainer.nodeValue.length&&MediumEditor.util.traverseUp(range.startContainer,nodeInsideAnchorTagFunction)){var prevNode=range.startContainer,currentNode=range.startContainer.parentNode;while(currentNode!==null&&currentNode.nodeName.toLowerCase()!=='a'){if(currentNode.childNodes[currentNode.childNodes.length-1]!==prevNode){currentNode=null;}else{prevNode=currentNode;currentNode=currentNode.parentNode;}}
if(currentNode!==null&&currentNode.nodeName.toLowerCase()==='a'){var currentNodeIndex=null;for(var i=0;currentNodeIndex===null&&i<currentNode.parentNode.childNodes.length;i++){if(currentNode.parentNode.childNodes[i]===currentNode){currentNodeIndex=i;}}
range.setStart(currentNode.parentNode,currentNodeIndex+1);range.collapse(true);}}
return range;},importSelectionMoveCursorPastBlocks:function(doc,root,index,range){var treeWalker=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,false),startContainer=range.startContainer,startBlock,targetNode,currIndex=0;index=index||1;if(startContainer.nodeType===3&&MediumEditor.util.isBlockContainer(startContainer.previousSibling)){startBlock=startContainer.previousSibling;}else{startBlock=MediumEditor.util.getClosestBlockContainer(startContainer);}
while(treeWalker.nextNode()){if(!targetNode){if(startBlock===treeWalker.currentNode){targetNode=treeWalker.currentNode;}}else{targetNode=treeWalker.currentNode;currIndex++;if(currIndex===index){break;}
if(targetNode.textContent.length>0){break;}}}
range.setStart(MediumEditor.util.getFirstSelectableLeafNode(targetNode),0);return range;},getIndexRelativeToAdjacentEmptyBlocks:function(doc,root,cursorContainer,cursorOffset){if(cursorContainer.textContent.length>0&&cursorOffset>0){return-1;}
var node=cursorContainer;if(node.nodeType!==3){node=cursorContainer.childNodes[cursorOffset];}
if(node&&!MediumEditor.util.isElementAtBeginningOfBlock(node)){return-1;}
var closestBlock=MediumEditor.util.getClosestBlockContainer(cursorContainer),treeWalker=doc.createTreeWalker(root,NodeFilter.SHOW_ELEMENT,filterOnlyParentElements,false),emptyBlocksCount=0;while(treeWalker.nextNode()){var blockIsEmpty=treeWalker.currentNode.textContent==='';if(blockIsEmpty||emptyBlocksCount>0){emptyBlocksCount+=1;}
if(treeWalker.currentNode===closestBlock){return emptyBlocksCount;}
if(!blockIsEmpty){emptyBlocksCount=0;}}
return emptyBlocksCount;},selectionInContentEditableFalse:function(contentWindow){var sawtrue,sawfalse=this.findMatchingSelectionParent(function(el){var ce=el&&el.getAttribute('contenteditable');if(ce==='true'){sawtrue=true;}
return el.nodeName!=='#text'&&ce==='false';},contentWindow);return!sawtrue&&sawfalse;},getSelectionHtml:function getSelectionHtml(doc){var i,html='',sel=doc.getSelection(),len,container;if(sel.rangeCount){container=doc.createElement('div');for(i=0,len=sel.rangeCount;i<len;i+=1){container.appendChild(sel.getRangeAt(i).cloneContents());}
html=container.innerHTML;}
return html;},getCaretOffsets:function getCaretOffsets(element,range){var preCaretRange,postCaretRange;if(!range){range=window.getSelection().getRangeAt(0);}
preCaretRange=range.cloneRange();postCaretRange=range.cloneRange();preCaretRange.selectNodeContents(element);preCaretRange.setEnd(range.endContainer,range.endOffset);postCaretRange.selectNodeContents(element);postCaretRange.setStart(range.endContainer,range.endOffset);return{left:preCaretRange.toString().length,right:postCaretRange.toString().length};},rangeSelectsSingleNode:function(range){var startNode=range.startContainer;return startNode===range.endContainer&&startNode.hasChildNodes()&&range.endOffset===range.startOffset+1;},getSelectedParentElement:function(range){if(!range){return null;}
if(this.rangeSelectsSingleNode(range)&&range.startContainer.childNodes[range.startOffset].nodeType!==3){return range.startContainer.childNodes[range.startOffset];}
if(range.startContainer.nodeType===3){return range.startContainer.parentNode;}
return range.startContainer;},getSelectedElements:function(doc){var selection=doc.getSelection(),range,toRet,currNode;if(!selection.rangeCount||selection.isCollapsed||!selection.getRangeAt(0).commonAncestorContainer){return[];}
range=selection.getRangeAt(0);if(range.commonAncestorContainer.nodeType===3){toRet=[];currNode=range.commonAncestorContainer;while(currNode.parentNode&&currNode.parentNode.childNodes.length===1){toRet.push(currNode.parentNode);currNode=currNode.parentNode;}
return toRet;}
return[].filter.call(range.commonAncestorContainer.getElementsByTagName('*'),function(el){return(typeof selection.containsNode==='function')?selection.containsNode(el,true):true;});},selectNode:function(node,doc){var range=doc.createRange(),sel=doc.getSelection();range.selectNodeContents(node);sel.removeAllRanges();sel.addRange(range);},select:function(doc,startNode,startOffset,endNode,endOffset){doc.getSelection().removeAllRanges();var range=doc.createRange();range.setStart(startNode,startOffset);if(endNode){range.setEnd(endNode,endOffset);}else{range.collapse(true);}
doc.getSelection().addRange(range);return range;},moveCursor:function(doc,node,offset){this.select(doc,node,offset);},getSelectionRange:function(ownerDocument){var selection=ownerDocument.getSelection();if(selection.rangeCount===0){return null;}
return selection.getRangeAt(0);},getSelectionStart:function(ownerDocument){var node=ownerDocument.getSelection().anchorNode,startNode=(node&&node.nodeType===3?node.parentNode:node);return startNode;}};MediumEditor.selection=Selection;}());(function(){'use strict';var Events=function(instance){this.base=instance;this.options=this.base.options;this.events=[];this.disabledEvents={};this.customEvents={};this.listeners={};};Events.prototype={InputEventOnContenteditableSupported:!MediumEditor.util.isIE,attachDOMEvent:function(target,event,listener,useCapture){target.addEventListener(event,listener,useCapture);this.events.push([target,event,listener,useCapture]);},detachDOMEvent:function(target,event,listener,useCapture){var index=this.indexOfListener(target,event,listener,useCapture),e;if(index!==-1){e=this.events.splice(index,1)[0];e[0].removeEventListener(e[1],e[2],e[3]);}},indexOfListener:function(target,event,listener,useCapture){var i,n,item;for(i=0,n=this.events.length;i<n;i=i+1){item=this.events[i];if(item[0]===target&&item[1]===event&&item[2]===listener&&item[3]===useCapture){return i;}}
return-1;},detachAllDOMEvents:function(){var e=this.events.pop();while(e){e[0].removeEventListener(e[1],e[2],e[3]);e=this.events.pop();}},enableCustomEvent:function(event){if(this.disabledEvents[event]!==undefined){delete this.disabledEvents[event];}},disableCustomEvent:function(event){this.disabledEvents[event]=true;},attachCustomEvent:function(event,listener){this.setupListener(event);if(!this.customEvents[event]){this.customEvents[event]=[];}
this.customEvents[event].push(listener);},detachCustomEvent:function(event,listener){var index=this.indexOfCustomListener(event,listener);if(index!==-1){this.customEvents[event].splice(index,1);}},indexOfCustomListener:function(event,listener){if(!this.customEvents[event]||!this.customEvents[event].length){return-1;}
return this.customEvents[event].indexOf(listener);},detachAllCustomEvents:function(){this.customEvents={};},triggerCustomEvent:function(name,data,editable){if(this.customEvents[name]&&!this.disabledEvents[name]){this.customEvents[name].forEach(function(listener){listener(data,editable);});}},destroy:function(){this.detachAllDOMEvents();this.detachAllCustomEvents();this.detachExecCommand();if(this.base.elements){this.base.elements.forEach(function(element){element.removeAttribute('data-medium-focused');});}},attachToExecCommand:function(){if(this.execCommandListener){return;}
this.execCommandListener=function(execInfo){this.handleDocumentExecCommand(execInfo);}.bind(this);this.wrapExecCommand();this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener);},detachExecCommand:function(){var doc=this.options.ownerDocument;if(!this.execCommandListener||!doc.execCommand.listeners){return;}
var index=doc.execCommand.listeners.indexOf(this.execCommandListener);if(index!==-1){doc.execCommand.listeners.splice(index,1);}
if(!doc.execCommand.listeners.length){this.unwrapExecCommand();}},wrapExecCommand:function(){var doc=this.options.ownerDocument;if(doc.execCommand.listeners){return;}
var wrapper=function(aCommandName,aShowDefaultUI,aValueArgument){var result=doc.execCommand.orig.apply(this,arguments);if(!doc.execCommand.listeners){return result;}
var args=Array.prototype.slice.call(arguments);doc.execCommand.listeners.forEach(function(listener){listener({command:aCommandName,value:aValueArgument,args:args,result:result});});return result;};wrapper.orig=doc.execCommand;wrapper.listeners=[];doc.execCommand=wrapper;},unwrapExecCommand:function(){var doc=this.options.ownerDocument;if(!doc.execCommand.orig){return;}
doc.execCommand=doc.execCommand.orig;},setupListener:function(name){if(this.listeners[name]){return;}
switch(name){case'externalInteraction':this.attachDOMEvent(this.options.ownerDocument.body,'mousedown',this.handleBodyMousedown.bind(this),true);this.attachDOMEvent(this.options.ownerDocument.body,'click',this.handleBodyClick.bind(this),true);this.attachDOMEvent(this.options.ownerDocument.body,'focus',this.handleBodyFocus.bind(this),true);break;case'blur':this.setupListener('externalInteraction');break;case'focus':this.setupListener('externalInteraction');break;case'editableInput':this.contentCache=[];this.base.elements.forEach(function(element){this.contentCache[element.getAttribute('medium-editor-index')]=element.innerHTML;if(this.InputEventOnContenteditableSupported){this.attachDOMEvent(element,'input',this.handleInput.bind(this));}}.bind(this));if(!this.InputEventOnContenteditableSupported){this.setupListener('editableKeypress');this.keypressUpdateInput=true;this.attachDOMEvent(document,'selectionchange',this.handleDocumentSelectionChange.bind(this));this.attachToExecCommand();}
break;case'editableClick':this.attachToEachElement('click',this.handleClick);break;case'editableBlur':this.attachToEachElement('blur',this.handleBlur);break;case'editableKeypress':this.attachToEachElement('keypress',this.handleKeypress);break;case'editableKeyup':this.attachToEachElement('keyup',this.handleKeyup);break;case'editableKeydown':this.attachToEachElement('keydown',this.handleKeydown);break;case'editableKeydownSpace':this.setupListener('editableKeydown');break;case'editableKeydownEnter':this.setupListener('editableKeydown');break;case'editableKeydownTab':this.setupListener('editableKeydown');break;case'editableKeydownDelete':this.setupListener('editableKeydown');break;case'editableMouseover':this.attachToEachElement('mouseover',this.handleMouseover);break;case'editableDrag':this.attachToEachElement('dragover',this.handleDragging);this.attachToEachElement('dragleave',this.handleDragging);break;case'editableDrop':this.attachToEachElement('drop',this.handleDrop);break;case'editablePaste':this.attachToEachElement('paste',this.handlePaste);break;}
this.listeners[name]=true;},attachToEachElement:function(name,handler){this.base.elements.forEach(function(element){this.attachDOMEvent(element,name,handler.bind(this));},this);},focusElement:function(element){element.focus();this.updateFocus(element,{target:element,type:'focus'});},updateFocus:function(target,eventObj){var toolbar=this.base.getExtensionByName('toolbar'),toolbarEl=toolbar?toolbar.getToolbarElement():null,anchorPreview=this.base.getExtensionByName('anchor-preview'),previewEl=(anchorPreview&&anchorPreview.getPreviewElement)?anchorPreview.getPreviewElement():null,hadFocus=this.base.getFocusedElement(),toFocus;if(hadFocus&&eventObj.type==='click'&&this.lastMousedownTarget&&(MediumEditor.util.isDescendant(hadFocus,this.lastMousedownTarget,true)||MediumEditor.util.isDescendant(toolbarEl,this.lastMousedownTarget,true)||MediumEditor.util.isDescendant(previewEl,this.lastMousedownTarget,true))){toFocus=hadFocus;}
if(!toFocus){this.base.elements.some(function(element){if(!toFocus&&(MediumEditor.util.isDescendant(element,target,true))){toFocus=element;}
return!!toFocus;},this);}
var externalEvent=!MediumEditor.util.isDescendant(hadFocus,target,true)&&!MediumEditor.util.isDescendant(toolbarEl,target,true)&&!MediumEditor.util.isDescendant(previewEl,target,true);if(toFocus!==hadFocus){if(hadFocus&&externalEvent){hadFocus.removeAttribute('data-medium-focused');this.triggerCustomEvent('blur',eventObj,hadFocus);}
if(toFocus){toFocus.setAttribute('data-medium-focused',true);this.triggerCustomEvent('focus',eventObj,toFocus);}}
if(externalEvent){this.triggerCustomEvent('externalInteraction',eventObj);}},updateInput:function(target,eventObj){if(!this.contentCache){return;}
var index=target.getAttribute('medium-editor-index');if(target.innerHTML!==this.contentCache[index]){this.triggerCustomEvent('editableInput',eventObj,target);}
this.contentCache[index]=target.innerHTML;},handleDocumentSelectionChange:function(event){if(event.currentTarget&&event.currentTarget.activeElement){var activeElement=event.currentTarget.activeElement,currentTarget;this.base.elements.some(function(element){if(MediumEditor.util.isDescendant(element,activeElement,true)){currentTarget=element;return true;}
return false;},this);if(currentTarget){this.updateInput(currentTarget,{target:activeElement,currentTarget:currentTarget});}}},handleDocumentExecCommand:function(){var target=this.base.getFocusedElement();if(target){this.updateInput(target,{target:target,currentTarget:target});}},handleBodyClick:function(event){this.updateFocus(event.target,event);},handleBodyFocus:function(event){this.updateFocus(event.target,event);},handleBodyMousedown:function(event){this.lastMousedownTarget=event.target;},handleInput:function(event){this.updateInput(event.currentTarget,event);},handleClick:function(event){this.triggerCustomEvent('editableClick',event,event.currentTarget);},handleBlur:function(event){this.triggerCustomEvent('editableBlur',event,event.currentTarget);},handleKeypress:function(event){this.triggerCustomEvent('editableKeypress',event,event.currentTarget);if(this.keypressUpdateInput){var eventObj={target:event.target,currentTarget:event.currentTarget};setTimeout(function(){this.updateInput(eventObj.currentTarget,eventObj);}.bind(this),0);}},handleKeyup:function(event){this.triggerCustomEvent('editableKeyup',event,event.currentTarget);},handleMouseover:function(event){this.triggerCustomEvent('editableMouseover',event,event.currentTarget);},handleDragging:function(event){this.triggerCustomEvent('editableDrag',event,event.currentTarget);},handleDrop:function(event){this.triggerCustomEvent('editableDrop',event,event.currentTarget);},handlePaste:function(event){this.triggerCustomEvent('editablePaste',event,event.currentTarget);},handleKeydown:function(event){this.triggerCustomEvent('editableKeydown',event,event.currentTarget);if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.SPACE)){return this.triggerCustomEvent('editableKeydownSpace',event,event.currentTarget);}
if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)||(event.ctrlKey&&MediumEditor.util.isKey(event,MediumEditor.util.keyCode.M))){return this.triggerCustomEvent('editableKeydownEnter',event,event.currentTarget);}
if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.TAB)){return this.triggerCustomEvent('editableKeydownTab',event,event.currentTarget);}
if(MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.DELETE,MediumEditor.util.keyCode.BACKSPACE])){return this.triggerCustomEvent('editableKeydownDelete',event,event.currentTarget);}}};MediumEditor.Events=Events;}());(function(){'use strict';var Button=MediumEditor.Extension.extend({action:undefined,aria:undefined,tagNames:undefined,style:undefined,useQueryState:undefined,contentDefault:undefined,contentFA:undefined,classList:undefined,attrs:undefined,constructor:function(options){if(Button.isBuiltInButton(options)){MediumEditor.Extension.call(this,this.defaults[options]);}else{MediumEditor.Extension.call(this,options);}},init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.button=this.createButton();this.on(this.button,'click',this.handleClick.bind(this));},getButton:function(){return this.button;},getAction:function(){return(typeof this.action==='function')?this.action(this.base.options):this.action;},getAria:function(){return(typeof this.aria==='function')?this.aria(this.base.options):this.aria;},getTagNames:function(){return(typeof this.tagNames==='function')?this.tagNames(this.base.options):this.tagNames;},createButton:function(){var button=this.document.createElement('button'),content=this.contentDefault,ariaLabel=this.getAria(),buttonLabels=this.getEditorOption('buttonLabels');button.classList.add('medium-editor-action');button.classList.add('medium-editor-action-'+this.name);if(this.classList){this.classList.forEach(function(className){button.classList.add(className);});}
button.setAttribute('data-action',this.getAction());if(ariaLabel){button.setAttribute('title',ariaLabel);button.setAttribute('aria-label',ariaLabel);}
if(this.attrs){Object.keys(this.attrs).forEach(function(attr){button.setAttribute(attr,this.attrs[attr]);},this);}
if(buttonLabels==='fontawesome'&&this.contentFA){content=this.contentFA;}
button.innerHTML=content;return button;},handleClick:function(event){event.preventDefault();event.stopPropagation();var action=this.getAction();if(action){this.execAction(action);}},isActive:function(){return this.button.classList.contains(this.getEditorOption('activeButtonClass'));},setInactive:function(){this.button.classList.remove(this.getEditorOption('activeButtonClass'));delete this.knownState;},setActive:function(){this.button.classList.add(this.getEditorOption('activeButtonClass'));delete this.knownState;},queryCommandState:function(){var queryState=null;if(this.useQueryState){queryState=this.base.queryCommandState(this.getAction());}
return queryState;},isAlreadyApplied:function(node){var isMatch=false,tagNames=this.getTagNames(),styleVals,computedStyle;if(this.knownState===false||this.knownState===true){return this.knownState;}
if(tagNames&&tagNames.length>0){isMatch=tagNames.indexOf(node.nodeName.toLowerCase())!==-1;}
if(!isMatch&&this.style){styleVals=this.style.value.split('|');computedStyle=this.window.getComputedStyle(node,null).getPropertyValue(this.style.prop);styleVals.forEach(function(val){if(!this.knownState){isMatch=(computedStyle.indexOf(val)!==-1);if(isMatch||this.style.prop!=='text-decoration'){this.knownState=isMatch;}}},this);}
return isMatch;}});Button.isBuiltInButton=function(name){return(typeof name==='string')&&MediumEditor.extensions.button.prototype.defaults.hasOwnProperty(name);};MediumEditor.extensions.button=Button;}());(function(){'use strict';MediumEditor.extensions.button.prototype.defaults={'bold':{name:'bold',action:'bold',aria:'bold',tagNames:['b','strong'],style:{prop:'font-weight',value:'700|bold'},useQueryState:true,contentDefault:'<b>B</b>',contentFA:'<i class="fa fa-bold"></i>'},'italic':{name:'italic',action:'italic',aria:'italic',tagNames:['i','em'],style:{prop:'font-style',value:'italic'},useQueryState:true,contentDefault:'<b><i>I</i></b>',contentFA:'<i class="fa fa-italic"></i>'},'underline':{name:'underline',action:'underline',aria:'underline',tagNames:['u'],style:{prop:'text-decoration',value:'underline'},useQueryState:true,contentDefault:'<b><u>U</u></b>',contentFA:'<i class="fa fa-underline"></i>'},'strikethrough':{name:'strikethrough',action:'strikethrough',aria:'strike through',tagNames:['strike'],style:{prop:'text-decoration',value:'line-through'},useQueryState:true,contentDefault:'<s>A</s>',contentFA:'<i class="fa fa-strikethrough"></i>'},'superscript':{name:'superscript',action:'superscript',aria:'superscript',tagNames:['sup'],contentDefault:'<b>x<sup>1</sup></b>',contentFA:'<i class="fa fa-superscript"></i>'},'subscript':{name:'subscript',action:'subscript',aria:'subscript',tagNames:['sub'],contentDefault:'<b>x<sub>1</sub></b>',contentFA:'<i class="fa fa-subscript"></i>'},'image':{name:'image',action:'image',aria:'image',tagNames:['img'],contentDefault:'<b>image</b>',contentFA:'<i class="fa fa-picture-o"></i>'},'orderedlist':{name:'orderedlist',action:'insertorderedlist',aria:'ordered list',tagNames:['ol'],useQueryState:true,contentDefault:'<b>1.</b>',contentFA:'<i class="fa fa-list-ol"></i>'},'unorderedlist':{name:'unorderedlist',action:'insertunorderedlist',aria:'unordered list',tagNames:['ul'],useQueryState:true,contentDefault:'<b>&bull;</b>',contentFA:'<i class="fa fa-list-ul"></i>'},'indent':{name:'indent',action:'indent',aria:'indent',tagNames:[],contentDefault:'<b>&rarr;</b>',contentFA:'<i class="fa fa-indent"></i>'},'outdent':{name:'outdent',action:'outdent',aria:'outdent',tagNames:[],contentDefault:'<b>&larr;</b>',contentFA:'<i class="fa fa-outdent"></i>'},'justifyCenter':{name:'justifyCenter',action:'justifyCenter',aria:'center justify',tagNames:[],style:{prop:'text-align',value:'center'},contentDefault:'<b>C</b>',contentFA:'<i class="fa fa-align-center"></i>'},'justifyFull':{name:'justifyFull',action:'justifyFull',aria:'full justify',tagNames:[],style:{prop:'text-align',value:'justify'},contentDefault:'<b>J</b>',contentFA:'<i class="fa fa-align-justify"></i>'},'justifyLeft':{name:'justifyLeft',action:'justifyLeft',aria:'left justify',tagNames:[],style:{prop:'text-align',value:'left'},contentDefault:'<b>L</b>',contentFA:'<i class="fa fa-align-left"></i>'},'justifyRight':{name:'justifyRight',action:'justifyRight',aria:'right justify',tagNames:[],style:{prop:'text-align',value:'right'},contentDefault:'<b>R</b>',contentFA:'<i class="fa fa-align-right"></i>'},'removeFormat':{name:'removeFormat',aria:'remove formatting',action:'removeFormat',contentDefault:'<b>X</b>',contentFA:'<i class="fa fa-eraser"></i>'},'quote':{name:'quote',action:'append-blockquote',aria:'blockquote',tagNames:['blockquote'],contentDefault:'<b>&ldquo;</b>',contentFA:'<i class="fa fa-quote-right"></i>'},'pre':{name:'pre',action:'append-pre',aria:'preformatted text',tagNames:['pre'],contentDefault:'<b>0101</b>',contentFA:'<i class="fa fa-code fa-lg"></i>'},'h1':{name:'h1',action:'append-h1',aria:'header type one',tagNames:['h1'],contentDefault:'<b>H1</b>',contentFA:'<i class="fa fa-header"><sup>1</sup>'},'h2':{name:'h2',action:'append-h2',aria:'header type two',tagNames:['h2'],contentDefault:'<b>H2</b>',contentFA:'<i class="fa fa-header"><sup>2</sup>'},'h3':{name:'h3',action:'append-h3',aria:'header type three',tagNames:['h3'],contentDefault:'<b>H3</b>',contentFA:'<i class="fa fa-header"><sup>3</sup>'},'h4':{name:'h4',action:'append-h4',aria:'header type four',tagNames:['h4'],contentDefault:'<b>H4</b>',contentFA:'<i class="fa fa-header"><sup>4</sup>'},'h5':{name:'h5',action:'append-h5',aria:'header type five',tagNames:['h5'],contentDefault:'<b>H5</b>',contentFA:'<i class="fa fa-header"><sup>5</sup>'},'h6':{name:'h6',action:'append-h6',aria:'header type six',tagNames:['h6'],contentDefault:'<b>H6</b>',contentFA:'<i class="fa fa-header"><sup>6</sup>'}};})();(function(){'use strict';var FormExtension=MediumEditor.extensions.button.extend({init:function(){MediumEditor.extensions.button.prototype.init.apply(this,arguments);},formSaveLabel:'&#10003;',formCloseLabel:'&times;',hasForm:true,getForm:function(){},isDisplayed:function(){},hideForm:function(){},showToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName('toolbar');if(toolbar){toolbar.showToolbarDefaultActions();}},hideToolbarDefaultActions:function(){var toolbar=this.base.getExtensionByName('toolbar');if(toolbar){toolbar.hideToolbarDefaultActions();}},setToolbarPosition:function(){var toolbar=this.base.getExtensionByName('toolbar');if(toolbar){toolbar.setToolbarPosition();}}});MediumEditor.extensions.form=FormExtension;})();(function(){'use strict';var AnchorForm=MediumEditor.extensions.form.extend({customClassOption:null,customClassOptionText:'Button',linkValidation:false,placeholderText:'Paste or type a link',targetCheckbox:false,targetCheckboxText:'Open in new window',name:'anchor',action:'createLink',aria:'link',tagNames:['a'],contentDefault:'<b>#</b>',contentFA:'<i class="fa fa-link"></i>',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments);this.subscribe('editableKeydown',this.handleKeydown.bind(this));},handleClick:function(event){event.preventDefault();event.stopPropagation();var range=MediumEditor.selection.getSelectionRange(this.document);if(range.startContainer.nodeName.toLowerCase()==='a'||range.endContainer.nodeName.toLowerCase()==='a'||MediumEditor.util.getClosestTag(MediumEditor.selection.getSelectedParentElement(range),'a')){return this.execAction('unlink');}
if(!this.isDisplayed()){this.showForm();}
return false;},handleKeydown:function(event){if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.K)&&MediumEditor.util.isMetaCtrlKey(event)&&!event.shiftKey){this.handleClick(event);}},getForm:function(){if(!this.form){this.form=this.createForm();}
return this.form;},getTemplate:function(){var template=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];template.push('<a href="#" class="medium-editor-toolbar-save">',this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-check"></i>':this.formSaveLabel,'</a>');template.push('<a href="#" class="medium-editor-toolbar-close">',this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-times"></i>':this.formCloseLabel,'</a>');if(this.targetCheckbox){template.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">','<label>',this.targetCheckboxText,'</label>','</div>');}
if(this.customClassOption){template.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">','<label>',this.customClassOptionText,'</label>','</div>');}
return template.join('');},isDisplayed:function(){return this.getForm().style.display==='block';},hideForm:function(){this.getForm().style.display='none';this.getInput().value='';},showForm:function(opts){var input=this.getInput(),targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox();opts=opts||{url:''};if(typeof opts==='string'){opts={url:opts};}
this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display='block';this.setToolbarPosition();input.value=opts.url;input.focus();if(targetCheckbox){targetCheckbox.checked=opts.target==='_blank';}
if(buttonCheckbox){var classList=opts.buttonClass?opts.buttonClass.split(' '):[];buttonCheckbox.checked=(classList.indexOf(this.customClassOption)!==-1);}},destroy:function(){if(!this.form){return false;}
if(this.form.parentNode){this.form.parentNode.removeChild(this.form);}
delete this.form;},getFormOpts:function(){var targetCheckbox=this.getAnchorTargetCheckbox(),buttonCheckbox=this.getAnchorButtonCheckbox(),opts={url:this.getInput().value.trim()};if(this.linkValidation){opts.url=this.checkLinkFormat(opts.url);}
opts.target='_self';if(targetCheckbox&&targetCheckbox.checked){opts.target='_blank';}
if(buttonCheckbox&&buttonCheckbox.checked){opts.buttonClass=this.customClassOption;}
return opts;},doFormSave:function(){var opts=this.getFormOpts();this.completeFormSave(opts);},completeFormSave:function(opts){this.base.restoreSelection();this.execAction(this.action,opts);this.base.checkSelection();},checkLinkFormat:function(value){var re=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(re.test(value)?'':'http://')+value;},doFormCancel:function(){this.base.restoreSelection();this.base.checkSelection();},attachFormEvents:function(form){var close=form.querySelector('.medium-editor-toolbar-close'),save=form.querySelector('.medium-editor-toolbar-save'),input=form.querySelector('.medium-editor-toolbar-input');this.on(form,'click',this.handleFormClick.bind(this));this.on(input,'keyup',this.handleTextboxKeyup.bind(this));this.on(close,'click',this.handleCloseClick.bind(this));this.on(save,'click',this.handleSaveClick.bind(this),true);},createForm:function(){var doc=this.document,form=doc.createElement('div');form.className='medium-editor-toolbar-form';form.id='medium-editor-toolbar-form-anchor-'+this.getEditorId();form.innerHTML=this.getTemplate();this.attachFormEvents(form);return form;},getInput:function(){return this.getForm().querySelector('input.medium-editor-toolbar-input');},getAnchorTargetCheckbox:function(){return this.getForm().querySelector('.medium-editor-toolbar-anchor-target');},getAnchorButtonCheckbox:function(){return this.getForm().querySelector('.medium-editor-toolbar-anchor-button');},handleTextboxKeyup:function(event){if(event.keyCode===MediumEditor.util.keyCode.ENTER){event.preventDefault();this.doFormSave();return;}
if(event.keyCode===MediumEditor.util.keyCode.ESCAPE){event.preventDefault();this.doFormCancel();}},handleFormClick:function(event){event.stopPropagation();},handleSaveClick:function(event){event.preventDefault();this.doFormSave();},handleCloseClick:function(event){event.preventDefault();this.doFormCancel();}});MediumEditor.extensions.anchor=AnchorForm;}());(function(){'use strict';var AnchorPreview=MediumEditor.Extension.extend({name:'anchor-preview',hideDelay:500,previewValueSelector:'a',showWhenToolbarIsVisible:false,init:function(){this.anchorPreview=this.createPreview();this.getEditorOption('elementsContainer').appendChild(this.anchorPreview);this.attachToEditables();},getPreviewElement:function(){return this.anchorPreview;},createPreview:function(){var el=this.document.createElement('div');el.id='medium-editor-anchor-preview-'+this.getEditorId();el.className='medium-editor-anchor-preview';el.innerHTML=this.getTemplate();this.on(el,'click',this.handleClick.bind(this));return el;},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">'+'    <a class="medium-editor-toolbar-anchor-preview-inner"></a>'+'</div>';},destroy:function(){if(this.anchorPreview){if(this.anchorPreview.parentNode){this.anchorPreview.parentNode.removeChild(this.anchorPreview);}
delete this.anchorPreview;}},hidePreview:function(){this.anchorPreview.classList.remove('medium-editor-anchor-preview-active');this.activeAnchor=null;},showPreview:function(anchorEl){if(this.anchorPreview.classList.contains('medium-editor-anchor-preview-active')||anchorEl.getAttribute('data-disable-preview')){return true;}
if(this.previewValueSelector){this.anchorPreview.querySelector(this.previewValueSelector).textContent=anchorEl.attributes.href.value;this.anchorPreview.querySelector(this.previewValueSelector).href=anchorEl.attributes.href.value;}
this.anchorPreview.classList.add('medium-toolbar-arrow-over');this.anchorPreview.classList.remove('medium-toolbar-arrow-under');if(!this.anchorPreview.classList.contains('medium-editor-anchor-preview-active')){this.anchorPreview.classList.add('medium-editor-anchor-preview-active');}
this.activeAnchor=anchorEl;this.positionPreview();this.attachPreviewHandlers();return this;},positionPreview:function(activeAnchor){activeAnchor=activeAnchor||this.activeAnchor;var buttonHeight=this.anchorPreview.offsetHeight,boundary=activeAnchor.getBoundingClientRect(),middleBoundary=(boundary.left+boundary.right)/2,diffLeft=this.diffLeft,diffTop=this.diffTop,halfOffsetWidth,defaultLeft;halfOffsetWidth=this.anchorPreview.offsetWidth/2;var toolbarExtension=this.base.getExtensionByName('toolbar');if(toolbarExtension){diffLeft=toolbarExtension.diffLeft;diffTop=toolbarExtension.diffTop;}
defaultLeft=diffLeft-halfOffsetWidth;this.anchorPreview.style.top=Math.round(buttonHeight+boundary.bottom-diffTop+this.window.pageYOffset-this.anchorPreview.offsetHeight)+'px';if(middleBoundary<halfOffsetWidth){this.anchorPreview.style.left=defaultLeft+halfOffsetWidth+'px';}else if((this.window.innerWidth-middleBoundary)<halfOffsetWidth){this.anchorPreview.style.left=this.window.innerWidth+defaultLeft-halfOffsetWidth+'px';}else{this.anchorPreview.style.left=defaultLeft+middleBoundary+'px';}},attachToEditables:function(){this.subscribe('editableMouseover',this.handleEditableMouseover.bind(this));},handleClick:function(event){var anchorExtension=this.base.getExtensionByName('anchor'),activeAnchor=this.activeAnchor;if(anchorExtension&&activeAnchor){event.preventDefault();this.base.selectElement(this.activeAnchor);this.base.delay(function(){if(activeAnchor){var opts={url:activeAnchor.attributes.href.value,target:activeAnchor.getAttribute('target'),buttonClass:activeAnchor.getAttribute('class')};anchorExtension.showForm(opts);activeAnchor=null;}}.bind(this));}
this.hidePreview();},handleAnchorMouseout:function(){this.anchorToPreview=null;this.off(this.activeAnchor,'mouseout',this.instanceHandleAnchorMouseout);this.instanceHandleAnchorMouseout=null;},handleEditableMouseover:function(event){var target=MediumEditor.util.getClosestTag(event.target,'a');if(false===target){return;}
if(!/href=["']\S+["']/.test(target.outerHTML)||/href=["']#\S+["']/.test(target.outerHTML)){return true;}
var toolbar=this.base.getExtensionByName('toolbar');if(!this.showWhenToolbarIsVisible&&toolbar&&toolbar.isDisplayed&&toolbar.isDisplayed()){return true;}
if(this.activeAnchor&&this.activeAnchor!==target){this.detachPreviewHandlers();}
this.anchorToPreview=target;this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this);this.on(this.anchorToPreview,'mouseout',this.instanceHandleAnchorMouseout);this.base.delay(function(){if(this.anchorToPreview){this.showPreview(this.anchorToPreview);}}.bind(this));},handlePreviewMouseover:function(){this.lastOver=(new Date()).getTime();this.hovering=true;},handlePreviewMouseout:function(event){if(!event.relatedTarget||!/anchor-preview/.test(event.relatedTarget.className)){this.hovering=false;}},updatePreview:function(){if(this.hovering){return true;}
var durr=(new Date()).getTime()-this.lastOver;if(durr>this.hideDelay){this.detachPreviewHandlers();}},detachPreviewHandlers:function(){clearInterval(this.intervalTimer);if(this.instanceHandlePreviewMouseover){this.off(this.anchorPreview,'mouseover',this.instanceHandlePreviewMouseover);this.off(this.anchorPreview,'mouseout',this.instanceHandlePreviewMouseout);if(this.activeAnchor){this.off(this.activeAnchor,'mouseover',this.instanceHandlePreviewMouseover);this.off(this.activeAnchor,'mouseout',this.instanceHandlePreviewMouseout);}}
this.hidePreview();this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null;},attachPreviewHandlers:function(){this.lastOver=(new Date()).getTime();this.hovering=true;this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this);this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this);this.intervalTimer=setInterval(this.updatePreview.bind(this),200);this.on(this.anchorPreview,'mouseover',this.instanceHandlePreviewMouseover);this.on(this.anchorPreview,'mouseout',this.instanceHandlePreviewMouseout);this.on(this.activeAnchor,'mouseover',this.instanceHandlePreviewMouseover);this.on(this.activeAnchor,'mouseout',this.instanceHandlePreviewMouseout);}});MediumEditor.extensions.anchorPreview=AnchorPreview;}());(function(){'use strict';var WHITESPACE_CHARS,KNOWN_TLDS_FRAGMENT,LINK_REGEXP_TEXT,KNOWN_TLDS_REGEXP;WHITESPACE_CHARS=[' ','\t','\n','\r','\u00A0','\u2000','\u2001','\u2002','\u2003','\u2028','\u2029'];KNOWN_TLDS_FRAGMENT='com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|'+'xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|'+'bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|'+'fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|'+'is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|'+'mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|'+'pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|'+'tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw';LINK_REGEXP_TEXT='('+'((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]('+KNOWN_TLDS_FRAGMENT+')\\\/)\\S+(?:[^\\s`!\\[\\]{};:\'\".,?\u00AB\u00BB\u201C\u201D\u2018\u2019]))'+')|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.('+KNOWN_TLDS_FRAGMENT+'))';KNOWN_TLDS_REGEXP=new RegExp('^('+KNOWN_TLDS_FRAGMENT+')$','i');function nodeIsNotInsideAnchorTag(node){return!MediumEditor.util.getClosestTag(node,'a');}
var AutoLink=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.disableEventHandling=false;this.subscribe('editableKeypress',this.onKeypress.bind(this));this.subscribe('editableBlur',this.onBlur.bind(this));this.document.execCommand('AutoUrlDetect',false,false);},destroy:function(){if(this.document.queryCommandSupported('AutoUrlDetect')){this.document.execCommand('AutoUrlDetect',false,true);}},onBlur:function(blurEvent,editable){this.performLinking(editable);},onKeypress:function(keyPressEvent){if(this.disableEventHandling){return;}
if(MediumEditor.util.isKey(keyPressEvent,[MediumEditor.util.keyCode.SPACE,MediumEditor.util.keyCode.ENTER])){clearTimeout(this.performLinkingTimeout);this.performLinkingTimeout=setTimeout(function(){try{var sel=this.base.exportSelection();if(this.performLinking(keyPressEvent.target)){this.base.importSelection(sel,true);}}catch(e){if(window.console){window.console.error('Failed to perform linking',e);}
this.disableEventHandling=true;}}.bind(this),0);}},performLinking:function(contenteditable){var blockElements=MediumEditor.util.splitByBlockElements(contenteditable),documentModified=false;if(blockElements.length===0){blockElements=[contenteditable];}
for(var i=0;i<blockElements.length;i++){documentModified=this.removeObsoleteAutoLinkSpans(blockElements[i])||documentModified;documentModified=this.performLinkingWithinElement(blockElements[i])||documentModified;}
return documentModified;},removeObsoleteAutoLinkSpans:function(element){if(!element||element.nodeType===3){return false;}
var spans=element.querySelectorAll('span[data-auto-link="true"]'),documentModified=false;for(var i=0;i<spans.length;i++){var textContent=spans[i].textContent;if(textContent.indexOf('://')===-1){textContent=MediumEditor.util.ensureUrlHasProtocol(textContent);}
if(spans[i].getAttribute('data-href')!==textContent&&nodeIsNotInsideAnchorTag(spans[i])){documentModified=true;var trimmedTextContent=textContent.replace(/\s+$/,'');if(spans[i].getAttribute('data-href')===trimmedTextContent){var charactersTrimmed=textContent.length-trimmedTextContent.length,subtree=MediumEditor.util.splitOffDOMTree(spans[i],this.splitTextBeforeEnd(spans[i],charactersTrimmed));spans[i].parentNode.insertBefore(subtree,spans[i].nextSibling);}else{MediumEditor.util.unwrap(spans[i],this.document);}}}
return documentModified;},splitTextBeforeEnd:function(element,characterCount){var treeWalker=this.document.createTreeWalker(element,NodeFilter.SHOW_TEXT,null,false),lastChildNotExhausted=true;while(lastChildNotExhausted){lastChildNotExhausted=treeWalker.lastChild()!==null;}
var currentNode,currentNodeValue,previousNode;while(characterCount>0&&previousNode!==null){currentNode=treeWalker.currentNode;currentNodeValue=currentNode.nodeValue;if(currentNodeValue.length>characterCount){previousNode=currentNode.splitText(currentNodeValue.length-characterCount);characterCount=0;}else{previousNode=treeWalker.previousNode();characterCount-=currentNodeValue.length;}}
return previousNode;},performLinkingWithinElement:function(element){var matches=this.findLinkableText(element),linkCreated=false;for(var matchIndex=0;matchIndex<matches.length;matchIndex++){var matchingTextNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.document,element,matches[matchIndex]);if(this.shouldNotLink(matchingTextNodes)){continue;}
this.createAutoLink(matchingTextNodes,matches[matchIndex].href);}
return linkCreated;},shouldNotLink:function(textNodes){var shouldNotLink=false;for(var i=0;i<textNodes.length&&shouldNotLink===false;i++){shouldNotLink=!!MediumEditor.util.traverseUp(textNodes[i],function(node){return node.nodeName.toLowerCase()==='a'||(node.getAttribute&&node.getAttribute('data-auto-link')==='true');});}
return shouldNotLink;},findLinkableText:function(contenteditable){var linkRegExp=new RegExp(LINK_REGEXP_TEXT,'gi'),textContent=contenteditable.textContent,match=null,matches=[];while((match=linkRegExp.exec(textContent))!==null){var matchOk=true,matchEnd=match.index+match[0].length;matchOk=(match.index===0||WHITESPACE_CHARS.indexOf(textContent[match.index-1])!==-1)&&(matchEnd===textContent.length||WHITESPACE_CHARS.indexOf(textContent[matchEnd])!==-1);matchOk=matchOk&&(match[0].indexOf('/')!==-1||KNOWN_TLDS_REGEXP.test(match[0].split('.').pop().split('?').shift()));if(matchOk){matches.push({href:match[0],start:match.index,end:matchEnd});}}
return matches;},createAutoLink:function(textNodes,href){href=MediumEditor.util.ensureUrlHasProtocol(href);var anchor=MediumEditor.util.createLink(this.document,textNodes,href,this.getEditorOption('targetBlank')?'_blank':null),span=this.document.createElement('span');span.setAttribute('data-auto-link','true');span.setAttribute('data-href',href);anchor.insertBefore(span,anchor.firstChild);while(anchor.childNodes.length>1){span.appendChild(anchor.childNodes[1]);}}});MediumEditor.extensions.autoLink=AutoLink;}());(function(){'use strict';var CLASS_DRAG_OVER='medium-editor-dragover';function clearClassNames(element){var editable=MediumEditor.util.getContainerEditorElement(element),existing=Array.prototype.slice.call(editable.parentElement.querySelectorAll('.'+CLASS_DRAG_OVER));existing.forEach(function(el){el.classList.remove(CLASS_DRAG_OVER);});}
var FileDragging=MediumEditor.Extension.extend({name:'fileDragging',allowedTypes:['image'],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe('editableDrag',this.handleDrag.bind(this));this.subscribe('editableDrop',this.handleDrop.bind(this));},handleDrag:function(event){event.preventDefault();event.dataTransfer.dropEffect='copy';var target=event.target.classList?event.target:event.target.parentElement;clearClassNames(target);if(event.type==='dragover'){target.classList.add(CLASS_DRAG_OVER);}},handleDrop:function(event){event.preventDefault();event.stopPropagation();if(event.dataTransfer.files){Array.prototype.slice.call(event.dataTransfer.files).forEach(function(file){if(this.isAllowedFile(file)){if(file.type.match('image')){this.insertImageFile(file);}}},this);}
clearClassNames(event.target);},isAllowedFile:function(file){return this.allowedTypes.some(function(fileType){return!!file.type.match(fileType);});},insertImageFile:function(file){var fileReader=new FileReader();fileReader.readAsDataURL(file);var id='medium-img-'+(+new Date());MediumEditor.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+id+'" />');fileReader.onload=function(){var img=this.document.getElementById(id);if(img){img.removeAttribute('id');img.removeAttribute('class');img.src=fileReader.result;}}.bind(this);}});MediumEditor.extensions.fileDragging=FileDragging;}());(function(){'use strict';var KeyboardCommands=MediumEditor.Extension.extend({name:'keyboard-commands',commands:[{command:'bold',key:'B',meta:true,shift:false,alt:false},{command:'italic',key:'I',meta:true,shift:false,alt:false},{command:'underline',key:'U',meta:true,shift:false,alt:false}],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe('editableKeydown',this.handleKeydown.bind(this));this.keys={};this.commands.forEach(function(command){var keyCode=command.key.charCodeAt(0);if(!this.keys[keyCode]){this.keys[keyCode]=[];}
this.keys[keyCode].push(command);},this);},handleKeydown:function(event){var keyCode=MediumEditor.util.getKeyCode(event);if(!this.keys[keyCode]){return;}
var isMeta=MediumEditor.util.isMetaCtrlKey(event),isShift=!!event.shiftKey,isAlt=!!event.altKey;this.keys[keyCode].forEach(function(data){if(data.meta===isMeta&&data.shift===isShift&&(data.alt===isAlt||undefined===data.alt)){event.preventDefault();event.stopPropagation();if(false!==data.command){this.execAction(data.command);}}},this);}});MediumEditor.extensions.keyboardCommands=KeyboardCommands;}());(function(){'use strict';var FontNameForm=MediumEditor.extensions.form.extend({name:'fontname',action:'fontName',aria:'change font name',contentDefault:'&#xB1;',contentFA:'<i class="fa fa-font"></i>',fonts:['','Arial','Verdana','Times New Roman'],init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments);},handleClick:function(event){event.preventDefault();event.stopPropagation();if(!this.isDisplayed()){var fontName=this.document.queryCommandValue('fontName')+'';this.showForm(fontName);}
return false;},getForm:function(){if(!this.form){this.form=this.createForm();}
return this.form;},isDisplayed:function(){return this.getForm().style.display==='block';},hideForm:function(){this.getForm().style.display='none';this.getSelect().value='';},showForm:function(fontName){var select=this.getSelect();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display='block';this.setToolbarPosition();select.value=fontName||'';select.focus();},destroy:function(){if(!this.form){return false;}
if(this.form.parentNode){this.form.parentNode.removeChild(this.form);}
delete this.form;},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection();},doFormCancel:function(){this.base.restoreSelection();this.clearFontName();this.base.checkSelection();},createForm:function(){var doc=this.document,form=doc.createElement('div'),select=doc.createElement('select'),close=doc.createElement('a'),save=doc.createElement('a'),option;form.className='medium-editor-toolbar-form';form.id='medium-editor-toolbar-form-fontname-'+this.getEditorId();this.on(form,'click',this.handleFormClick.bind(this));for(var i=0;i<this.fonts.length;i++){option=doc.createElement('option');option.innerHTML=this.fonts[i];option.value=this.fonts[i];select.appendChild(option);}
select.className='medium-editor-toolbar-select';form.appendChild(select);this.on(select,'change',this.handleFontChange.bind(this));save.setAttribute('href','#');save.className='medium-editor-toobar-save';save.innerHTML=this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-check"></i>':'&#10003;';form.appendChild(save);this.on(save,'click',this.handleSaveClick.bind(this),true);close.setAttribute('href','#');close.className='medium-editor-toobar-close';close.innerHTML=this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-times"></i>':'&times;';form.appendChild(close);this.on(close,'click',this.handleCloseClick.bind(this));return form;},getSelect:function(){return this.getForm().querySelector('select.medium-editor-toolbar-select');},clearFontName:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){if(el.nodeName.toLowerCase()==='font'&&el.hasAttribute('face')){el.removeAttribute('face');}});},handleFontChange:function(){var font=this.getSelect().value;if(font===''){this.clearFontName();}else{this.execAction('fontName',{name:font});}},handleFormClick:function(event){event.stopPropagation();},handleSaveClick:function(event){event.preventDefault();this.doFormSave();},handleCloseClick:function(event){event.preventDefault();this.doFormCancel();}});MediumEditor.extensions.fontName=FontNameForm;}());(function(){'use strict';var FontSizeForm=MediumEditor.extensions.form.extend({name:'fontsize',action:'fontSize',aria:'increase/decrease font size',contentDefault:'&#xB1;',contentFA:'<i class="fa fa-text-height"></i>',init:function(){MediumEditor.extensions.form.prototype.init.apply(this,arguments);},handleClick:function(event){event.preventDefault();event.stopPropagation();if(!this.isDisplayed()){var fontSize=this.document.queryCommandValue('fontSize')+'';this.showForm(fontSize);}
return false;},getForm:function(){if(!this.form){this.form=this.createForm();}
return this.form;},isDisplayed:function(){return this.getForm().style.display==='block';},hideForm:function(){this.getForm().style.display='none';this.getInput().value='';},showForm:function(fontSize){var input=this.getInput();this.base.saveSelection();this.hideToolbarDefaultActions();this.getForm().style.display='block';this.setToolbarPosition();input.value=fontSize||'';input.focus();},destroy:function(){if(!this.form){return false;}
if(this.form.parentNode){this.form.parentNode.removeChild(this.form);}
delete this.form;},doFormSave:function(){this.base.restoreSelection();this.base.checkSelection();},doFormCancel:function(){this.base.restoreSelection();this.clearFontSize();this.base.checkSelection();},createForm:function(){var doc=this.document,form=doc.createElement('div'),input=doc.createElement('input'),close=doc.createElement('a'),save=doc.createElement('a');form.className='medium-editor-toolbar-form';form.id='medium-editor-toolbar-form-fontsize-'+this.getEditorId();this.on(form,'click',this.handleFormClick.bind(this));input.setAttribute('type','range');input.setAttribute('min','1');input.setAttribute('max','7');input.className='medium-editor-toolbar-input';form.appendChild(input);this.on(input,'change',this.handleSliderChange.bind(this));save.setAttribute('href','#');save.className='medium-editor-toobar-save';save.innerHTML=this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-check"></i>':'&#10003;';form.appendChild(save);this.on(save,'click',this.handleSaveClick.bind(this),true);close.setAttribute('href','#');close.className='medium-editor-toobar-close';close.innerHTML=this.getEditorOption('buttonLabels')==='fontawesome'?'<i class="fa fa-times"></i>':'&times;';form.appendChild(close);this.on(close,'click',this.handleCloseClick.bind(this));return form;},getInput:function(){return this.getForm().querySelector('input.medium-editor-toolbar-input');},clearFontSize:function(){MediumEditor.selection.getSelectedElements(this.document).forEach(function(el){if(el.nodeName.toLowerCase()==='font'&&el.hasAttribute('size')){el.removeAttribute('size');}});},handleSliderChange:function(){var size=this.getInput().value;if(size==='4'){this.clearFontSize();}else{this.execAction('fontSize',{size:size});}},handleFormClick:function(event){event.stopPropagation();},handleSaveClick:function(event){event.preventDefault();this.doFormSave();},handleCloseClick:function(event){event.preventDefault();this.doFormCancel();}});MediumEditor.extensions.fontSize=FontSizeForm;}());(function(){'use strict';function createReplacements(){return[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),''],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),''],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g),' '],[new RegExp(/<br class="Apple-interchange-newline">/g),'<br>'],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),'<$1$2>'],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"|“|”)(((?!&quot;|&rdquo;|&ldquo;|"|“|”).)*)(?:&quot;|&rdquo;|&ldquo;|"|“|”)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),'</p>'],[new RegExp(/\n+<p/gi),'<p'],[new RegExp(/<\/?o:[a-z]*>/gi),''],['<!--EndFragment-->',''],['<!--StartFragment-->','']];}
var PasteHandler=MediumEditor.Extension.extend({forcePlainText:true,cleanPastedHTML:false,cleanReplacements:[],cleanAttrs:['class','style','dir'],cleanTags:['meta'],init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);if(this.forcePlainText||this.cleanPastedHTML){this.subscribe('editablePaste',this.handlePaste.bind(this));}},handlePaste:function(event,element){var paragraphs,html='',p,dataFormatHTML='text/html',dataFormatPlain='text/plain',pastedHTML,pastedPlain;if(this.window.clipboardData&&event.clipboardData===undefined){event.clipboardData=this.window.clipboardData;dataFormatHTML='Text';dataFormatPlain='Text';}
if(event.clipboardData&&event.clipboardData.getData&&!event.defaultPrevented){event.preventDefault();pastedHTML=event.clipboardData.getData(dataFormatHTML);pastedPlain=event.clipboardData.getData(dataFormatPlain);if(this.cleanPastedHTML&&pastedHTML){return this.cleanPaste(pastedHTML);}
if(!(this.getEditorOption('disableReturn')||element.getAttribute('data-disable-return'))){paragraphs=pastedPlain.split(/[\r\n]+/g);if(paragraphs.length>1){for(p=0;p<paragraphs.length;p+=1){if(paragraphs[p]!==''){html+='<p>'+MediumEditor.util.htmlEntities(paragraphs[p])+'</p>';}}}else{html=MediumEditor.util.htmlEntities(paragraphs[0]);}}else{html=MediumEditor.util.htmlEntities(pastedPlain);}
MediumEditor.util.insertHTMLCommand(this.document,html);}},cleanPaste:function(text){var i,elList,tmp,workEl,multiline=/<p|<br|<div/.test(text),replacements=createReplacements().concat(this.cleanReplacements||[]);for(i=0;i<replacements.length;i+=1){text=text.replace(replacements[i][0],replacements[i][1]);}
if(!multiline){return this.pasteHTML(text);}
tmp=this.document.createElement('div');tmp.innerHTML='<p>'+text.split('<br><br>').join('</p><p>')+'</p>';elList=tmp.querySelectorAll('a,p,div,br');for(i=0;i<elList.length;i+=1){workEl=elList[i];workEl.innerHTML=workEl.innerHTML.replace(/\n/gi,' ');switch(workEl.nodeName.toLowerCase()){case'p':case'div':this.filterCommonBlocks(workEl);break;case'br':this.filterLineBreak(workEl);break;}}
this.pasteHTML(tmp.innerHTML);},pasteHTML:function(html,options){options=MediumEditor.util.defaults({},options,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var elList,workEl,i,fragmentBody,pasteBlock=this.document.createDocumentFragment();pasteBlock.appendChild(this.document.createElement('body'));fragmentBody=pasteBlock.querySelector('body');fragmentBody.innerHTML=html;this.cleanupSpans(fragmentBody);elList=fragmentBody.querySelectorAll('*');for(i=0;i<elList.length;i+=1){workEl=elList[i];if('a'===workEl.nodeName.toLowerCase()&&this.getEditorOption('targetBlank')){MediumEditor.util.setTargetBlank(workEl);}
MediumEditor.util.cleanupAttrs(workEl,options.cleanAttrs);MediumEditor.util.cleanupTags(workEl,options.cleanTags);}
MediumEditor.util.insertHTMLCommand(this.document,fragmentBody.innerHTML.replace(/&nbsp;/g,' '));},isCommonBlock:function(el){return(el&&(el.nodeName.toLowerCase()==='p'||el.nodeName.toLowerCase()==='div'));},filterCommonBlocks:function(el){if(/^\s*$/.test(el.textContent)&&el.parentNode){el.parentNode.removeChild(el);}},filterLineBreak:function(el){if(this.isCommonBlock(el.previousElementSibling)){this.removeWithParent(el);}else if(this.isCommonBlock(el.parentNode)&&(el.parentNode.firstChild===el||el.parentNode.lastChild===el)){this.removeWithParent(el);}else if(el.parentNode&&el.parentNode.childElementCount===1&&el.parentNode.textContent===''){this.removeWithParent(el);}},removeWithParent:function(el){if(el&&el.parentNode){if(el.parentNode.parentNode&&el.parentNode.childElementCount===1){el.parentNode.parentNode.removeChild(el.parentNode);}else{el.parentNode.removeChild(el);}}},cleanupSpans:function(containerEl){var i,el,newEl,spans=containerEl.querySelectorAll('.replace-with'),isCEF=function(el){return(el&&el.nodeName!=='#text'&&el.getAttribute('contenteditable')==='false');};for(i=0;i<spans.length;i+=1){el=spans[i];newEl=this.document.createElement(el.classList.contains('bold')?'b':'i');if(el.classList.contains('bold')&&el.classList.contains('italic')){newEl.innerHTML='<i>'+el.innerHTML+'</i>';}else{newEl.innerHTML=el.innerHTML;}
el.parentNode.replaceChild(newEl,el);}
spans=containerEl.querySelectorAll('span');for(i=0;i<spans.length;i+=1){el=spans[i];if(MediumEditor.util.traverseUp(el,isCEF)){return false;}
MediumEditor.util.unwrap(el,this.document);}}});MediumEditor.extensions.paste=PasteHandler;}());(function(){'use strict';var Placeholder=MediumEditor.Extension.extend({name:'placeholder',text:'Type your text',hideOnClick:true,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initPlaceholders();this.attachEventHandlers();},initPlaceholders:function(){this.getEditorElements().forEach(function(el){if(!el.getAttribute('data-placeholder')){el.setAttribute('data-placeholder',this.text);}
this.updatePlaceholder(el);},this);},destroy:function(){this.getEditorElements().forEach(function(el){if(el.getAttribute('data-placeholder')===this.text){el.removeAttribute('data-placeholder');}},this);},showPlaceholder:function(el){if(el){el.classList.add('medium-editor-placeholder');}},hidePlaceholder:function(el){if(el){el.classList.remove('medium-editor-placeholder');}},updatePlaceholder:function(el,dontShow){if(el.querySelector('img, blockquote, ul, ol')||(el.textContent.replace(/^\s+|\s+$/g,'')!=='')){return this.hidePlaceholder(el);}
if(!dontShow){this.showPlaceholder(el);}},attachEventHandlers:function(){if(this.hideOnClick){this.subscribe('focus',this.handleFocus.bind(this));}
this.subscribe('editableInput',this.handleInput.bind(this));this.subscribe('blur',this.handleBlur.bind(this));},handleInput:function(event,element){var dontShow=this.hideOnClick&&(element===this.base.getFocusedElement());this.updatePlaceholder(element,dontShow);},handleFocus:function(event,element){this.hidePlaceholder(element);},handleBlur:function(event,element){this.updatePlaceholder(element);}});MediumEditor.extensions.placeholder=Placeholder;}());(function(){'use strict';var Toolbar=MediumEditor.Extension.extend({name:'toolbar',align:'center',allowMultiParagraphSelection:true,buttons:['bold','italic','underline','anchor','h2','h3','quote'],diffLeft:0,diffTop:-10,firstButtonClass:'medium-editor-button-first',lastButtonClass:'medium-editor-button-last',standardizeSelectionStart:false,static:false,sticky:false,updateOnEmptySelection:false,relativeContainer:null,init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.initThrottledMethods();if(!this.relativeContainer){this.getEditorOption('elementsContainer').appendChild(this.getToolbarElement());}else{this.relativeContainer.appendChild(this.getToolbarElement());}},forEachExtension:function(iterator,context){return this.base.extensions.forEach(function(command){if(command===this){return;}
return iterator.apply(context||this,arguments);},this);},createToolbar:function(){var toolbar=this.document.createElement('div');toolbar.id='medium-editor-toolbar-'+this.getEditorId();toolbar.className='medium-editor-toolbar';if(this.static){toolbar.className+=' static-toolbar';}else if(this.relativeContainer){toolbar.className+=' medium-editor-relative-toolbar';}else{toolbar.className+=' medium-editor-stalker-toolbar';}
toolbar.appendChild(this.createToolbarButtons());this.forEachExtension(function(extension){if(extension.hasForm){toolbar.appendChild(extension.getForm());}});this.attachEventHandlers();return toolbar;},createToolbarButtons:function(){var ul=this.document.createElement('ul'),li,btn,buttons,extension,buttonName,buttonOpts;ul.id='medium-editor-toolbar-actions'+this.getEditorId();ul.className='medium-editor-toolbar-actions';ul.style.display='block';this.buttons.forEach(function(button){if(typeof button==='string'){buttonName=button;buttonOpts=null;}else{buttonName=button.name;buttonOpts=button;}
extension=this.base.addBuiltInExtension(buttonName,buttonOpts);if(extension&&typeof extension.getButton==='function'){btn=extension.getButton(this.base);li=this.document.createElement('li');if(MediumEditor.util.isElement(btn)){li.appendChild(btn);}else{li.innerHTML=btn;}
ul.appendChild(li);}},this);buttons=ul.querySelectorAll('button');if(buttons.length>0){buttons[0].classList.add(this.firstButtonClass);buttons[buttons.length-1].classList.add(this.lastButtonClass);}
return ul;},destroy:function(){if(this.toolbar){if(this.toolbar.parentNode){this.toolbar.parentNode.removeChild(this.toolbar);}
delete this.toolbar;}},getToolbarElement:function(){if(!this.toolbar){this.toolbar=this.createToolbar();}
return this.toolbar;},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector('.medium-editor-toolbar-actions');},initThrottledMethods:function(){this.throttledPositionToolbar=MediumEditor.util.throttle(function(){if(this.base.isActive){this.positionToolbarIfShown();}}.bind(this));},attachEventHandlers:function(){this.subscribe('blur',this.handleBlur.bind(this));this.subscribe('focus',this.handleFocus.bind(this));this.subscribe('editableClick',this.handleEditableClick.bind(this));this.subscribe('editableKeyup',this.handleEditableKeyup.bind(this));this.on(this.document.documentElement,'mouseup',this.handleDocumentMouseup.bind(this));if(this.static&&this.sticky){this.on(this.window,'scroll',this.handleWindowScroll.bind(this),true);}
this.on(this.window,'resize',this.handleWindowResize.bind(this));},handleWindowScroll:function(){this.positionToolbarIfShown();},handleWindowResize:function(){this.throttledPositionToolbar();},handleDocumentMouseup:function(event){if(event&&event.target&&MediumEditor.util.isDescendant(this.getToolbarElement(),event.target)){return false;}
this.checkState();},handleEditableClick:function(){setTimeout(function(){this.checkState();}.bind(this),0);},handleEditableKeyup:function(){this.checkState();},handleBlur:function(){clearTimeout(this.hideTimeout);clearTimeout(this.delayShowTimeout);this.hideTimeout=setTimeout(function(){this.hideToolbar();}.bind(this),1);},handleFocus:function(){this.checkState();},isDisplayed:function(){return this.getToolbarElement().classList.contains('medium-editor-toolbar-active');},showToolbar:function(){clearTimeout(this.hideTimeout);if(!this.isDisplayed()){this.getToolbarElement().classList.add('medium-editor-toolbar-active');this.trigger('showToolbar',{},this.base.getFocusedElement());}},hideToolbar:function(){if(this.isDisplayed()){this.getToolbarElement().classList.remove('medium-editor-toolbar-active');this.trigger('hideToolbar',{},this.base.getFocusedElement());}},isToolbarDefaultActionsDisplayed:function(){return this.getToolbarActionsElement().style.display==='block';},hideToolbarDefaultActions:function(){if(this.isToolbarDefaultActionsDisplayed()){this.getToolbarActionsElement().style.display='none';}},showToolbarDefaultActions:function(){this.hideExtensionForms();if(!this.isToolbarDefaultActionsDisplayed()){this.getToolbarActionsElement().style.display='block';}
this.delayShowTimeout=this.base.delay(function(){this.showToolbar();}.bind(this));},hideExtensionForms:function(){this.forEachExtension(function(extension){if(extension.hasForm&&extension.isDisplayed()){extension.hideForm();}});},multipleBlockElementsSelected:function(){var regexEmptyHTMLTags=/<[^\/>][^>]*><\/[^>]+>/gim,regexBlockElements=new RegExp('<('+MediumEditor.util.blockContainerElementNames.join('|')+')[^>]*>','g'),selectionHTML=MediumEditor.selection.getSelectionHtml(this.document).replace(regexEmptyHTMLTags,''),hasMultiParagraphs=selectionHTML.match(regexBlockElements);return!!hasMultiParagraphs&&hasMultiParagraphs.length>1;},modifySelection:function(){var selection=this.window.getSelection(),selectionRange=selection.getRangeAt(0);if(this.standardizeSelectionStart&&selectionRange.startContainer.nodeValue&&(selectionRange.startOffset===selectionRange.startContainer.nodeValue.length)){var adjacentNode=MediumEditor.util.findAdjacentTextNodeWithContent(MediumEditor.selection.getSelectionElement(this.window),selectionRange.startContainer,this.document);if(adjacentNode){var offset=0;while(adjacentNode.nodeValue.substr(offset,1).trim().length===0){offset=offset+1;}
selectionRange=MediumEditor.selection.select(this.document,adjacentNode,offset,selectionRange.endContainer,selectionRange.endOffset);}}},checkState:function(){if(this.base.preventSelectionUpdates){return;}
if(!this.base.getFocusedElement()||MediumEditor.selection.selectionInContentEditableFalse(this.window)){return this.hideToolbar();}
var selectionElement=MediumEditor.selection.getSelectionElement(this.window);if(!selectionElement||this.getEditorElements().indexOf(selectionElement)===-1||selectionElement.getAttribute('data-disable-toolbar')){return this.hideToolbar();}
if(this.updateOnEmptySelection&&this.static){return this.showAndUpdateToolbar();}
if(this.window.getSelection().toString().trim()===''||(this.allowMultiParagraphSelection===false&&this.multipleBlockElementsSelected())){return this.hideToolbar();}
this.showAndUpdateToolbar();},showAndUpdateToolbar:function(){this.modifySelection();this.setToolbarButtonStates();this.trigger('positionToolbar',{},this.base.getFocusedElement());this.showToolbarDefaultActions();this.setToolbarPosition();},setToolbarButtonStates:function(){this.forEachExtension(function(extension){if(typeof extension.isActive==='function'&&typeof extension.setInactive==='function'){extension.setInactive();}});this.checkActiveButtons();},checkActiveButtons:function(){var manualStateChecks=[],queryState=null,selectionRange=MediumEditor.selection.getSelectionRange(this.document),parentNode,updateExtensionState=function(extension){if(typeof extension.checkState==='function'){extension.checkState(parentNode);}else if(typeof extension.isActive==='function'&&typeof extension.isAlreadyApplied==='function'&&typeof extension.setActive==='function'){if(!extension.isActive()&&extension.isAlreadyApplied(parentNode)){extension.setActive();}}};if(!selectionRange){return;}
this.forEachExtension(function(extension){if(typeof extension.queryCommandState==='function'){queryState=extension.queryCommandState();if(queryState!==null){if(queryState&&typeof extension.setActive==='function'){extension.setActive();}
return;}}
manualStateChecks.push(extension);});parentNode=MediumEditor.selection.getSelectedParentElement(selectionRange);if(!this.getEditorElements().some(function(element){return MediumEditor.util.isDescendant(element,parentNode,true);})){return;}
while(parentNode){manualStateChecks.forEach(updateExtensionState);if(MediumEditor.util.isMediumEditorElement(parentNode)){break;}
parentNode=parentNode.parentNode;}},positionToolbarIfShown:function(){if(this.isDisplayed()){this.setToolbarPosition();}},setToolbarPosition:function(){var container=this.base.getFocusedElement(),selection=this.window.getSelection(),anchorPreview;if(!container){return this;}
if(this.static&&!this.relativeContainer){this.showToolbar();this.positionStaticToolbar(container);}else if(!selection.isCollapsed){this.showToolbar();if(!this.relativeContainer){this.positionToolbar(selection);}}
anchorPreview=this.base.getExtensionByName('anchor-preview');if(anchorPreview&&typeof anchorPreview.hidePreview==='function'){anchorPreview.hidePreview();}},positionStaticToolbar:function(container){this.getToolbarElement().style.left='0';var scrollTop=(this.document.documentElement&&this.document.documentElement.scrollTop)||this.document.body.scrollTop,windowWidth=this.window.innerWidth,toolbarElement=this.getToolbarElement(),containerRect=container.getBoundingClientRect(),containerTop=containerRect.top+scrollTop,containerCenter=(containerRect.left+(containerRect.width/2)),toolbarHeight=toolbarElement.offsetHeight,toolbarWidth=toolbarElement.offsetWidth,halfOffsetWidth=toolbarWidth/2,targetLeft;if(this.sticky){if(scrollTop>(containerTop+container.offsetHeight-toolbarHeight)){toolbarElement.style.top=(containerTop+container.offsetHeight-toolbarHeight)+'px';toolbarElement.classList.remove('medium-editor-sticky-toolbar');}else if(scrollTop>(containerTop-toolbarHeight)){toolbarElement.classList.add('medium-editor-sticky-toolbar');toolbarElement.style.top='0px';}else{toolbarElement.classList.remove('medium-editor-sticky-toolbar');toolbarElement.style.top=containerTop-toolbarHeight+'px';}}else{toolbarElement.style.top=containerTop-toolbarHeight+'px';}
switch(this.align){case'left':targetLeft=containerRect.left;break;case'right':targetLeft=containerRect.right-toolbarWidth;break;case'center':targetLeft=containerCenter-halfOffsetWidth;break;}
if(targetLeft<0){targetLeft=0;}else if((targetLeft+toolbarWidth)>windowWidth){targetLeft=(windowWidth-Math.ceil(toolbarWidth)-1);}
toolbarElement.style.left=targetLeft+'px';},positionToolbar:function(selection){this.getToolbarElement().style.left='0';var windowWidth=this.window.innerWidth,range=selection.getRangeAt(0),boundary=range.getBoundingClientRect(),middleBoundary=(boundary.left+boundary.right)/2,toolbarElement=this.getToolbarElement(),toolbarHeight=toolbarElement.offsetHeight,toolbarWidth=toolbarElement.offsetWidth,halfOffsetWidth=toolbarWidth/2,buttonHeight=50,defaultLeft=this.diffLeft-halfOffsetWidth;if(boundary.top<buttonHeight){toolbarElement.classList.add('medium-toolbar-arrow-over');toolbarElement.classList.remove('medium-toolbar-arrow-under');toolbarElement.style.top=buttonHeight+boundary.bottom-this.diffTop+this.window.pageYOffset-toolbarHeight+'px';}else{toolbarElement.classList.add('medium-toolbar-arrow-under');toolbarElement.classList.remove('medium-toolbar-arrow-over');toolbarElement.style.top=boundary.top+this.diffTop+this.window.pageYOffset-toolbarHeight+'px';}
if(middleBoundary<halfOffsetWidth){toolbarElement.style.left=defaultLeft+halfOffsetWidth+'px';}else if((windowWidth-middleBoundary)<halfOffsetWidth){toolbarElement.style.left=windowWidth+defaultLeft-halfOffsetWidth+'px';}else{toolbarElement.style.left=defaultLeft+middleBoundary+'px';}}});MediumEditor.extensions.toolbar=Toolbar;}());(function(){'use strict';var ImageDragging=MediumEditor.Extension.extend({init:function(){MediumEditor.Extension.prototype.init.apply(this,arguments);this.subscribe('editableDrag',this.handleDrag.bind(this));this.subscribe('editableDrop',this.handleDrop.bind(this));},handleDrag:function(event){var className='medium-editor-dragover';event.preventDefault();event.dataTransfer.dropEffect='copy';if(event.type==='dragover'){event.target.classList.add(className);}else if(event.type==='dragleave'){event.target.classList.remove(className);}},handleDrop:function(event){var className='medium-editor-dragover',files;event.preventDefault();event.stopPropagation();if(event.dataTransfer.files){files=Array.prototype.slice.call(event.dataTransfer.files,0);files.some(function(file){if(file.type.match('image')){var fileReader,id;fileReader=new FileReader();fileReader.readAsDataURL(file);id='medium-img-'+(+new Date());MediumEditor.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+id+'" />');fileReader.onload=function(){var img=this.document.getElementById(id);if(img){img.removeAttribute('id');img.removeAttribute('class');img.src=fileReader.result;}}.bind(this);}}.bind(this));}
event.target.classList.remove(className);}});MediumEditor.extensions.imageDragging=ImageDragging;}());(function(){'use strict';function handleDisableExtraSpaces(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),textContent=node.textContent,caretPositions=MediumEditor.selection.getCaretOffsets(node);if((textContent[caretPositions.left-1]===undefined)||(textContent[caretPositions.left-1]===' ')||(textContent[caretPositions.left]===undefined)){event.preventDefault();}}
function handleDisabledEnterKeydown(event,element){if(this.options.disableReturn||element.getAttribute('data-disable-return')){event.preventDefault();}else if(this.options.disableDoubleReturn||element.getAttribute('data-disable-double-return')){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument);if((node&&node.textContent.trim()===''&&node.nodeName.toLowerCase()!=='li')||(node.previousElementSibling&&node.previousElementSibling.nodeName.toLowerCase()!=='br'&&node.previousElementSibling.textContent.trim()==='')){event.preventDefault();}}}
function handleTabKeydown(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tag=node&&node.nodeName.toLowerCase();if(tag==='pre'){event.preventDefault();MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,'    ');}
if(MediumEditor.util.isListItem(node)){event.preventDefault();if(event.shiftKey){this.options.ownerDocument.execCommand('outdent',false,null);}else{this.options.ownerDocument.execCommand('indent',false,null);}}}
function handleBlockDeleteKeydowns(event){var p,node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tagName=node.nodeName.toLowerCase(),isEmpty=/^(\s+|<br\/?>)?$/i,isHeader=/h\d/i;if(MediumEditor.util.isKey(event,[MediumEditor.util.keyCode.BACKSPACE,MediumEditor.util.keyCode.ENTER])&&node.previousElementSibling&&isHeader.test(tagName)&&MediumEditor.selection.getCaretOffsets(node).left===0){if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&isEmpty.test(node.previousElementSibling.innerHTML)){node.previousElementSibling.parentNode.removeChild(node.previousElementSibling);event.preventDefault();}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)){p=this.options.ownerDocument.createElement('p');p.innerHTML='<br>';node.previousElementSibling.parentNode.insertBefore(p,node);event.preventDefault();}}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.DELETE)&&node.nextElementSibling&&node.previousElementSibling&&!isHeader.test(tagName)&&isEmpty.test(node.innerHTML)&&isHeader.test(node.nextElementSibling.nodeName.toLowerCase())){MediumEditor.selection.moveCursor(this.options.ownerDocument,node.nextElementSibling);node.previousElementSibling.parentNode.removeChild(node);event.preventDefault();}else if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.BACKSPACE)&&tagName==='li'&&isEmpty.test(node.innerHTML)&&!node.previousElementSibling&&!node.parentElement.previousElementSibling&&node.nextElementSibling&&node.nextElementSibling.nodeName.toLowerCase()==='li'){p=this.options.ownerDocument.createElement('p');p.innerHTML='<br>';node.parentElement.parentElement.insertBefore(p,node.parentElement);MediumEditor.selection.moveCursor(this.options.ownerDocument,p);node.parentElement.removeChild(node);event.preventDefault();}}
function handleKeyup(event){var node=MediumEditor.selection.getSelectionStart(this.options.ownerDocument),tagName;if(!node){return;}
if(MediumEditor.util.isMediumEditorElement(node)&&node.children.length===0){this.options.ownerDocument.execCommand('formatBlock',false,'p');}
if(MediumEditor.util.isKey(event,MediumEditor.util.keyCode.ENTER)&&!MediumEditor.util.isListItem(node)){tagName=node.nodeName.toLowerCase();if(tagName==='a'){this.options.ownerDocument.execCommand('unlink',false,null);}else if(!event.shiftKey&&!event.ctrlKey){if(!/h\d/.test(tagName)){this.options.ownerDocument.execCommand('formatBlock',false,'p');}}}}
function addToEditors(win){if(!win._mediumEditors){win._mediumEditors=[null];}
if(!this.id){this.id=win._mediumEditors.length;}
win._mediumEditors[this.id]=this;}
function removeFromEditors(win){if(!win._mediumEditors||!win._mediumEditors[this.id]){return;}
win._mediumEditors[this.id]=null;}
function createElementsArray(selector){if(!selector){selector=[];}
if(typeof selector==='string'){selector=this.options.ownerDocument.querySelectorAll(selector);}
if(MediumEditor.util.isElement(selector)){selector=[selector];}
var elements=Array.prototype.slice.apply(selector);this.elements=[];elements.forEach(function(element,index){if(element.nodeName.toLowerCase()==='textarea'){this.elements.push(createContentEditable.call(this,element,index));}else{this.elements.push(element);}},this);}
function setExtensionDefaults(extension,defaults){Object.keys(defaults).forEach(function(prop){if(extension[prop]===undefined){extension[prop]=defaults[prop];}});return extension;}
function initExtension(extension,name,instance){var extensionDefaults={'window':instance.options.contentWindow,'document':instance.options.ownerDocument,'base':instance};extension=setExtensionDefaults(extension,extensionDefaults);if(typeof extension.init==='function'){extension.init();}
if(!extension.name){extension.name=name;}
return extension;}
function isToolbarEnabled(){if(this.elements.every(function(element){return!!element.getAttribute('data-disable-toolbar');})){return false;}
return this.options.toolbar!==false;}
function isAnchorPreviewEnabled(){if(!isToolbarEnabled.call(this)){return false;}
return this.options.anchorPreview!==false;}
function isPlaceholderEnabled(){return this.options.placeholder!==false;}
function isAutoLinkEnabled(){return this.options.autoLink!==false;}
function isImageDraggingEnabled(){return this.options.imageDragging!==false;}
function isKeyboardCommandsEnabled(){return this.options.keyboardCommands!==false;}
function shouldUseFileDraggingExtension(){return!this.options.extensions['imageDragging'];}
function createContentEditable(textarea,id){var div=this.options.ownerDocument.createElement('div'),now=Date.now(),uniqueId='medium-editor-'+now+'-'+id,atts=textarea.attributes;while(this.options.ownerDocument.getElementById(uniqueId)){now++;uniqueId='medium-editor-'+now+'-'+id;}
div.className=textarea.className;div.id=uniqueId;div.innerHTML=textarea.value;textarea.setAttribute('medium-editor-textarea-id',uniqueId);for(var i=0,n=atts.length;i<n;i++){if(!div.hasAttribute(atts[i].nodeName)){div.setAttribute(atts[i].nodeName,atts[i].nodeValue);}}
textarea.classList.add('medium-editor-hidden');textarea.parentNode.insertBefore(div,textarea);return div;}
function initElements(){this.elements.forEach(function(element,index){if(!this.options.disableEditing&&!element.getAttribute('data-disable-editing')){element.setAttribute('contentEditable',true);element.setAttribute('spellcheck',this.options.spellcheck);}
element.setAttribute('data-medium-editor-element',true);element.setAttribute('role','textbox');element.setAttribute('aria-multiline',true);element.setAttribute('medium-editor-index',index);if(element.hasAttribute('medium-editor-textarea-id')){this.on(element,'input',function(event){var target=event.target,textarea=target.parentNode.querySelector('textarea[medium-editor-textarea-id="'+target.getAttribute('medium-editor-textarea-id')+'"]');if(textarea){textarea.value=this.serialize()[target.id].value;}}.bind(this));}},this);}
function attachHandlers(){var i;this.subscribe('editableKeydownTab',handleTabKeydown.bind(this));this.subscribe('editableKeydownDelete',handleBlockDeleteKeydowns.bind(this));this.subscribe('editableKeydownEnter',handleBlockDeleteKeydowns.bind(this));if(this.options.disableExtraSpaces){this.subscribe('editableKeydownSpace',handleDisableExtraSpaces.bind(this));}
if(this.options.disableReturn||this.options.disableDoubleReturn){this.subscribe('editableKeydownEnter',handleDisabledEnterKeydown.bind(this));}else{for(i=0;i<this.elements.length;i+=1){if(this.elements[i].getAttribute('data-disable-return')||this.elements[i].getAttribute('data-disable-double-return')){this.subscribe('editableKeydownEnter',handleDisabledEnterKeydown.bind(this));break;}}}
if(!this.options.disableReturn){this.elements.forEach(function(element){if(!element.getAttribute('data-disable-return')){this.on(element,'keyup',handleKeyup.bind(this));}},this);}}
function initExtensions(){this.extensions=[];Object.keys(this.options.extensions).forEach(function(name){if(name!=='toolbar'&&this.options.extensions[name]){this.extensions.push(initExtension(this.options.extensions[name],name,this));}},this);if(shouldUseFileDraggingExtension.call(this)){var opts=this.options.fileDragging;if(!opts){opts={};if(!isImageDraggingEnabled.call(this)){opts.allowedTypes=[];}}
this.addBuiltInExtension('fileDragging',opts);}
var builtIns={paste:true,'anchor-preview':isAnchorPreviewEnabled.call(this),autoLink:isAutoLinkEnabled.call(this),keyboardCommands:isKeyboardCommandsEnabled.call(this),placeholder:isPlaceholderEnabled.call(this)};Object.keys(builtIns).forEach(function(name){if(builtIns[name]){this.addBuiltInExtension(name);}},this);var toolbarExtension=this.options.extensions['toolbar'];if(!toolbarExtension&&isToolbarEnabled.call(this)){var toolbarOptions=MediumEditor.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});toolbarExtension=new MediumEditor.extensions.toolbar(toolbarOptions);}
if(toolbarExtension){this.extensions.push(initExtension(toolbarExtension,'toolbar',this));}}
function mergeOptions(defaults,options){var deprecatedProperties=[['allowMultiParagraphSelection','toolbar.allowMultiParagraphSelection']];if(options){deprecatedProperties.forEach(function(pair){if(options.hasOwnProperty(pair[0])&&options[pair[0]]!==undefined){MediumEditor.util.deprecated(pair[0],pair[1],'v6.0.0');}});}
return MediumEditor.util.defaults({},options,defaults);}
function execActionInternal(action,opts){var appendAction=/^append-(.+)$/gi,justifyAction=/justify([A-Za-z]*)$/g,match;match=appendAction.exec(action);if(match){return MediumEditor.util.execFormatBlock(this.options.ownerDocument,match[1]);}
if(action==='fontSize'){return this.options.ownerDocument.execCommand('fontSize',false,opts.size);}
if(action==='fontName'){return this.options.ownerDocument.execCommand('fontName',false,opts.name);}
if(action==='createLink'){return this.createLink(opts);}
if(action==='image'){return this.options.ownerDocument.execCommand('insertImage',false,this.options.contentWindow.getSelection());}
if(justifyAction.exec(action)){var result=this.options.ownerDocument.execCommand(action,false,null),parentNode=MediumEditor.selection.getSelectedParentElement(MediumEditor.selection.getSelectionRange(this.options.ownerDocument));if(parentNode){cleanupJustifyDivFragments.call(this,MediumEditor.util.getTopBlockContainer(parentNode));}
return result;}
return this.options.ownerDocument.execCommand(action,false,null);}
function cleanupJustifyDivFragments(blockContainer){if(!blockContainer){return;}
var textAlign,childDivs=Array.prototype.slice.call(blockContainer.childNodes).filter(function(element){var isDiv=element.nodeName.toLowerCase()==='div';if(isDiv&&!textAlign){textAlign=element.style.textAlign;}
return isDiv;});if(childDivs.length){this.saveSelection();childDivs.forEach(function(div){if(div.style.textAlign===textAlign){var lastChild=div.lastChild;if(lastChild){MediumEditor.util.unwrap(div,this.options.ownerDocument);var br=this.options.ownerDocument.createElement('BR');lastChild.parentNode.insertBefore(br,lastChild.nextSibling);}}},this);blockContainer.style.textAlign=textAlign;this.restoreSelection();}}
MediumEditor.prototype={init:function(elements,options){this.options=mergeOptions.call(this,this.defaults,options);this.origElements=elements;if(!this.options.elementsContainer){this.options.elementsContainer=this.options.ownerDocument.body;}
return this.setup();},setup:function(){if(this.isActive){return;}
createElementsArray.call(this,this.origElements);if(this.elements.length===0){return;}
this.isActive=true;addToEditors.call(this,this.options.contentWindow);this.events=new MediumEditor.Events(this);initElements.call(this);initExtensions.call(this);attachHandlers.call(this);},destroy:function(){if(!this.isActive){return;}
this.isActive=false;this.extensions.forEach(function(extension){if(typeof extension.destroy==='function'){extension.destroy();}},this);this.events.destroy();this.elements.forEach(function(element){if(this.options.spellcheck){element.innerHTML=element.innerHTML;}
element.removeAttribute('contentEditable');element.removeAttribute('spellcheck');element.removeAttribute('data-medium-editor-element');element.removeAttribute('role');element.removeAttribute('aria-multiline');element.removeAttribute('medium-editor-index');if(element.hasAttribute('medium-editor-textarea-id')){var textarea=element.parentNode.querySelector('textarea[medium-editor-textarea-id="'+element.getAttribute('medium-editor-textarea-id')+'"]');if(textarea){textarea.classList.remove('medium-editor-hidden');}
if(element.parentNode){element.parentNode.removeChild(element);}}},this);this.elements=[];removeFromEditors.call(this,this.options.contentWindow);},on:function(target,event,listener,useCapture){this.events.attachDOMEvent(target,event,listener,useCapture);},off:function(target,event,listener,useCapture){this.events.detachDOMEvent(target,event,listener,useCapture);},subscribe:function(event,listener){this.events.attachCustomEvent(event,listener);},unsubscribe:function(event,listener){this.events.detachCustomEvent(event,listener);},trigger:function(name,data,editable){this.events.triggerCustomEvent(name,data,editable);},delay:function(fn){var self=this;return setTimeout(function(){if(self.isActive){fn();}},this.options.delay);},serialize:function(){var i,elementid,content={};for(i=0;i<this.elements.length;i+=1){elementid=(this.elements[i].id!=='')?this.elements[i].id:'element-'+i;content[elementid]={value:this.elements[i].innerHTML.trim()};}
return content;},getExtensionByName:function(name){var extension;if(this.extensions&&this.extensions.length){this.extensions.some(function(ext){if(ext.name===name){extension=ext;return true;}
return false;});}
return extension;},addBuiltInExtension:function(name,opts){var extension=this.getExtensionByName(name),merged;if(extension){return extension;}
switch(name){case'anchor':merged=MediumEditor.util.extend({},this.options.anchor,opts);extension=new MediumEditor.extensions.anchor(merged);break;case'anchor-preview':extension=new MediumEditor.extensions.anchorPreview(this.options.anchorPreview);break;case'autoLink':extension=new MediumEditor.extensions.autoLink();break;case'fileDragging':extension=new MediumEditor.extensions.fileDragging(opts);break;case'fontname':extension=new MediumEditor.extensions.fontName(this.options.fontName);break;case'fontsize':extension=new MediumEditor.extensions.fontSize(opts);break;case'keyboardCommands':extension=new MediumEditor.extensions.keyboardCommands(this.options.keyboardCommands);break;case'paste':extension=new MediumEditor.extensions.paste(this.options.paste);break;case'placeholder':extension=new MediumEditor.extensions.placeholder(this.options.placeholder);break;default:if(MediumEditor.extensions.button.isBuiltInButton(name)){if(opts){merged=MediumEditor.util.defaults({},opts,MediumEditor.extensions.button.prototype.defaults[name]);extension=new MediumEditor.extensions.button(merged);}else{extension=new MediumEditor.extensions.button(name);}}}
if(extension){this.extensions.push(initExtension(extension,name,this));}
return extension;},stopSelectionUpdates:function(){this.preventSelectionUpdates=true;},startSelectionUpdates:function(){this.preventSelectionUpdates=false;},checkSelection:function(){var toolbar=this.getExtensionByName('toolbar');if(toolbar){toolbar.checkState();}
return this;},queryCommandState:function(action){var fullAction=/^full-(.+)$/gi,match,queryState=null;match=fullAction.exec(action);if(match){action=match[1];}
try{queryState=this.options.ownerDocument.queryCommandState(action);}catch(exc){queryState=null;}
return queryState;},execAction:function(action,opts){var fullAction=/^full-(.+)$/gi,match,result;match=fullAction.exec(action);if(match){this.saveSelection();this.selectAllContents();result=execActionInternal.call(this,match[1],opts);this.restoreSelection();}else{result=execActionInternal.call(this,action,opts);}
if(action==='insertunorderedlist'||action==='insertorderedlist'){MediumEditor.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement());}
this.checkSelection();return result;},getSelectedParentElement:function(range){if(range===undefined){range=this.options.contentWindow.getSelection().getRangeAt(0);}
return MediumEditor.selection.getSelectedParentElement(range);},selectAllContents:function(){var currNode=MediumEditor.selection.getSelectionElement(this.options.contentWindow);if(currNode){while(currNode.children.length===1){currNode=currNode.children[0];}
this.selectElement(currNode);}},selectElement:function(element){MediumEditor.selection.selectNode(element,this.options.ownerDocument);var selElement=MediumEditor.selection.getSelectionElement(this.options.contentWindow);if(selElement){this.events.focusElement(selElement);}},getFocusedElement:function(){var focused;this.elements.some(function(element){if(!focused&&element.getAttribute('data-medium-focused')){focused=element;}
return!!focused;},this);return focused;},exportSelection:function(){var selectionElement=MediumEditor.selection.getSelectionElement(this.options.contentWindow),editableElementIndex=this.elements.indexOf(selectionElement),selectionState=null;if(editableElementIndex>=0){selectionState=MediumEditor.selection.exportSelection(selectionElement,this.options.ownerDocument);}
if(selectionState!==null&&editableElementIndex!==0){selectionState.editableElementIndex=editableElementIndex;}
return selectionState;},saveSelection:function(){this.selectionState=this.exportSelection();},importSelection:function(selectionState,favorLaterSelectionAnchor){if(!selectionState){return;}
var editableElement=this.elements[selectionState.editableElementIndex||0];MediumEditor.selection.importSelection(selectionState,editableElement,this.options.ownerDocument,favorLaterSelectionAnchor);},restoreSelection:function(){this.importSelection(this.selectionState);},createLink:function(opts){var currentEditor=MediumEditor.selection.getSelectionElement(this.options.contentWindow),customEvent={};if(this.elements.indexOf(currentEditor)===-1){return;}
try{this.events.disableCustomEvent('editableInput');if(opts.url&&opts.url.trim().length>0){var currentSelection=this.options.contentWindow.getSelection();if(currentSelection){var currRange=currentSelection.getRangeAt(0),commonAncestorContainer=currRange.commonAncestorContainer,exportedSelection,startContainerParentElement,endContainerParentElement,textNodes;if(currRange.endContainer.nodeType===3&&currRange.startContainer.nodeType!==3&&currRange.startOffset===0&&currRange.startContainer.firstChild===currRange.endContainer){commonAncestorContainer=currRange.endContainer;}
startContainerParentElement=MediumEditor.util.getClosestBlockContainer(currRange.startContainer);endContainerParentElement=MediumEditor.util.getClosestBlockContainer(currRange.endContainer);if(commonAncestorContainer.nodeType!==3&&startContainerParentElement===endContainerParentElement){var parentElement=(startContainerParentElement||currentEditor),fragment=this.options.ownerDocument.createDocumentFragment();this.execAction('unlink');exportedSelection=this.exportSelection();fragment.appendChild(parentElement.cloneNode(true));if(currentEditor===parentElement){MediumEditor.selection.select(this.options.ownerDocument,parentElement.firstChild,0,parentElement.lastChild,parentElement.lastChild.nodeType===3?parentElement.lastChild.nodeValue.length:parentElement.lastChild.childNodes.length);}else{MediumEditor.selection.select(this.options.ownerDocument,parentElement,0,parentElement,parentElement.childNodes.length);}
var modifiedExportedSelection=this.exportSelection();textNodes=MediumEditor.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,fragment,{start:exportedSelection.start-modifiedExportedSelection.start,end:exportedSelection.end-modifiedExportedSelection.start,editableElementIndex:exportedSelection.editableElementIndex});if(textNodes.length===0){fragment=this.options.ownerDocument.createDocumentFragment();fragment.appendChild(commonAncestorContainer.cloneNode(true));textNodes=[fragment.firstChild.firstChild,fragment.firstChild.lastChild];}
MediumEditor.util.createLink(this.options.ownerDocument,textNodes,opts.url.trim());var leadingWhitespacesCount=(fragment.firstChild.innerHTML.match(/^\s+/)||[''])[0].length;MediumEditor.util.insertHTMLCommand(this.options.ownerDocument,fragment.firstChild.innerHTML.replace(/^\s+/,''));exportedSelection.start-=leadingWhitespacesCount;exportedSelection.end-=leadingWhitespacesCount;this.importSelection(exportedSelection);}else{this.options.ownerDocument.execCommand('createLink',false,opts.url);}
if(this.options.targetBlank||opts.target==='_blank'){MediumEditor.util.setTargetBlank(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),opts.url);}
if(opts.buttonClass){MediumEditor.util.addClassToAnchors(MediumEditor.selection.getSelectionStart(this.options.ownerDocument),opts.buttonClass);}}}
if(this.options.targetBlank||opts.target==='_blank'||opts.buttonClass){customEvent=this.options.ownerDocument.createEvent('HTMLEvents');customEvent.initEvent('input',true,true,this.options.contentWindow);for(var i=0;i<this.elements.length;i+=1){this.elements[i].dispatchEvent(customEvent);}}}finally{this.events.enableCustomEvent('editableInput');}
this.events.triggerCustomEvent('editableInput',customEvent,currentEditor);},cleanPaste:function(text){this.getExtensionByName('paste').cleanPaste(text);},pasteHTML:function(html,options){this.getExtensionByName('paste').pasteHTML(html,options);},setContent:function(html,index){index=index||0;if(this.elements[index]){var target=this.elements[index];target.innerHTML=html;this.events.updateInput(target,{target:target,currentTarget:target});}}};}());(function(){MediumEditor.prototype.defaults={activeButtonClass:'medium-editor-button-active',buttonLabels:false,delay:0,disableReturn:false,disableDoubleReturn:false,disableExtraSpaces:false,disableEditing:false,autoLink:false,elementsContainer:false,contentWindow:window,ownerDocument:document,targetBlank:false,extensions:{},spellcheck:true};})();MediumEditor.parseVersionString=function(release){var split=release.split('-'),version=split[0].split('.'),preRelease=(split.length>1)?split[1]:'';return{major:parseInt(version[0],10),minor:parseInt(version[1],10),revision:parseInt(version[2],10),preRelease:preRelease,toString:function(){return[version[0],version[1],version[2]].join('.')+(preRelease?'-'+preRelease:'');}};};MediumEditor.version=MediumEditor.parseVersionString.call(this,({'version':'5.10.0'}).version);return MediumEditor;}()));