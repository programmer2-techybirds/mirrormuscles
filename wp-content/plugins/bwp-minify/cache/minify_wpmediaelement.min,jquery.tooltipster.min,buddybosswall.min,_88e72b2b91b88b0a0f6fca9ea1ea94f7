!function(a,b){function c(){function a(){"undefined"!=typeof _wpmejsSettings&&(c=b.extend(!0,{},_wpmejsSettings)),c.success=c.success||function(a){var b,c;"flash"===a.pluginType&&(b=a.attributes.autoplay&&"false"!==a.attributes.autoplay,c=a.attributes.loop&&"false"!==a.attributes.loop,b&&a.addEventListener("canplay",function(){a.play()},!1),c&&a.addEventListener("ended",function(){a.play()},!1))},b(".wp-audio-shortcode, .wp-video-shortcode").not(".mejs-container").filter(function(){return!b(this).parent().hasClass("mejs-mediaelement")}).mediaelementplayer(c)}var c={};return{initialize:a}}a.wp=a.wp||{},mejs.plugins.silverlight[0].types.push("video/x-ms-wmv"),mejs.plugins.silverlight[0].types.push("audio/x-ms-wma"),a.wp.mediaelement=new c,b(a.wp.mediaelement.initialize)}(window,jQuery);
;/*! 
 * BuddyBoss Wall JavaScript Library 
 * @package BuddyBoss Wall 
 */!function(a,b,c){function d(b,c){this.bodyOverflowX,this.checkInterval=null,this.content,this.$el=a(b),this.elProxyPosition,this.$elProxy,this.enabled=!0,this.options=a.extend({},j,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()}function e(b,c){var d=!0;return a.each(b,function(a,e){if("undefined"==typeof c[a]||b[a]!==c[a])return d=!1,!1}),d}function f(){return!l&&k}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",j={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={init:function(){var b=this;if(c.querySelector){if(null!==b.options.content)b.setContent(b.options.content);else{var d=b.$el.attr("title");"undefined"==typeof d&&(d=null),b.setContent(d)}var e=b.options.functionInit(b.$el,b.content);"undefined"!=typeof e&&b.setContent(e),b.$el.removeAttr("title").addClass("tooltipstered"),!k&&b.options.iconDesktop||k&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!0,b.showTooltip())}).on("mouseleave."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!1)}),k&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b.showTooltipNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){f()&&!b.options.touchDevices||b.showTooltip()})}},showTooltip:function(){var a=this;"shown"!=a.status&&"appearing"!=a.status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a.showTooltipNow()},a.options.delay):a.showTooltipNow())},showTooltipNow:function(){var c=this;clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,c.enabled&&null!==c.content&&(c.options.onlyOne&&a(".tooltipstered").not(c.$el).each(function(b,c){var d=a(c),e=d[h]("status"),f=d[h]("option","autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d[h]("hide")}),c.options.functionBefore(c.$elProxy,function(){if("hidden"!==c.status){var d=0;"disappearing"===c.status&&(c.status="appearing",g()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.stop().fadeIn(function(){c.status="shown"}))}else{c.status="appearing";var d=c.options.speed;c.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var e="tooltipster-"+c.options.animation,f="-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;",h=c.options.fixedWidth>0?"width:"+Math.round(c.options.fixedWidth)+"px;":"",i=c.options.maxWidth>0?"max-width:"+Math.round(c.options.maxWidth)+"px;":"",j=c.options.interactive?"pointer-events: auto;":"";if(c.$tooltip=a('<div class="tooltipster-base '+c.options.theme+'" style="'+h+" "+i+" "+j+" "+f+'"><div class="tooltipster-content"></div></div>'),g()&&c.$tooltip.addClass(e),c.insertContent(),c.$tooltip.appendTo("body"),c.positionTooltip(),c.options.functionReady(c.$el,c.$tooltip),g()?(c.$tooltip.addClass(e+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.css("display","none").fadeIn(c.options.speed,function(){c.status="shown"}),c.setCheckInterval(),a(b).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.positionTooltip()}),c.options.autoClose)if(a("body").off("."+c.namespace),"hover"==c.options.trigger)if(k&&setTimeout(function(){a("body").on("touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive){k&&c.$tooltip.on("touchstart."+c.namespace,function(a){a.stopPropagation()});var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l),l=setTimeout(function(){c.hideTooltip()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hideTooltip()});else"click"==c.options.trigger&&(setTimeout(function(){a("body").on("click."+c.namespace+" touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive&&c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(a){a.stopPropagation()}))}c.options.timer>0&&(c.timerHide=setTimeout(function(){c.timerHide=null,c.hideTooltip()},c.options.timer+d))}))},setCheckInterval:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.status||0===a("body").find(b.$tooltip).length)"shown"!=b.status&&"appearing"!=b.status||b.hideTooltip(),b.cancelCheckInterval();else if(b.options.positionTracker){var c=b.positionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||b.positionTooltip()}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(){var c=this;if(clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,"shown"==c.status||"appearing"==c.status){c.status="disappearing";var d=function(){c.status="hidden",c.$tooltip.remove(),c.$tooltip=null,a(b).off("."+c.namespace),a("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX),c.$elProxy.off("."+c.namespace+"-autoClose"),c.options.functionAfter(c.$elProxy)};g()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(d)):c.$tooltip.stop().fadeOut(c.options.speed,d)}},setContent:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.content=a},insertContent:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.content||a.options.contentAsHTML?b.empty().append(a.content):b.text(a.content)},updateTooltip:function(a){var b=this;b.setContent(a),null!==b.content?"hidden"!==b.status&&(b.insertContent(),b.positionTooltip(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hideTooltip()},positionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},positionTooltip:function(){function c(){var c=a(b).scrollLeft();D-c<0&&(f=D-c,D=c),D+j-c>g&&(f=D-(g+c-j),D=g+c-j)}function d(c,d){h.offset.top-a(b).scrollTop()-l-G-12<0&&d.indexOf("top")>-1&&(I=c),h.offset.top+h.dimension.height+l+12+G>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(I=c,F=h.offset.top-l-G-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e.positionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,j=e.$tooltip.outerWidth(!1),k=e.$tooltip.innerWidth()+1,l=e.$tooltip.outerHeight(!1);if(e.$elProxy.is("area")){var m=e.$elProxy.attr("shape"),n=e.$elProxy.parent().attr("name"),o=a('img[usemap="#'+n+'"]'),p=o.offset().left,q=o.offset().top,r=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==m){var s=parseInt(r[0]),t=parseInt(r[1]),u=parseInt(r[2]);h.dimension.height=2*u,h.dimension.width=2*u,h.offset.top=q+t-u,h.offset.left=p+s-u}else if("rect"==m){var s=parseInt(r[0]),t=parseInt(r[1]),v=parseInt(r[2]),w=parseInt(r[3]);h.dimension.height=w-t,h.dimension.width=v-s,h.offset.top=q+t,h.offset.left=p+s}else if("poly"==m){var x=0,y=0,z=0,A=0,B="even";for(i=0;i<r.length;i++){var C=parseInt(r[i]);"even"==B?(C>z&&(z=C,0===i&&(x=z)),C<x&&(x=C),B="odd"):(C>A&&(A=C,1==i&&(y=A)),C<y&&(y=C),B="even")}h.dimension.height=A-y,h.dimension.width=z-x,h.offset.top=q+y,h.offset.left=p+x}else h.dimension.height=o.outerHeight(!1),h.dimension.width=o.outerWidth(!1),h.offset.top=q,h.offset.left=p}0===e.options.fixedWidth&&e.$tooltip.css({width:Math.round(k)+"px","padding-left":"0px","padding-right":"0px"});var D=0,E=0,F=0,G=parseInt(e.options.offsetY),H=parseInt(e.options.offsetX),I=e.options.position;if("top"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left+H-J/2,F=h.offset.top-l-G-12,c(),d("bottom","top")}if("top-left"==I&&(D=h.offset.left+H,F=h.offset.top-l-G-12,c(),d("bottom-left","top-left")),"top-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top-l-G-12,c(),d("bottom-right","top-right")),"bottom"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left-J/2+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top","bottom")}if("bottom-left"==I&&(D=h.offset.left+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top-left","bottom-left")),"bottom-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top+h.dimension.height+G+12,c(),d("top-right","bottom-right")),"left"==I){D=h.offset.left-H-j-12,E=h.offset.left+H+h.dimension.width+12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D<0&&E+j>g){var L=2*parseFloat(e.$tooltip.css("border-width")),M=j+D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),D=h.offset.left-H-M-12-L,K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D<0&&(D=h.offset.left+H+h.dimension.width+12,f="left")}if("right"==I){D=h.offset.left+H+h.dimension.width+12,E=h.offset.left-H-j-12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D+j>g&&E<0){var L=2*parseFloat(e.$tooltip.css("border-width")),M=g-D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D+j>g&&(D=h.offset.left-H-j-12,f="right")}if(e.options.arrow){var N="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1)var O=e.$tooltip.css("background-color");else var O=e.options.arrowColor;if(f?"left"==f?(N="tooltipster-arrow-right",f=""):"right"==f?(N="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==I||"top-left"==I||"top-right"==I)var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)var P=parseFloat(e.$tooltip.css("border-top-width")),Q=e.$tooltip.css("border-top-color");else if("left"==I)var P=parseFloat(e.$tooltip.css("border-right-width")),Q=e.$tooltip.css("border-right-color");else if("right"==I)var P=parseFloat(e.$tooltip.css("border-left-width")),Q=e.$tooltip.css("border-left-color");else var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");P>1&&P++;var R="";if(0!==P){var S="",T="border-color: "+Q+";";N.indexOf("bottom")!==-1?S="margin-top: -"+Math.round(P)+"px;":N.indexOf("top")!==-1?S="margin-bottom: -"+Math.round(P)+"px;":N.indexOf("left")!==-1?S="margin-right: -"+Math.round(P)+"px;":N.indexOf("right")!==-1&&(S="margin-left: -"+Math.round(P)+"px;"),R='<span class="tooltipster-arrow-border" style="'+S+" "+T+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var U='<div class="'+N+' tooltipster-arrow" style="'+f+'">'+R+'<span style="border-color:'+O+';"></span></div>';e.$tooltip.append(U)}e.$tooltip.css({top:Math.round(F)+"px",left:Math.round(D)+"px"})}}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(j,b[1]);break;default:c=!1}return!!c||this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster");if(!c)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');switch(b[0]){case"content":case"update":if("undefined"==typeof b[1])return e=c.content,!1;c.updateTooltip(b[1]);break;case"destroy":c.hideTooltip(),c.$el[0]!==c.$elProxy[0]&&c.$elProxy.remove();var d="string"==typeof c.content?c.content:a("<div></div>").append(c.content).html();c.$el.removeClass("tooltipstered").attr("title",d).removeData("tooltipster").off("."+c.namespace);break;case"disable":c.hideTooltip(),c.enabled=!1;break;case"elementIcon":return e=c.$el[0]!==c.$elProxy[0]?c.$elProxy[0]:void 0,!1;case"elementTooltip":return e=c.$tooltip?c.$tooltip[0]:void 0,!1;case"enable":c.enabled=!0;break;case"hide":c.hideTooltip();break;case"option":e=c.options[b[1]];break;case"reposition":c.positionTooltip();break;case"show":c.showTooltipNow();break;case"status":return e=c.status,!1;default:throw new Error('Unknown method .tooltipster("'+b[0]+'")')}}),"#*$~&"!==e?e:this}return this.each(function(){a(this).data("tooltipster")||a(this).data("tooltipster",new d(this,b[0]))})};var k=!!("ontouchstart"in b),l=!1;a("body").one("mousemove",function(){l=!0})}(jQuery,window,document);
;/*! 
 * BuddyBoss Wall JavaScript Library 
 * @package BuddyBoss Wall 
 */function budyboss_wall_comment_like_unlike(a){if(jq=jQuery,a=jq(a),a.hasClass("fav-comment")||a.hasClass("unfav-comment")){var b=a.hasClass("fav-comment")?"fav":"unfav",c=a.closest("[id^=acomment-]"),d=c.attr("id").substr(9,c.attr("id").length);a.addClass("loading"),jq.post(ajaxurl,{action:"activity_mark_"+b,cookie:bp_get_cookies(),id:d,item_type:"comment"},function(c){a.removeClass("loading"),a.fadeOut(200,function(){jq(this).html(c),jq(this).attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),jq(this).fadeIn(200)}),"fav"==b?(jq(".item-list-tabs #activity-favs-personal-li").length||(jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)),a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("unfav-comment"),a.addClass("fav-comment"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1),Number(jq(".item-list-tabs ul #activity-favorites span").html())||(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove()))})}return!1}function bb_url_scrapeURL(a){var b="";if(a.indexOf("http://")>=0?b=bb_url_getUrl("http://",a):a.indexOf("https://")>=0?b=bb_url_getUrl("https://",a):a.indexOf("www.")>=0&&(b=bb_url_getUrl("www",a)),""!=b){var c=document.createElement("a");c.href=b;var d=c.hostname;window.Code.BuddyBoss_Wall_Util.state.excluded_oembed_hosts.indexOf(d)!=-1&&(b="")}return""===b?(jQuery("#bb-url-scrapper").hide(),void jQuery(".bb-url-scrapper-container").hide()):void bb_load_url_preview(b)}function bb_load_url_preview(a){bb_is_valid_url(a)&&bb_url_getUrlData(a)}function bb_url_abortTimer(){null!=bb_url_tid&&clearTimeout(bb_url_tid)}function bb_url_getUrlData(a){jQuery("#whats-new-submit input").prop("disabled",!0),jQuery(".bb-url-scrapper-container").show(),jQuery(".bb-url-scrapper-loading").show(),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-error").hide();var b={action:"bb_url_parser",url:a};jQuery.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(b){if(jQuery("#whats-new-submit input").prop("disabled",!1),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1),jQuery("#bb-url-scrapper-img-holder").show(),""==b.title)return void jQuery(".bb-url-scrapper-container").hide();if(jQuery(".bb-url-scrapper-loading").hide(),""==b.error){jQuery("#bb-url-error").hide(),jQuery("#bb-url-scrapper").show(),bb_urlInUse=a;var c="";jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage",""),bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,c=b.title,jQuery("#bb-url-scrapper-title").html(c),jQuery("#bb-url-scrapper-title-hidden").val(c),jQuery("#bb-url-scrapper-url").text(a),jQuery("#bb-url-scrapper-url-hidden").val(a),jQuery("#bb-url-scrapper-description").html(b.description),jQuery("#bb-url-scrapper-description-hidden").val(b.description),jQuery.each(b.images,function(a,b){bb_url_imgSrcArray.push(b)}),0!=bb_url_imgSrcArray.length&&jQuery("#buddyboss-media-add-photo-button").prop("disabled",!0)}else jQuery("#bb-url-error").text(b.error),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-error").show();jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text("1 of "+bb_url_imgSrcArray.length)}})}function bb_is_valid_url(a){var b=/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return b.test(a)}function bb_url_getUrl(a,b){for(var c="",d=b.indexOf(a),e=d;e<b.length&&(" "!=b[e]&&"\n"!=b[e]);e++)c+=b[e];return"www"===a&&(a="http://",c=a+c),c}var jq=$=jQuery;window.Code=window.Code||{},window.Code.BuddyBoss_Wall_Util=function(a,b,c,d){var e={state:c,lang:function(a){var a=a||"undefined key!";return c[a]||"Language key missing for: "+a}};return e}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||!1),window.Code.BuddyBoss_Wall=function(a,b,c,d){var e=c.state||{},f=(c.lang,{on:null,setup_form:function(){var a=b("#buddyboss-wall-tpl-form"),c=b("body.just-me.has-activity #item-body > .activity").first(),d=b("#whats-new-form");!d.length&&a.length&&c.length},setup_comments:function(){var a=b(".buddyboss-wall-tpl-activity-comments");a.each(function(){var a=b(this),c=a.parent().find(".activity-comments");c.length&&!a.data("buddyboss-wall-appended")&&(a.data("buddyboss-wall-appended",!0),c.prepend(a.html()))})},setup_link_previews:function(){jQuery("#whats-new").addClass("bblinkBox"),jQuery("#whats-new-textarea").append('<div class="bb-url-scrapper-container"><i class="bb-url-scrapper-loading buddyboss-wall-ajax-loader fa fa-spinner"></i><div id="bb-url-scrapper"><div id="bb-url-scrapper-img-holder"><div id="bb-url-scrapper-img"><img src="" /><a title="Cancel Preview Image" href="#" id="bbimagecloselinksuggestion"><i class="fa fa-times"></i></a></div><div class="bb-url-thumb-nav"><input type="button" id="bb-url-prevPicButton" value="<" /><input type="button" id="bb-url-nextPicButton" value=">"><div id="bb-url-scrapper-img-count"></div></div></div><div id="bb-url-scrapper-text-holder"><div id="bb-url-scrapper-title"></div><div id="bb-url-scrapper-url"></div><div id="bb-url-scrapper-description"></div><div id="bb-url-error"></div><a title="Cancel Preview" href="#" id="bbcloselinksuggestion"><i class="fa fa-times"></i></a></div></div></div>'),jQuery("#whats-new-form").append('<input type="hidden" id="bb-url-scrapper-img-hidden" name="bb-url-scrapper-img-hidden" value="" /><input type="hidden" id="bb-url-scrapper-title-hidden"  name="bb-url-scrapper-title-hidden" value="" /><input type="hidden" id="bb-url-scrapper-url-hidden" name="bb-url-scrapper-url-hidden" value="" /><input type="hidden" id="bb-url-scrapper-description-hidden" name="bb-url-scrapper-description-hidden" value="" /><input type="hidden" id="bb-url-no-scrapper" name="bb-url-no-scrapper" value="1" />'),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-nextPicButton").click(function(a){bb_url_imgArrayCounter++,bb_url_imgArrayCounter>=bb_url_imgSrcArray.length&&(bb_url_imgArrayCounter=0),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bb-url-prevPicButton").click(function(a){bb_url_imgArrayCounter--,bb_url_imgArrayCounter<0&&(bb_url_imgArrayCounter=bb_url_imgSrcArray.length-1),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bbimagecloselinksuggestion").click(function(a){a.preventDefault(),jQuery("#bb-url-scrapper-img-holder").hide(),jQuery("#bb-url-scrapper-img-hidden").val(""),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1)}),jQuery("#bbcloselinksuggestion").click(function(a){a.preventDefault(),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-no-scrapper").val("1"),jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage","")}),jQuery(".bblinkBox").on("keyup",function(a){"1"===jQuery("#bb-url-no-scrapper").val()&&(urlText=this.value,bb_url_abortTimer(),bb_url_tid=setTimeout(function(){bb_url_scrapeURL(urlText)},1e3),13==a.which&&this.rows++)})},setup:function(){f.on=!0,b.ajaxPrefilter(f.prefilter),b(document).ajaxSuccess(function(a){f.setup_comments(),setTimeout(f.setup_comments,205),setTimeout(f.setup_comments,500)}),f.setup_form(),f.setup_comments(),e.enabled_link_preview&&f.setup_link_previews();var a=b("#buddyboss-wall-tpl-greeting").html(),c=b("#whats-new-form .activity-greeting");c.length&&a&&c.html(a).show()},teardown:function(){f.on=!1},prefilter:function(a,c,d){item_type=c.data&&c.data.item_type||"";var g,h=parseInt(c.data&&c.data.id||0),i=c.data&&c.data.action||"",j="activity_mark_fav"===i||"activity_mark_unfav"===i,k="post_update"===i,l="comment"===item_type;k&&e.enabled_link_preview&&(g=b("#bb-url-scrapper-url").html().length,g>0&&(a.data+="&bb_link_url="+encodeURIComponent(b("#bb-url-scrapper-url-hidden").val()),a.data+="&bb_link_title="+encodeURIComponent(b("#bb-url-scrapper-title-hidden").val()),a.data+="&bb_link_img="+encodeURIComponent(b("#bb-url-scrapper-img-hidden").val()),a.data+="&bb_link_description="+encodeURIComponent(b("#bb-url-scrapper-description-hidden").val()),b(".bb-url-scrapper-container").hide(),b("#bb-url-no-scrapper").val("1"),b("#bb-url-scrapper-description").text(""),b("#bb-url-scrapper-description-hidden").val(""),b("#bb-url-scrapper-title").text(""),b("#bb-url-scrapper-title-hidden").val(""),b("#bb-url-scrapper-url").text(""),b("#bb-url-scrapper-url-hidden").val(""),b("#bb-url-scrapper-img").css("backgroundImage",""))),j&&h>0&&(g=b("#activity-"+h).find(".button.loading"),type=g.hasClass("fav")?"fav":"unfav",l&&(g=b("#acomment-"+h).find(".acomment-like.loading"),type=g.hasClass("fav-comment")?"fav":"unfav"),a.success=function(a){return function(c,d,e){c[0]+c[1]==="-1"&&b.isFunction(a)?a(c):f.success(g,type,l,c,d,e)}}(a.success))},success:function(a,b,c,e,f,g){var h=!1,i="",j="",k=0,l=!1,m=e.indexOf("{")!=-1&&jQuery.parseJSON(e);if(i=m&&m.but_text?m.but_text:e,m&&m.hasOwnProperty("like_count")&&(m.like_count?(h=!0,j=m.num_likes):l=!0),a.fadeOut(200,function(){var a=jq(this),d=a.parents(".activity-item"),e=d.find(".activity-comments"),f=e.find("ul").first(),g=e.find(".activity-like-count:not(.reply-like-count)"),k=e.find("li").not(".activity-like-count"),m=j;c&&(e=a.parents(".acomment-options"),f=e.find("ul").first(),g=e.find(".activity-like-count"),k=e.find("li").not(".activity-like-count"),m=j),a.html(i),a.attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),a.fadeIn(200),g.remove(),h&&(f.length?f.prepend(m):c?e.append('<ul class="acomment-reply-like-content">'+m+"</ul>"):e.prepend("<ul>"+m+"</ul>")),l&&f.length&&!k.length&&f.remove()}),"fav"==b){var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))+1),jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),c?(a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("fav"),a.addClass("unfav")),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))-1),c?(a.removeClass("unfav-comment"),a.addClass("fav-comment")):(a.removeClass("unfav"),a.addClass("fav")),n&&jq(".item-list-tabs ul #activity-favorites span").html(k),0==k&&(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove())}"activity-favorites"==jq(".item-list-tabs li.selected").attr("id")&&a.closest(".activity-item").slideUp(100),a.removeClass("loading")}});b(document).ready(function(){f.setup(),String.prototype.startsWith=function(a){return this.match("^"+a)==a}});var g={setup:function(){f.setup()},teardown:function(){f.teardown()}};return g}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util),function(a,b,c,d){var e={ajaxResetTimeout:201},f=c.state||{},g=(c.lang,{}),h={};g.init=function(){h.document=b(document),h.document.ajaxSuccess(g.ajaxSuccessListener),g.initTooltips(),BP_DTheme&&f&&b.extend(BP_DTheme,f)},g.ajaxSuccessListener=function(b,c,d){g.destroyTooltips(),a.setTimeout(g.initTooltips,e.ajaxResetTimeout)},g.destroyTooltips=function(){h.tooltips&&h.tooltips.length&&(h.tooltips.tooltipster("destroy"),h.tooltips=null)},g.initTooltips=function(){h.tooltips=b(".buddyboss-wall-tt-others"),h.tooltips.length&&h.tooltips.tooltipster({contentAsHTML:!0,functionInit:g.getTooltipContent,interactive:!0,position:"top-left",theme:"tooltipster-buddyboss"})},g.getTooltipContent=function(a,b){var c=a.parent().find(".buddyboss-wall-tt-content").detach().html();return c},f.load_tooltips&&(g.load_tooltips=!0),jQuery(document).ready(function(){g.load_tooltips===!0&&g.init()})}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);var bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,bb_url_tid;
;/*! 
 * BuddyBoss Media JavaScript Library 
 * @package BuddyBoss Media 
 */!function(a,b,c){function d(b,c){this.bodyOverflowX,this.checkInterval=null,this.content,this.$el=a(b),this.elProxyPosition,this.$elProxy,this.enabled=!0,this.options=a.extend({},j,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()}function e(b,c){var d=!0;return a.each(b,function(a,e){if("undefined"==typeof c[a]||b[a]!==c[a])return d=!1,!1}),d}function f(){return!l&&k}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",j={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={init:function(){var b=this;if(c.querySelector){if(null!==b.options.content)b.setContent(b.options.content);else{var d=b.$el.attr("title");"undefined"==typeof d&&(d=null),b.setContent(d)}var e=b.options.functionInit(b.$el,b.content);"undefined"!=typeof e&&b.setContent(e),b.$el.removeAttr("title").addClass("tooltipstered"),!k&&b.options.iconDesktop||k&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!0,b.showTooltip())}).on("mouseleave."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!1)}),k&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b.showTooltipNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){f()&&!b.options.touchDevices||b.showTooltip()})}},showTooltip:function(){var a=this;"shown"!=a.status&&"appearing"!=a.status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a.showTooltipNow()},a.options.delay):a.showTooltipNow())},showTooltipNow:function(){var c=this;clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,c.enabled&&null!==c.content&&(c.options.onlyOne&&a(".tooltipstered").not(c.$el).each(function(b,c){var d=a(c),e=d[h]("status"),f=d[h]("option","autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d[h]("hide")}),c.options.functionBefore(c.$elProxy,function(){if("hidden"!==c.status){var d=0;"disappearing"===c.status&&(c.status="appearing",g()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.stop().fadeIn(function(){c.status="shown"}))}else{c.status="appearing";var d=c.options.speed;c.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var e="tooltipster-"+c.options.animation,f="-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;",h=c.options.fixedWidth>0?"width:"+Math.round(c.options.fixedWidth)+"px;":"",i=c.options.maxWidth>0?"max-width:"+Math.round(c.options.maxWidth)+"px;":"",j=c.options.interactive?"pointer-events: auto;":"";if(c.$tooltip=a('<div class="tooltipster-base '+c.options.theme+'" style="'+h+" "+i+" "+j+" "+f+'"><div class="tooltipster-content"></div></div>'),g()&&c.$tooltip.addClass(e),c.insertContent(),c.$tooltip.appendTo("body"),c.positionTooltip(),c.options.functionReady(c.$el,c.$tooltip),g()?(c.$tooltip.addClass(e+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.css("display","none").fadeIn(c.options.speed,function(){c.status="shown"}),c.setCheckInterval(),a(b).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.positionTooltip()}),c.options.autoClose)if(a("body").off("."+c.namespace),"hover"==c.options.trigger)if(k&&setTimeout(function(){a("body").on("touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive){k&&c.$tooltip.on("touchstart."+c.namespace,function(a){a.stopPropagation()});var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l),l=setTimeout(function(){c.hideTooltip()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hideTooltip()});else"click"==c.options.trigger&&(setTimeout(function(){a("body").on("click."+c.namespace+" touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive&&c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(a){a.stopPropagation()}))}c.options.timer>0&&(c.timerHide=setTimeout(function(){c.timerHide=null,c.hideTooltip()},c.options.timer+d))}))},setCheckInterval:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.status||0===a("body").find(b.$tooltip).length)"shown"!=b.status&&"appearing"!=b.status||b.hideTooltip(),b.cancelCheckInterval();else if(b.options.positionTracker){var c=b.positionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||b.positionTooltip()}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(){var c=this;if(clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,"shown"==c.status||"appearing"==c.status){c.status="disappearing";var d=function(){c.status="hidden",c.$tooltip.remove(),c.$tooltip=null,a(b).off("."+c.namespace),a("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX),c.$elProxy.off("."+c.namespace+"-autoClose"),c.options.functionAfter(c.$elProxy)};g()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(d)):c.$tooltip.stop().fadeOut(c.options.speed,d)}},setContent:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.content=a},insertContent:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.content||a.options.contentAsHTML?b.empty().append(a.content):b.text(a.content)},updateTooltip:function(a){var b=this;b.setContent(a),null!==b.content?"hidden"!==b.status&&(b.insertContent(),b.positionTooltip(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hideTooltip()},positionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},positionTooltip:function(){function c(){var c=a(b).scrollLeft();D-c<0&&(f=D-c,D=c),D+j-c>g&&(f=D-(g+c-j),D=g+c-j)}function d(c,d){h.offset.top-a(b).scrollTop()-l-G-12<0&&d.indexOf("top")>-1&&(I=c),h.offset.top+h.dimension.height+l+12+G>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(I=c,F=h.offset.top-l-G-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e.positionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,j=e.$tooltip.outerWidth(!1),k=e.$tooltip.innerWidth()+1,l=e.$tooltip.outerHeight(!1);if(e.$elProxy.is("area")){var m=e.$elProxy.attr("shape"),n=e.$elProxy.parent().attr("name"),o=a('img[usemap="#'+n+'"]'),p=o.offset().left,q=o.offset().top,r=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==m){var s=parseInt(r[0]),t=parseInt(r[1]),u=parseInt(r[2]);h.dimension.height=2*u,h.dimension.width=2*u,h.offset.top=q+t-u,h.offset.left=p+s-u}else if("rect"==m){var s=parseInt(r[0]),t=parseInt(r[1]),v=parseInt(r[2]),w=parseInt(r[3]);h.dimension.height=w-t,h.dimension.width=v-s,h.offset.top=q+t,h.offset.left=p+s}else if("poly"==m){var x=0,y=0,z=0,A=0,B="even";for(i=0;i<r.length;i++){var C=parseInt(r[i]);"even"==B?(C>z&&(z=C,0===i&&(x=z)),C<x&&(x=C),B="odd"):(C>A&&(A=C,1==i&&(y=A)),C<y&&(y=C),B="even")}h.dimension.height=A-y,h.dimension.width=z-x,h.offset.top=q+y,h.offset.left=p+x}else h.dimension.height=o.outerHeight(!1),h.dimension.width=o.outerWidth(!1),h.offset.top=q,h.offset.left=p}0===e.options.fixedWidth&&e.$tooltip.css({width:Math.round(k)+"px","padding-left":"0px","padding-right":"0px"});var D=0,E=0,F=0,G=parseInt(e.options.offsetY),H=parseInt(e.options.offsetX),I=e.options.position;if("top"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left+H-J/2,F=h.offset.top-l-G-12,c(),d("bottom","top")}if("top-left"==I&&(D=h.offset.left+H,F=h.offset.top-l-G-12,c(),d("bottom-left","top-left")),"top-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top-l-G-12,c(),d("bottom-right","top-right")),"bottom"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left-J/2+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top","bottom")}if("bottom-left"==I&&(D=h.offset.left+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top-left","bottom-left")),"bottom-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top+h.dimension.height+G+12,c(),d("top-right","bottom-right")),"left"==I){D=h.offset.left-H-j-12,E=h.offset.left+H+h.dimension.width+12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D<0&&E+j>g){var L=2*parseFloat(e.$tooltip.css("border-width")),M=j+D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),D=h.offset.left-H-M-12-L,K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D<0&&(D=h.offset.left+H+h.dimension.width+12,f="left")}if("right"==I){D=h.offset.left+H+h.dimension.width+12,E=h.offset.left-H-j-12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D+j>g&&E<0){var L=2*parseFloat(e.$tooltip.css("border-width")),M=g-D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D+j>g&&(D=h.offset.left-H-j-12,f="right")}if(e.options.arrow){var N="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1)var O=e.$tooltip.css("background-color");else var O=e.options.arrowColor;if(f?"left"==f?(N="tooltipster-arrow-right",f=""):"right"==f?(N="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==I||"top-left"==I||"top-right"==I)var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)var P=parseFloat(e.$tooltip.css("border-top-width")),Q=e.$tooltip.css("border-top-color");else if("left"==I)var P=parseFloat(e.$tooltip.css("border-right-width")),Q=e.$tooltip.css("border-right-color");else if("right"==I)var P=parseFloat(e.$tooltip.css("border-left-width")),Q=e.$tooltip.css("border-left-color");else var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");P>1&&P++;var R="";if(0!==P){var S="",T="border-color: "+Q+";";N.indexOf("bottom")!==-1?S="margin-top: -"+Math.round(P)+"px;":N.indexOf("top")!==-1?S="margin-bottom: -"+Math.round(P)+"px;":N.indexOf("left")!==-1?S="margin-right: -"+Math.round(P)+"px;":N.indexOf("right")!==-1&&(S="margin-left: -"+Math.round(P)+"px;"),R='<span class="tooltipster-arrow-border" style="'+S+" "+T+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var U='<div class="'+N+' tooltipster-arrow" style="'+f+'">'+R+'<span style="border-color:'+O+';"></span></div>';e.$tooltip.append(U)}e.$tooltip.css({top:Math.round(F)+"px",left:Math.round(D)+"px"})}}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(j,b[1]);break;default:c=!1}return!!c||this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster");if(!c)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');switch(b[0]){case"content":case"update":if("undefined"==typeof b[1])return e=c.content,!1;c.updateTooltip(b[1]);break;case"destroy":c.hideTooltip(),c.$el[0]!==c.$elProxy[0]&&c.$elProxy.remove();var d="string"==typeof c.content?c.content:a("<div></div>").append(c.content).html();c.$el.removeClass("tooltipstered").attr("title",d).removeData("tooltipster").off("."+c.namespace);break;case"disable":c.hideTooltip(),c.enabled=!1;break;case"elementIcon":return e=c.$el[0]!==c.$elProxy[0]?c.$elProxy[0]:void 0,!1;case"elementTooltip":return e=c.$tooltip?c.$tooltip[0]:void 0,!1;case"enable":c.enabled=!0;break;case"hide":c.hideTooltip();break;case"option":e=c.options[b[1]];break;case"reposition":c.positionTooltip();break;case"show":c.showTooltipNow();break;case"status":return e=c.status,!1;default:throw new Error('Unknown method .tooltipster("'+b[0]+'")')}}),"#*$~&"!==e?e:this}return this.each(function(){a(this).data("tooltipster")||a(this).data("tooltipster",new d(this,b[0]))})};var k=!!("ontouchstart"in b),l=!1;a("body").one("mousemove",function(){l=!0})}(jQuery,window,document);
;/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case"inline":case"ajax":case"html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=a.tpl.image.replace("{href}",g);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case"inside":c=b.skin;break;case"outside":c=b.wrap;break;case"over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);;var jq=$=jQuery.noConflict();window.Code=window.Code||{Util:false,PhotoSwipe:false};window.BuddyBoss_Media_Util=(function(window,jq,opt,undefined){var $window=jq(window);var Util={state:opt,lang:function(key){var key=key||'undefined key!';return opt[key]||'Language key missing for: '+key;}}
var resizeThrottle;function checkMobile(){if(!Util.state.isMobile&&$window.width()<=800){Util.state.isMobile=true;}
else if(!Util.state.isMobile){Util.state.isMobile=false;}}
checkMobile();$window.on('resize orientationchange',function(){clearTimeout(resizeThrottle);resizeThrottle=setTimeout(checkMobile,75);});return Util;}
(window,window.jQuery,window.BuddyBoss_Media_Appstate||{}));window.Code.BuddyBossSwiper=(function(window,PhotoSwipe_Util,PhotoSwipe,BuddyBoss_Media_Util){if(!PhotoSwipe_Util||!PhotoSwipe){return false;}
var
$buddyboss_photo_grid=jq('#buddyboss-media-grid'),$document=jq(document),buddyboss_mediawipe=false,current_photo_permalink,current_photo_activity_text,$caption,$comment_link,comment_count,favorite_count,favorite_class,photo_id;buddyboss_mediawipe_options={preventSlideshow:true,imageScaleMethod:'fitNoUpscale',loop:false,captionAndToolbarAutoHideDelay:0,getToolbar:function(){return'<div class="ps-toolbar-close"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-favorite"><div class="ps-toolbar-content"></div><div class="ps-favorite-count"></div></div><div class="ps-toolbar-comments"><div class="ps-toolbar-content"></div><div class="ps-comments-count"></div></div><div class="ps-toolbar-delete"><div class="ps-toolbar-content loading" style="display:none"><i class="fa fa-spinner fa-spin"></i></div><div class="ps-toolbar-content real"></div></div><div class="ps-toolbar-previous ps-toolbar-previous-disabled"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-next"><div class="ps-toolbar-content"></div></div>';},getImageCaption:function(el){var $pic=jq(el);var $comment,$caption;current_photo_permalink='#';current_photo_activity_text='';if($pic.find('img,i').length==0)
return'';current_photo_permalink=$pic.find('img,i')[0].getAttribute('data-permalink');current_photo_owner=$pic.find('img,i')[0].getAttribute('data-owner');current_photo_media=$pic.find('img,i')[0].getAttribute('data-media');current_photo_link_elm=$pic;comment_count=$pic.find('img,i')[0].getAttribute('data-comment-count');favorite_count=$pic.find('img,i')[0].getAttribute('data-favorite-count');favorite_class=$pic.find('img,i')[0].getAttribute('data-bbmfav');photo_id=$pic.find('img,i')[0].getAttribute('data-photo-id');if(jq('#bbmedia-grid-wrapper').length>0){if($pic.closest('.bbmedia-grid-item').length>0){var caption_div=$pic.closest('.bbmedia-grid-item');}else if($pic.closest('.photo-item-wrapper').length>0){var caption_div=$pic.closest('.photo-item-wrapper');}
if(jq(caption_div).length>0){$caption=jq(caption_div).find('.buddyboss_media_caption');$comment=$caption.find('.buddyboss_media_caption_body');$comment.find('a').remove();current_photo_activity_text=$comment.text();if(current_photo_activity_text.replace(/\s/g,'')===''){current_photo_activity_text=$caption.find('.buddyboss_media_caption_action').text();}}}
else{var comment_content_class='';var comment_header_class='';if($pic.parents('.activity-inner').length!=0){comment_content_class='activity-inner';comment_header_class='activity-header';}else if($pic.parents('.acomment-content').length!=0){comment_content_class='acomment-content';comment_header_class='acomment-meta';}else if($pic.parents('.bbp-reply-content').length!=0){comment_content_class='bbp-reply-content';comment_header_class='bbp-reply-content p';}
if(''!=comment_header_class){$comment=$pic.parents('.'+comment_content_class).clone();$comment.find('a').remove();current_photo_activity_text=$comment.text();if(current_photo_activity_text.replace(/\s/g,'')===''){current_photo_activity_text=$pic.parents('.'+comment_content_class).find('.'+comment_header_class).text();}}}
return jq.trim(current_photo_activity_text);},getImageMetaData:function(el){return{href:current_photo_permalink,caption:current_photo_activity_text,owner:current_photo_owner,media:current_photo_media,link_elm:current_photo_link_elm,comment_count:comment_count,favorite_count:favorite_count,favorite_class:favorite_class,photo_id:photo_id};}};BuddyBossSwiperClass={has_grid:function(){return $buddyboss_photo_grid.length>0;},has_photoswipe:function(){return buddyboss_mediawipe!==false;},location_from_current:function(){var current,comments_href,callback_args;if(!BuddyBossSwiperClass.has_photoswipe()){return false;}
current=buddyboss_mediawipe.getCurrentImage();comments_href=current.metaData.href;callback_args={comments_href:comments_href,current:current};jq(document).trigger('buddyboss:media:comment_link',callback_args);setTimeout(function(){window.location=comments_href;},15);},reset:function(){if(buddyboss_mediawipe!==false){try{PhotoSwipe.unsetActivateInstance(buddyboss_mediawipe);PhotoSwipe.detatch(buddyboss_mediawipe);}
catch(e){}}
BuddyBossSwiperClass.start();},start:function(){var _pics_sel=BuddyBossSwiperClass.has_grid()?'.gallery-icon > a':'.buddyboss-media-photo-wrap';var $buddyboss_media=jq(_pics_sel);if($buddyboss_media.length>0){buddyboss_mediawipe=$buddyboss_media.photoSwipe(buddyboss_mediawipe_options);buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onBeforeShow,function(e){jq('html').css({overflow:'hidden'});});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onHide,function(e){jq('html').css({overflow:'auto'});current_photo_activity_text=null;current_photo_permalink=null;$caption.off('click');$caption=null;$comment_link=null;setTimeout(function(){jq(window).trigger('reset_carousel');},555);});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onCaptionAndToolbarShow,function(e){$caption=jq('.ps-caption').on('click',function(e){window.location=buddyboss_mediawipe.getCurrentImage().metaData.href;});$comment_link=jq('.ps-toolbar-comments');});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onToolbarTap,function(e){if(e.toolbarAction===PhotoSwipe.Toolbar.ToolbarAction.none){if(e.tapTarget===$comment_link[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,$comment_link[0])){var current=buddyboss_mediawipe.getCurrentImage(),comments_href=current.metaData.href,callback_args={comments_href:comments_href,current:current};jq(document).trigger('buddyboss:media:comment_link',callback_args);window.location=comments_href;}
if(e.tapTarget===jq('.ps-toolbar-favorite')[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,jq('.ps-toolbar-favorite')[0])){cache_ele=buddyboss_mediawipe.getCurrentImage().metaData.link_elm;var target=buddyboss_mediawipe.getCurrentImage().metaData;var act_id=target.media;if(jq('#activity-'+act_id).length>0){var $act_obj=jq('#activity-'+act_id);var fav_class_obj=$act_obj.find('.buddyboss-media-photo').first();var current_fav_class=fav_class_obj.attr('data-bbmfav');var fav_class='fav';var unfav_class='unfav';var type=current_fav_class==='bbm-fav'?'fav':'unfav';var act_fav_button=jq('#activity-'+act_id+' .activity-meta .'+type);var fav_activity_meta_obj=jq('#activity-'+act_id).find('.activity-meta .fav');var unfav_activity_meta_obj=jq('#activity-'+act_id).find('.activity-meta .unfav');}else if(jq('#acomment-'+act_id).length>0){var $act_obj=jq('#acomment-'+act_id);var fav_class_obj=$act_obj.find('.buddyboss-media-photo').first();var current_fav_class=fav_class_obj.attr('data-bbmfav');var fav_class='fav-comment';var unfav_class='unfav-comment';var type=current_fav_class==='bbm-fav'?'fav':'unfav';var act_fav_button=jq('#acomment-'+act_id+' .acomment-options .'+type+'-comment');var fav_activity_meta_obj=jq('#acomment-'+act_id).find('.acomment-options .fav-comment:first');var unfav_activity_meta_obj=jq('#acomment-'+act_id).find('.acomment-options .unfav-comment:first');}else if(jq('*[data-media="'+act_id+'"]').length>0){var $_obj=jq('*[data-media="'+act_id+'"]'),fav_class_obj=$_obj;current_fav_class=$_obj.attr('data-bbmfav'),fav_class='fav-comment',unfav_class='unfav-comment',type=current_fav_class==='bbm-fav'?'fav':'unfav',fav_activity_meta_obj=$_obj,unfav_activity_meta_obj=$_obj;}
mark_it=jq.post(ajaxurl,{action:'bbm_activity_mark_'+type,id:act_id,item_type:'bbm_activity_mark'});try{mark_it.done(function(d){if(d){d=jq.parseJSON(d);if(d.action==='fav'){jq('.ps-toolbar-favorite').removeClass('bbm-fav');jq('.ps-toolbar-favorite').addClass('bbm-unfav');jq(fav_class_obj).attr('data-bbmfav','bbm-unfav');if(fav_activity_meta_obj.length>0){var fav_url=jq(fav_activity_meta_obj).attr('href');jq(fav_activity_meta_obj).removeClass(fav_class);jq(fav_activity_meta_obj).addClass(unfav_class);jq(fav_activity_meta_obj).attr('title',BP_DTheme.remove_fav);var new_url=fav_url.replace('unfavorite','favorite');jq(fav_activity_meta_obj).attr('href',new_url);}
if('undefined'!=typeof act_fav_button){var title='fav'==type?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav;act_fav_button.attr('title',title);act_fav_button.html(title);act_fav_button.removeClass('fav');act_fav_button.addClass('unfav');}}
else{jq('.ps-toolbar-favorite').removeClass('bbm-unfav');jq('.ps-toolbar-favorite').addClass('bbm-fav');jq(fav_class_obj).attr('data-bbmfav','bbm-fav');if(unfav_activity_meta_obj.length>0){var fav_url=jq(unfav_activity_meta_obj).attr('href');jq(unfav_activity_meta_obj).removeClass(unfav_class);jq(unfav_activity_meta_obj).addClass(fav_class);jq(unfav_activity_meta_obj).attr('title',BP_DTheme.mark_as_fav);var new_url=fav_url.replace('favorite','unfavorite');jq(unfav_activity_meta_obj).attr('href',new_url);}
if('undefined'!=typeof act_fav_button){var title='fav'==type?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav;act_fav_button.attr('title',title);act_fav_button.html(title);act_fav_button.removeClass('unfav');act_fav_button.addClass('fav');}}
jq(fav_class_obj).attr('data-favorite-count',d.count);jq('.ps-favorite-count').html(d.count);}});}catch(e){}}
if(e.tapTarget===jq('.ps-toolbar-delete')[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,jq('.ps-toolbar-delete')[0])){if(confirm(BuddyBoss_Media_Appstate.sure_delete_photo)){jq('.ps-toolbar-delete').find(".loading").show();jq('.ps-toolbar-delete').find(".real").hide();cache_ele=buddyboss_mediawipe.getCurrentImage().metaData.link_elm;delete_it=jq.post(ajaxurl,{'action':'buddyboss_delete_media','media':buddyboss_mediawipe.getCurrentImage().metaData.media,'photo-id':buddyboss_mediawipe.getCurrentImage().metaData.photo_id});try{delete_it.done(function(d){if(d=="done"){var contentToRemove=document.querySelectorAll("#activity-"+buddyboss_mediawipe.getCurrentImage().metaData.media);jq(contentToRemove).remove();jq(".ps-toolbar-close .ps-toolbar-content").click();location.reload();}else{alert(d);}});delete_it.always(function(){jq('.ps-toolbar-delete').find(".loading").hide();jq('.ps-toolbar-delete').find(".real").show();jq(cache_ele).first().click();});}catch(e){}}}}});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onDisplayImage,function(e){jq('.ps-comments-count').html(buddyboss_mediawipe.getCurrentImage().metaData.comment_count);$delete_link=jq('.ps-toolbar-delete');if(buddyboss_mediawipe.getCurrentImage().metaData.owner=="1"){$delete_link.show();}else{$delete_link.hide();}
var acti_id=buddyboss_mediawipe.getCurrentImage().metaData.media;if(jq('#activity-'+acti_id).length>0){var fav_class_obj=jq('#activity-'+acti_id).find('.buddyboss-media-photo').first();}else if(jq('#acomment-'+acti_id).length>0){var fav_class_obj=jq('#acomment-'+acti_id).find('.buddyboss-media-photo').first();}else if(jq('*[data-media="'+acti_id+'"]').length>0){var fav_class_obj=jq('*[data-media="'+acti_id+'"]');}
if('undefined'!=typeof fav_class_obj){jq('.ps-favorite-count').html(fav_class_obj.attr('data-favorite-count'));jq('.ps-toolbar-favorite').removeClass('bbm-unfav');jq('.ps-toolbar-favorite').removeClass('bbm-fav');jq('.ps-toolbar-favorite').addClass(fav_class_obj.attr('data-bbmfav'));}});}}}
BuddyBossSwiperClass.start();function ajaxSuccessHandler(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');var resetCallback=function(action){return function(){var reset_action=['activity_get_older_updates','post_update','new_activity_comment','delete_activity_comment','activity_widget_filter','get_single_activity_content'];if(-1!==reset_action.indexOf(action)){BuddyBossSwiperClass.reset();}}}(action);window.setTimeout(resetCallback,205);window.setTimeout(resetCallback,750);}
jq(document).ajaxSuccess(ajaxSuccessHandler);return BuddyBossSwiperClass;}
(window,window.Code.Util||false,window.Code.PhotoSwipe||false,window.BuddyBoss_Media_Util));window.BuddyBoss_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _l={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
this.setup_modal();this.setup_textbox();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');if('post_update'==action){var slug=BBOSS_MEDIA.photo_component_slug;var data={action:'bbm_photo_counts'};jq.ajax({type:'GET',url:ajaxurl,data:data,success:function(response){if(response.success){var $photo_cnt_span=jq('#'+slug+'-personal-li #user-'+slug+' span');if($photo_cnt_span.length>0){$photo_cnt_span.text(response.data);}}}});}},inject_markup:function(){var $activity_greeting=jq('.my-gallery .activity-greeting'),greeting=lang('user_add_photo');if($activity_greeting.length&&!!greeting){$activity_greeting.text(greeting).show();}
var $whats_new_content=jq('#whats-new-content');var $add_photo=jq('#buddyboss-media-tpl-add-photo');if($add_photo.length&&$whats_new_content.length){$whats_new_content.before($add_photo.html());}
var $preview_pane=jq('#buddyboss-media-tpl-preview');if($preview_pane.length&&$whats_new_content.length&&'undefined'==typeof bbpress_media){$whats_new_content.find('textarea').after($preview_pane.html());}},get_elements:function(){_l.$whats_new=jq('#whats-new');if(_l.$whats_new.length===0&&'undefined'==typeof bbpress_media){return false;}
_l.$add_photo=jq('#buddyboss-media-bulk-uploader');_l.$open_uploder_button=jq('#buddyboss-media-open-uploader-button');_l.$add_photo_button=jq('#logo-file-browser-button');_l.$post_button=jq('#whats-new-submit').find('[type=submit],button');_l.$uploader=jq('#buddyboss-media-bulk-uploader');_l.$uploaded=jq('#buddyboss-media-bulk-uploader-uploaded .images');_l.$preview_pane=jq('#buddyboss-media-preview-inner');_l.$privacy_bp=jq('#bbwall-activity-privacy');_l.$privacy_modal=jq('#bbm-media-privacy');return true;},setup_textbox:function(){_l.$whats_new.blur(function(){setTimeout(function(){if(pics_uploaded&&pics_uploaded.length>0){_l.$post_button.removeAttr('disabled');_l.$post_button.prop('disabled',false);}},200)});},setup_modal:function(){_l.$open_uploder_button.fancybox({href:'#buddyboss-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('#buddyboss-media-bulk-uploader-text').val(_l.$whats_new.val());if(_l.$privacy_bp.length>0){_l.$privacy_modal.val(_l.$privacy_bp.val());}
_l.$preview_pane.hide();},beforeClose:function(){if(jq('#buddyboss-media-bulk-uploader-text').length>0){_l.$whats_new.val(jq('#buddyboss-media-bulk-uploader-text').val());}
if(_l.$privacy_bp.length>0){_l.$privacy_bp.val(_l.$privacy_modal.val());}},afterClose:function(){_l.$preview_pane.html(_l.$uploaded.html());_l.$preview_pane.show();}});jq('#aw-whats-new-submit-bbmedia').click(function(){jq.fancybox.close();_l.$post_button.trigger('click');});},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='post_update')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_l.$preview_pane.html('');_l.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_l.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_l.$add_photo_button[0],dragdrop:true,container:'buddyboss-media-bulk-uploader-reception',drop_element:'buddyboss-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_l.$add_photo.find('.moxie-shim').find("input").length=='0'){_l.$add_photo.find('.moxie-shim').first().css("z-index",10);_l.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_l.$add_photo_button[0]).clone();jq(_l.$add_photo_button[0]).after(clone).remove();_l.$add_photo_button[0]=clone;jq(_l.$add_photo_button[0]).on("click",function(){_l.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jq('#aw-whats-new-submit-bbmedia').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_l.$uploaded.append(newimg);_l.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');if('undefined'!=typeof bbpress_media){$file.append("<input type='hidden' value='"+responseJSON.attachment_id+"' name='bbm_bbpress_attachments[]'>");}
$file.data('attachment_id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();jq('.fancybox-close').on('click',function(){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);});if(jq('#buddyboss-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("a.browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}
if(jq('#buddyboss-media-add-photo').length>0&&'false'===BBOSS_MEDIA.is_media_page&&'false'===BBOSS_MEDIA.is_photo_page){var additional_dropzone=document.getElementById('buddyboss-media-add-photo');$additional_dropzone=jq(additional_dropzone);var input=new mOxie.FileInput({browse_button:jq(".browse-file-button")[0],container:additional_dropzone,multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;},}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);},}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_Edit_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _el={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;if(!this.get_elements()){return false;}
setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);jq(document).on('click','a.buddyboss_edit_activity.action-edit',APP.editActivityMediaPreview);},destroy:function(){},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='buddypress-edit-activity-save')
return;var media_ids=[];jq("#buddyboss-edit-media-preview .file").map(function(idx,ele){media_ids[idx]=jq(ele).data('media-id');});var new_data=jq.extend({},origOptions.data,{'buddyboss_media_aid':media_ids,});options.data=jq.param(new_data);},get_elements:function(){_el.$add_photo=jq('#buddyboss-edit-media-bulk-uploader');_el.$open_uploder_button=jq('#buddyboss-edit-media-open-uploader-button');_el.$add_photo_button=jq('#browse-file-button');_el.$uploaded=jq('#buddyboss-media-bulk-uploader-uploaded .images');_el.$preview_pane=jq('#buddyboss-edit-media-preview-inner');return true;},editActivityMediaPreview:function(e){$elm_edit_btn=jq(this);var activity_id=$elm_edit_btn.data('activity_id');var data={'action':'buddypress_edit_activity_media_content','activity_id':$elm_edit_btn.data('activity_id'),};jq.ajax({type:'POST',url:ajaxurl,data:data,success:function(response){$media_edit_wrapper=jq('#buddyboss-edit-media-preview-inner');$media_edit_wrapper.html(response);}});},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_el.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_el.$add_photo_button[0],dragdrop:true,container:'buddyboss-edit-media-bulk-uploader-reception',drop_element:'buddyboss-edit-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_el.$add_photo.find('.moxie-shim').find("input").length=='0'){_el.$add_photo.find('.moxie-shim').first().css("z-index",10);_el.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_el.$add_photo_button[0]).clone();jq(_el.$add_photo_button[0]).after(clone).remove();_el.$add_photo_button[0]=clone;jq(_el.$add_photo_button[0]).on("click",function(){_el.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jq('#aw-whats-new-submit-bbmedia').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_el.$uploaded.append(newimg);_el.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('media-id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();jq('.fancybox-close').on('click',function(){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);});if(jq('#buddyboss-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_el.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();if(jq("#buddyboss-edit-media-add-photo .browse-file-button").is(':visible')){var input=new mOxie.FileInput({browse_button:jq("#buddyboss-edit-media-add-photo .browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_el.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}}
if(jq('#buddyboss-edit-media-add-photo a.buddyboss-media-add-photo').length>0&&'false'===BBOSS_MEDIA.is_photo_page){var additional_dropzone=document.getElementById('buddyboss-media-add-photo');$additional_dropzone=jq(additional_dropzone);var input=new mOxie.FileInput({browse_button:jq("#buddyboss-edit-media-add-photo .browse-file-button")[0],container:additional_dropzone,multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;},editActivityRemoveMedia:function(el){var $el=jq(el);$el.parent().remove();},}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);},editActivityRemoveMedia:function(el){return APP.editActivityRemoveMedia(el);},}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_Comment_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _cl={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
jq(document).on('click','.buddyboss-comment-media-add-photo-button',APP.set_post_button);jq('ul#activity-stream').on('click','a.acomment-reply',APP.set_file_browse_button);this.setup_modal();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},inject_markup:function(){var $ac_form_submit=jq("input[name='ac_form_submit']:not(.has-comment-media-button)");var $add_photo=jq('#buddyboss-comment-media-tpl-add-photo');if($add_photo.length&&$ac_form_submit.length){$ac_form_submit.before($add_photo.html());$ac_form_submit.addClass('has-comment-media-button');}
var $preview_pane=jq('#buddyboss-comment-media-tpl-preview');if($preview_pane.length&&$ac_form_submit.length){var $ac_reply_content=jq('.ac-reply-content:not(.has-comment-media-button)')
$ac_reply_content.after($preview_pane.html());$ac_reply_content.addClass('has-comment-media-button')}},get_elements:function(){_cl.$comment_input=null;_cl.$browse_file_button=null;_cl.$comment_media_container=null;_cl.$add_photo=jq('#buddyboss-comment-media-bulk-uploader');_cl.$open_uploder_button=jq('.open-uploader-button.buddyboss-comment-media-add-photo-button');_cl.$add_photo_button=jq('.logo-comment-file-browser-button');_cl.$post_button=null;_cl.$uploader=jq('#buddyboss-comment-media-bulk-uploader');_cl.$uploaded=jq('.buddyboss-comment-media-bulk-uploader-uploaded .images');_cl.$preview_pane=jq('.buddyboss-comment-media-preview-inner');return true;},setup_modal:function(){_cl.$open_uploder_button.fancybox({href:'#buddyboss-comment-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('.buddyboss-comment-media-bulk-uploader-text').val(_cl.$comment_input.val());},beforeClose:function(){if(jq('.buddyboss-comment-media-bulk-uploader-text').length>0){_cl.$comment_input.val(jq('.buddyboss-comment-media-bulk-uploader-text').val());}},afterClose:function(){_cl.$preview_pane.html(_cl.$uploaded.html());_cl.$preview_pane.show();}});jq('#buddyboss-comment-media-attach').click(function(){jq.fancybox.close();_cl.$post_button.trigger('click');});},set_post_button:function(e){$attach_comment_media_button=jq(this).parents('.ac-reply-content');_cl.$post_button=$attach_comment_media_button.find('input[name=ac_form_submit]');_cl.$comment_input=$attach_comment_media_button.find('textarea');},set_file_browse_button:function(e){$acomment_reply_button=jq(this);$activity_comment_div=$acomment_reply_button.parents('.activity-content').next('.activity-comments')
_cl.$browse_file_button=$activity_comment_div.find('.browse-file-button');_cl.$comment_media_container=$activity_comment_div.find('.buddyboss-comment-media-add-photo');var input=new mOxie.FileInput({browse_button:_cl.$browse_file_button.get(0),container:_cl.$comment_media_container.get(0),multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='new_activity_comment')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');var action_arr=['activity_get_older_updates','post_update','activity_widget_filter'];if(-1!=action_arr.indexOf(action)){setTimeout(function(){APP.inject_markup();},2000);}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_cl.$preview_pane.html('');_cl.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_cl.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_cl.$add_photo_button[0],dragdrop:true,container:'buddyboss-comment-media-bulk-uploader-reception',drop_element:'buddyboss-comment-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_cl.$add_photo.find('.moxie-shim').find("input").length=='0'){_cl.$add_photo.find('.moxie-shim').first().css("z-index",10);_cl.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_cl.$add_photo_button[0]).clone();jq(_cl.$add_photo_button[0]).after(clone).remove();_cl.$add_photo_button[0]=clone;jq(_cl.$add_photo_button[0]).on("click",function(){_cl.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jQuery('.has-comment-media-button').prop('disabled',true);jQuery('#buddyboss-comment-media-attach').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_cl.$uploaded.append(newimg);_cl.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jQuery('.has-comment-media-button').prop('disabled',false);jQuery('#buddyboss-comment-media-attach').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('attachment_id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Comment_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jQuery('.has-comment-media-button').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();if(jq('#buddyboss-comment-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("#buddyboss-comment-media-add-photo .browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;}}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);}}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_bbPress_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _cl={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
jq(document).on('click','.buddyboss-bbpress-media-add-photo-button',APP.set_post_button);this.setup_modal();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},inject_markup:function(){var $whats_new_content=jq('.bbp-submit-wrapper');var $add_photo=jq('#buddyboss-bbpress-media-tpl-add-photo');if($add_photo.length&&$whats_new_content.length){$whats_new_content.append($add_photo.html());}},get_elements:function(){_cl.$bbpress_input=null;_cl.$add_photo=jq('#buddyboss-bbpress-media-bulk-uploader');_cl.$open_uploder_button=jq('.open-uploader-button.buddyboss-bbpress-media-add-photo-button');_cl.$add_photo_button=jq('.logo-bbpress-file-browser-button');_cl.$post_button=null;_cl.$uploader=jq('#buddyboss-bbpress-media-bulk-uploader');_cl.$uploaded=jq('.buddyboss-bbpress-media-bulk-uploader-uploaded .images');_cl.$preview_pane=jq('.buddyboss-bbpress-media-preview-inner');return true;},setup_modal:function(){_cl.$open_uploder_button.fancybox({href:'#buddyboss-bbpress-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('.buddyboss-bbpress-media-bulk-uploader-text').val(_cl.$bbpress_input.val());},beforeClose:function(){if(jq('.buddyboss-bbpress-media-bulk-uploader-text').length>0){_cl.$bbpress_input.val(jq('.buddyboss-bbpress-media-bulk-uploader-text').val());}}});jq('#buddyboss-bbpress-media-attach').click(function(){jq.fancybox.close();_cl.$post_button.trigger('click');});},set_post_button:function(e){$attach_bbpress_media_button=jq(this).parents('.ac-reply-content');_cl.$post_button=$attach_bbpress_media_button.find('input[name=ac_form_submit]');_cl.$bbpress_input=$attach_bbpress_media_button.find('textarea');},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='new_activity_bbpress')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');if('activity_get_older_updates'==action){APP.inject_markup();}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_cl.$preview_pane.html('');_cl.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_cl.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_cl.$add_photo_button[0],dragdrop:true,container:'buddyboss-bbpress-media-bulk-uploader-reception',drop_element:'buddyboss-bbpress-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_cl.$add_photo.find('.moxie-shim').find("input").length=='0'){_cl.$add_photo.find('.moxie-shim').first().css("z-index",10);_cl.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_cl.$add_photo_button[0]).clone();jq(_cl.$add_photo_button[0]).after(clone).remove();_cl.$add_photo_button[0]=clone;jq(_cl.$add_photo_button[0]).on("click",function(){_cl.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_cl.$uploaded.append(newimg);_cl.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('attachment_id',responseJSON.attachment_id);$file.append("<input type='hidden' value='"+responseJSON.attachment_id+"' name='bbm_bbpress_attachments[]'>");$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_bbPress_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();if(jq('#buddyboss-bbpress-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("a.browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}
if(jq('.buddyboss-bbpress-media-add-photo').length>0){var additional_dropzone=document.getElementsByClassName('buddyboss-bbpress-media-add-photo');var input=new mOxie.FileInput({browse_button:jq(".browse-file-button")[0],container:additional_dropzone[0],multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;}}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);}}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));function bbmedia_getQueryVariable(query,variable){if(typeof query!=='string'||query==''||typeof variable=='undefined'||variable=='')
return'';var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable){return pair[1];}}
return(false);}
bbmedia_move_media_opened=false;bbmedia_tag_friends_opened=false;jq(document).ready(function(){jq(document).keyup(function(e){if(e.keyCode==27&&(bbmedia_move_media_opened===true||bbmedia_tag_friends_opened===true)){if(bbmedia_move_media_opened===true)
buddyboss_media_move_media_close();if(bbmedia_tag_friends_opened===true)
buddyboss_media_tag_friends_close();}});setMediaPageCookie();jq.ajaxPrefilter(function(options,originalOptions,jqXHR){var originalSuccess=options.success;var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='activity_get_older_updates')
return;options.success=function(data){jq('#bbmedia-grid-wrapper #activity-stream li.load-more').remove();if(originalSuccess!=null){originalSuccess(data);}};});jq('#activity-stream').on('click','.activity-meta > a.fav',function(){var img_wrap=jq(this).parents('.activity-content').find('.buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_favorite(img_wrap);});jq('#activity-stream').on('click','.activity-meta > a.unfav',function(){var img_wrap=jq(this).parents('.activity-content').find('.buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_unfavorite(img_wrap);});jq('#activity-stream').on('click','.acomment-options > a.fav-comment',function(){var img_wrap=jq(this).parent().parent().find('.acomment-content > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_favorite(img_wrap);});jq('#activity-stream').on('click','.acomment-options > a.unfav-comment',function(){var img_wrap=jq(this).parent().parent().find('.acomment-content > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_unfavorite(img_wrap);});jq('#activity-stream').on('click','input[name=ac_form_submit]',function(e){var $activity_elm=jq(this).parents('.activity-item');var img_wrap=$activity_elm.find('.activity-inner > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var img=jq(this);var comment_count=img.attr('data-comment-count');var new_comment_count=parseInt(comment_count)+1;img.attr('data-comment-count',new_comment_count);});});jq('#activity-stream').on('click','a.acomment-delete',function(e){var $activity_elm=jq(this).parents('.activity-item');var $reply_thread=jq(this).parents('li[id^=acomment]:first').find('li[id^=acomment]');if(0<$reply_thread.length){var deleted_comments=$reply_thread.length+1;}else{var deleted_comments=1;}
var img_wrap=$activity_elm.find('.activity-inner > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var img=jq(this);var comment_count=img.attr('data-comment-count');if(0<=comment_count){var new_comment_count=parseInt(comment_count)-deleted_comments;img.attr('data-comment-count',new_comment_count);}});});jq('div.buddyboss-media-photos-wrap-container').each(function(index,val){var tall_images=jq(this).find('a.size-activity-2-thumbnail-tall');tall_images_height_scale(tall_images[0],tall_images[1]);});jq(document).on('click','a.browse-file-button',function(e){e.preventDefault();});});var hidden,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}
function setMediaPageVisibilityChange(){if(!document[hidden]){setMediaPageCookie();}}
function setMediaPageCookie(){if(jq('body').hasClass('buddyboss-media-all-media')){docCookies.setItem("bp-bboss-is-media-page","yes","","/");}else{docCookies.removeItem("bp-bboss-is-media-page","/");}}
document.addEventListener(visibilityChange,setMediaPageVisibilityChange,false);function tall_images_height_scale(img1,img2){var h1=jq(img1).find('img').height();var h2=jq(img2).find('img').height();if(h1<h2){jq(img1).height(h2);jq(img1).find('img').height(h2);jq(img2).height(h2);jq(img2).find('img').height(h2);}
else if(h2<h1){jq(img2).height(h1);jq(img2).find('img').height(h1);jq(img1).height(h1);jq(img1).find('img').height(h1);}}
function bbm_ps_mark_favorite(img_wrap){jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var fav_count=jq(this).attr('data-favorite-count');jq(this).attr('data-bbmfav','bbm-unfav');jq(this).attr('data-favorite-count',parseInt(fav_count)+1);});}
function bbm_ps_mark_unfavorite(img_wrap){jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var fav_count=jq(this).attr('data-favorite-count');jq(this).attr('data-bbmfav','bbm-fav');if(fav_count==0){jq(this).attr('data-favorite-count',parseInt(fav_count));}else{jq(this).attr('data-favorite-count',parseInt(fav_count)-1);}});}
function buddyboss_media_initiate_media_move(link){$link=jq(link);$form=jq('#frm_buddyboss-media-move-media');$form_wrapper=$form.parent();$link.closest('.activity').find('form.ac-form').slideUp();if($form_wrapper.is(':visible')){buddyboss_media_move_media_close();return false;}
jq('.buddyboss-activity-comments-form').hide();$link.closest('.activity-content').after($form_wrapper);var selected_album=$link.data('album_id');if(!selected_album)
selected_album='';$form.find('#buddyboss_media_move_media_albums').val(selected_album);$form_wrapper.slideDown(200);bbmedia_move_media_opened=true;$form.find('input[name="activity_id"]').val($link.data('activity_id'));return false;}
function buddyboss_media_submit_media_move(){$form=jq('#frm_buddyboss-media-move-media');$submit_button=$form.find('input[type="submit"]');if($submit_button.hasClass('loading'))
return false;var bbm_move_media_albums_id=$form.find('select[name="buddyboss_media_move_media_albums"]').val();var data={'action':$form.find('input[name="action"]').val(),'bboss_media_move_media_nonce':$form.find('input[name="bboss_media_move_media_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'buddyboss_media_move_media_albums':bbm_move_media_albums_id};$submit_button.addClass('loading');$form.find("#message").removeAttr('class').html('');jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){response=jq.parseJSON(response);if(response.status){$form.find("#message").addClass('updated').html("<p>"+response.message+"</p>");if($form.find('input[name="is_single_album"]').val()=='yes'){setTimeout(function(){buddyboss_media_media_move_cleanup($form,true);},2000);}else{setTimeout(function(){buddyboss_media_media_move_cleanup($form,false);},2000);}
$form.parents('li.activity-item').find('a.buddyboss_media_move').data('album_id',bbm_move_media_albums_id);}else{$form.find("#message").addClass('error').html("<p>"+response.message+"</p>");}
$submit_button.removeClass('loading');}});return false;}
function buddyboss_media_media_move_cleanup($form,remove_activity_item){$form.find("#message").removeAttr('class').html('');$form_wrapper=$form.parent();buddyboss_media_move_media_close();if(remove_activity_item){$activity=$form.closest('.activity');jq('body').append($form_wrapper);$form_wrapper.hide();$activity.slideUp(200,function(){$activity.remove();});}}
function buddyboss_media_move_media_close(){$form=jq('#frm_buddyboss-media-move-media');$form_wrapper=$form.parent();$form_wrapper.slideUp(200);bbmedia_move_media_opened=false;return false;}
function buddyboss_media_initiate_tagging(link){$link=jq(link);$form=jq('#frm_buddyboss-media-tag-friends');$form_wrapper=$form.parent();$link.closest('.activity').find('form.ac-form').slideUp();if($form_wrapper.is(':visible')){buddyboss_media_tag_friends_close();return false;}
jq('.buddyboss-activity-comments-form').hide();$link.closest('.activity-content').after($form_wrapper);$form_wrapper.slideDown(200);bbmedia_tag_friends_opened=true;$form.find('input[name="ac_search"]').off('input').on('input',function(){buddyboss_media_tag_friends_search();});$form.find('.preloading').show();$form.find('input[name="activity_id"]').val($link.data('activity_id'));buddyboss_media_tag_friends_search();return false;}
function buddyboss_media_tag_friends_close(){$form=jq('#frm_buddyboss-media-tag-friends');$form_wrapper=$form.parent();$form.data('doingsearch','no');$form.find('#invite-list > ul').html('');$form.find('input[name="ac_search"]').off('input').val('').hide();$form_wrapper.slideUp(200);bbmedia_tag_friends_opened=false;return false;}
function buddyboss_media_tag_friends_search(){$form=jq('#frm_buddyboss-media-tag-friends');if($form.data('doingsearch')=='yes')
return false;var search_term=jq.trim($form.find('input[name="ac_search"]').val());var exclude_ids=[];$form.find('#invite-list > ul > li').each(function(){if(jq(this).hasClass('more_i10')){jq(this).remove();}else{if(jq(this).find('input[type="checkbox"]').is(':checked')){exclude_ids.push(jq(this).find('input[type="checkbox"]').val());}else{jq(this).remove();}}});$form.data('doingsearch','yes');$form.find('.preloading').show();$form.find('#message').each(function(){jq(this).remove();});var data={'action':$form.find('input[name="action"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'search_term':search_term,'exclude_ids':exclude_ids};jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){if($form.data('doingsearch')=='no')
return;$form.find('.preloading').hide();response=jq.parseJSON(response);$ul=$form.find('#invite-list > ul');if(response.friends_list){var count=response.friends_list.length;for(var i=0;i<count;i++){$ul.append(response.friends_list[i]);}
if(count<response.total){var more=response.total-count;var more_i10=response.more_i10.replace('xx',more);$ul.append("<li class='more_i10'>"+more_i10+"</li>");}
$ul.show();}else{if($ul.html()!=''){$form.find('#invite-list').append(response.error);}}
jq('#invite-list input[name="friends[]"]').unbind('change').bind('change',function(){buddyboss_media_tag_friends_toggle_tag(data.activity_id,jq(this).val());});jq('#friend-list .action .remove').click(function(e){e.preventDefault();buddyboss_media_tag_friends_toggle_tag(data.activity_id,jq(this).data('userid'));});if(search_term==''&&response.show_search){$form.find('input[name="ac_search"]').show();}
$form.data('doingsearch','no');}});return false;}
function buddyboss_media_tag_friends_toggle_tag(activity_id,friend_id){$form=jq('#frm_buddyboss-media-tag-friends');var data={'action':$form.find('input[name="action_tag"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':activity_id,'friend_id':friend_id};jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){}});}
function buddyboss_media_tag_friends_complete(){$form=jq('#frm_buddyboss-media-tag-friends');var data={'action':$form.find('input[name="action_tag_complete"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'update_action':false};if($form.closest('.activity').find(BuddyBoss_Media_Appstate.activity_header_selector).length>0){data.update_action=true;}
$form.find('input[type="submit"]').addClass('loading');jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){$form.find('input[type="submit"]').removeClass('loading');if(data.update_action===true){response=jq.parseJSON(response);$activity=$form.closest('.activity');$activity.find(BuddyBoss_Media_Appstate.activity_header_selector).html(response.activity_action);if(response.activity_tooltip){$activity.find('.buddyboss-media-tt-content').remove();$activity.append(response.activity_tooltip);window.BBMediaTooltips.initTooltips();}}
buddyboss_media_tag_friends_close();}});return false;}
(function(window,$){var BBMediaTooltips={};var $el={};BBMediaTooltips.init=function(){BBMediaTooltips.initTooltips();}
BBMediaTooltips.initTooltips=function(){$el.tooltips=jq('.buddyboss-media-tt-others');if($el.tooltips.length){$el.tooltips.tooltipster({contentAsHTML:true,functionInit:BBMediaTooltips.getTooltipContent,interactive:true,position:'top-left',theme:'tooltipster-buddyboss'});}}
BBMediaTooltips.getTooltipContent=function(origin,content){var $content=origin.closest('li').find('.buddyboss-media-tt-content').detach().html();return $content;}
jq(document).ready(function(){if(BuddyBoss_Media_Appstate.enable_tagging==true){BBMediaTooltips.initTooltips();window.BBMediaTooltips=BBMediaTooltips;}});}(window,window.jQuery));var docCookies=docCookies||{getItem:function(sKey){if(!sKey){return null;}
return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){if(!sKey){return false;}
return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};
;function buddypress_edit_activity_initiate(a){return jQuery(a).hasClass("action-save")?buddypress_edit_activity_save(a):buddypress_edit_activity_get(a),!1}function buddypress_edit_activity_get(a){$link=jQuery(a),$form=jQuery("#frm_buddypress-edit-activity"),$form_wrapper=$form.parent(),$link.addClass("loading"),$link.hasClass("buddyboss_edit_activity_comment")?B_E_A_.current_activity_org=$link.closest("[id^=acomment]").find(" > .acomment-content").html():B_E_A_.current_activity_org=$link.closest(".activity-content").find(".activity-inner").html();var b={action:$form.find('input[name="action_get"]').val(),buddypress_edit_activity_nonce:$form.find('input[name="buddypress_edit_activity_nonce"]').val(),activity_id:$link.data("activity_id")};jQuery.ajax({type:"POST",url:ajaxurl,data:b,success:function(a){if(a=jQuery.parseJSON(a),a.status){$link.removeClass("loading").addClass("action-save").html(B_E_A_.button_text.save);var c=jQuery("<a href='#'>").addClass("bp-secondary-action buddyboss_edit_activity_cancel").html(B_E_A_.button_text.cancel);$link.before(c),c.attr("onclick","return buddypress_edit_activity_cancel(this);"),c.data("target_type","activity"),$link.hasClass("buddyboss_edit_activity_comment")?($link.closest("[id^=acomment]").find(" > .acomment-content").html("").hide().after($form_wrapper),c.data("target_type","comment")):($link.closest(".activity-content").find(".activity-inner").html("").hide().after($form_wrapper),c.addClass("button")),$form_wrapper.show(),$form.find('input[name="activity_id"]').val(b.activity_id),$form.find("textarea").val(a.content)}}})}function buddypress_edit_activity_save(a){$link=jQuery(a),$form=jQuery("#frm_buddypress-edit-activity"),$form_wrapper=$form.parent(),$link.addClass("loading"),jQuery(".buddyboss_edit_activity_cancel").remove();var b={action:$form.find('input[name="action_save"]').val(),buddypress_edit_activity_nonce:$form.find('input[name="buddypress_edit_activity_nonce"]').val(),activity_id:$link.data("activity_id"),content:$form.find("textarea").val()};jQuery.ajax({type:"POST",url:ajaxurl,data:b,success:function(a){a=jQuery.parseJSON(a),a.status&&($link.removeClass("loading").removeClass("action-save").html(B_E_A_.button_text.edit),$link.hasClass("buddyboss_edit_activity_comment")?$link.closest("[id^=acomment]").find(" > .acomment-content").html(a.content).show():$link.closest(".activity-content").find(".activity-inner").html(a.content).show(),$form_wrapper.hide(),jQuery("body").append($form_wrapper))}})}function buddypress_edit_activity_cancel(a){var b=jQuery(a),c=jQuery("#frm_buddypress-edit-activity"),d=c.parent(),e="";return"comment"==b.data("target_type")?(b.closest("[id^=acomment]").find(" > .acomment-content").html(B_E_A_.current_activity_org).show(),e=b.closest("[id^=acomment]").find(".buddyboss_edit_activity_comment.action-save")):(b.closest(".activity-content").find(".activity-inner").html(B_E_A_.current_activity_org).show(),e=b.closest(".activity-content").find(".buddyboss_edit_activity.action-save")),e.removeClass("action-save").html(B_E_A_.button_text.edit),d.hide(),jQuery("body").append(d),b.remove(),!1}
;window.wp=window.wp||{},function(a){var b="undefined"==typeof _wpUtilSettings?{}:_wpUtilSettings;wp.template=_.memoize(function(b){var c,d={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g,variable:"data"};return function(e){return(c=c||_.template(a("#tmpl-"+b).html(),d))(e)}}),wp.ajax={settings:b.ajax||{},post:function(a,b){return wp.ajax.send({data:_.isObject(a)?a:_.extend(b||{},{action:a})})},send:function(b,c){var d,e;return _.isObject(b)?c=b:(c=c||{},c.data=_.extend(c.data||{},{action:b})),c=_.defaults(c||{},{type:"POST",url:wp.ajax.settings.url,context:this}),e=a.Deferred(function(b){c.success&&b.done(c.success),c.error&&b.fail(c.error),delete c.success,delete c.error,b.jqXHR=a.ajax(c).done(function(a){"1"!==a&&1!==a||(a={success:!0}),_.isObject(a)&&!_.isUndefined(a.success)?b[a.success?"resolveWith":"rejectWith"](this,[a.data]):b.rejectWith(this,[a])}).fail(function(){b.rejectWith(this,arguments)})}),d=e.promise(),d.abort=function(){return e.jqXHR.abort(),this},d}}}(jQuery);
;wp.customize.selectiveRefresh=function(a,b){"use strict";var c,d,e;return c={ready:a.Deferred(),editShortcutVisibility:new b.Value,data:{partials:{},renderQueryVar:"",l10n:{shiftClickToEdit:""}},currentRequest:null},_.extend(c,b.Events),d=c.Partial=b.Class.extend({id:null,initialize:function(b,c){var d=this;c=c||{},d.id=b,d.params=_.extend({selector:null,settings:[],primarySetting:null,containerInclusive:!1,fallbackRefresh:!0},c.params||{}),d.deferred={},d.deferred.ready=a.Deferred(),d.deferred.ready.done(function(){d.ready()})},ready:function(){var b=this;_.each(b.placements(),function(d){a(d.container).attr("title",c.data.l10n.shiftClickToEdit),b.createEditShortcutForPlacement(d)}),a(document).on("click",b.params.selector,function(c){c.shiftKey&&(c.preventDefault(),_.each(b.placements(),function(d){a(d.container).is(c.currentTarget)&&b.showControl()}))})},createEditShortcutForPlacement:function(b){var c,d,e,f,g=this;b.container&&(d=a(b.container),e="head",f="area, audio, base, bdi, bdo, br, button, canvas, col, colgroup, command, datalist, embed, head, hr, html, iframe, img, input, keygen, label, link, map, math, menu, meta, noscript, object, optgroup, option, param, progress, rp, rt, ruby, script, select, source, style, svg, table, tbody, textarea, tfoot, thead, title, tr, track, video, wbr",!d.length||d.is(f)||d.closest(e).length||(c=g.createEditShortcut(),c.on("click",function(a){a.preventDefault(),a.stopPropagation(),g.showControl()}),g.addEditShortcutToPlacement(b,c)))},addEditShortcutToPlacement:function(b,c){var d=a(b.container);d.prepend(c),d.is(":visible")&&"none"!==d.css("display")||c.addClass("customize-partial-edit-shortcut-hidden")},getEditShortcutClassName:function(){var a,b=this;return a=b.id.replace(/]/g,"").replace(/\[/g,"-"),"customize-partial-edit-shortcut-"+a},getEditShortcutTitle:function(){var a=this,b=c.data.l10n;switch(a.getType()){case"widget":return b.clickEditWidget;case"blogname":return b.clickEditTitle;case"blogdescription":return b.clickEditTitle;case"nav_menu":return b.clickEditMenu;default:return b.clickEditMisc}},getType:function(){var a,b=this;return a=b.params.primarySetting||_.first(b.settings())||"unknown",b.params.type?b.params.type:a.match(/^nav_menu_instance\[/)?"nav_menu":a.match(/^widget_.+\[\d+]$/)?"widget":a},createEditShortcut:function(){var b,c,d,e,f=this;return b=f.getEditShortcutTitle(),c=a("<span>",{"class":"customize-partial-edit-shortcut "+f.getEditShortcutClassName()}),d=a("<button>",{"aria-label":b,title:b,"class":"customize-partial-edit-shortcut-button"}),e=a('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M13.89 3.39l2.71 2.72c.46.46.42 1.24.03 1.64l-8.01 8.02-5.56 1.16 1.16-5.58s7.6-7.63 7.99-8.03c.39-.39 1.22-.39 1.68.07zm-2.73 2.79l-5.59 5.61 1.11 1.11 5.54-5.65zm-2.97 8.23l5.58-5.6-1.07-1.08-5.59 5.6z"/></svg>'),d.append(e),c.append(d),c},placements:function(){var b,c=this;return b=c.params.selector||"",b&&(b+=", "),b+='[data-customize-partial-id="'+c.id+'"]',a(b).map(function(){var b,d=a(this);if(b=d.data("customize-partial-placement-context"),_.isString(b)&&"{"===b.substr(0,1))throw new Error("context JSON parse error");return new e({partial:c,container:d,context:b})}).get()},settings:function(){var a=this;return a.params.settings&&0!==a.params.settings.length?a.params.settings:a.params.primarySetting?[a.params.primarySetting]:[a.id]},isRelatedSetting:function(a){var c=this;return _.isString(a)&&(a=b(a)),!!a&&-1!==_.indexOf(c.settings(),a.id)},showControl:function(){var a=this,c=a.params.primarySetting;c||(c=_.first(a.settings())),"nav_menu"===a.getType()&&(a.params.navMenuArgs.theme_location?c="nav_menu_locations["+a.params.navMenuArgs.theme_location+"]":a.params.navMenuArgs.menu&&(c="nav_menu["+String(a.params.navMenuArgs.menu)+"]")),b.preview.send("focus-control-for-setting",c)},preparePlacement:function(b){a(b.container).addClass("customize-partial-refreshing")},_pendingRefreshPromise:null,refresh:function(){var a,b=this;return a=c.requestPartial(b),b._pendingRefreshPromise||(_.each(b.placements(),function(a){b.preparePlacement(a)}),a.done(function(a){_.each(a,function(a){b.renderContent(a)})}),a.fail(function(a,c){b.fallback(a,c)}),b._pendingRefreshPromise=a,a.always(function(){b._pendingRefreshPromise=null})),a},renderContent:function(b){var d,e,f=this;if(!b.container)return f.fallback(new Error("no_container"),[b]),!1;if(b.container=a(b.container),!1===b.addedContent)return f.fallback(new Error("missing_render"),[b]),!1;if(!_.isString(b.addedContent))return f.fallback(new Error("non_string_content"),[b]),!1;c.orginalDocumentWrite=document.write,document.write=function(){throw new Error(c.data.l10n.badDocumentWrite)};try{if(d=b.addedContent,wp.emoji&&wp.emoji.parse&&!a.contains(document.head,b.container[0])&&(d=wp.emoji.parse(d)),f.params.containerInclusive)e=a(d),b.context=_.extend(b.context,e.data("customize-partial-placement-context")||{}),e.data("customize-partial-placement-context",b.context),b.removedNodes=b.container,b.container=e,b.removedNodes.replaceWith(b.container),b.container.attr("title",c.data.l10n.shiftClickToEdit);else{for(b.removedNodes=document.createDocumentFragment();b.container[0].firstChild;)b.removedNodes.appendChild(b.container[0].firstChild);b.container.html(d)}b.container.removeClass("customize-render-content-error")}catch(g){"undefined"!=typeof console&&console.error&&console.error(f.id,g),f.fallback(g,[b])}return document.write=c.orginalDocumentWrite,c.orginalDocumentWrite=null,f.createEditShortcutForPlacement(b),b.container.removeClass("customize-partial-refreshing"),b.container.data("customize-partial-content-rendered",!0),wp.mediaelement&&wp.mediaelement.initialize(),c.trigger("partial-content-rendered",b),!0},fallback:function(){var a=this;a.params.fallbackRefresh&&c.requestFullRefresh()}}),c.Placement=e=b.Class.extend({partial:null,container:null,startNode:null,endNode:null,context:null,addedContent:null,removedNodes:null,initialize:function(b){var c=this;if(b=_.extend({},b||{}),!b.partial||!b.partial.extended(d))throw new Error("Missing partial");b.context=b.context||{},b.container&&(b.container=a(b.container)),_.extend(c,b)}}),c.partialConstructor={},c.partial=new b.Values({defaultConstructor:d}),c.getCustomizeQuery=function(){var a={};return b.each(function(b,c){b._dirty&&(a[c]=b())}),{wp_customize:"on",nonce:b.settings.nonce.preview,customize_theme:b.settings.theme.stylesheet,customized:JSON.stringify(a),customize_changeset_uuid:b.settings.changeset.uuid}},c._pendingPartialRequests={},c._debouncedTimeoutId=null,c._currentRequest=null,c.requestFullRefresh=function(){b.preview.send("refresh")},c.requestPartial=function(d){var f;return c._debouncedTimeoutId&&(clearTimeout(c._debouncedTimeoutId),c._debouncedTimeoutId=null),c._currentRequest&&(c._currentRequest.abort(),c._currentRequest=null),f=c._pendingPartialRequests[d.id],f&&"pending"===f.deferred.state()||(f={deferred:a.Deferred(),partial:d},c._pendingPartialRequests[d.id]=f),d=null,c._debouncedTimeoutId=setTimeout(function(){var a,d,f,g;c._debouncedTimeoutId=null,a=c.getCustomizeQuery(),f={},d={},_.each(c._pendingPartialRequests,function(a,b){f[b]=a.partial.placements(),c.partial.has(b)?d[b]=_.map(f[b],function(a){return a.context||{}}):a.deferred.rejectWith(a.partial,[new Error("partial_removed"),f[b]])}),a.partials=JSON.stringify(d),a[c.data.renderQueryVar]="1",g=c._currentRequest=wp.ajax.send(null,{data:a,url:b.settings.url.self}),g.done(function(a){c.trigger("render-partials-response",a),a.errors&&"undefined"!=typeof console&&console.warn&&_.each(a.errors,function(a){console.warn(a)}),_.each(c._pendingPartialRequests,function(b,c){var d;_.isArray(a.contents[c])?(d=_.map(a.contents[c],function(a,d){var g=f[c][d];return g?g.addedContent=a:g=new e({partial:b.partial,addedContent:a}),g}),b.deferred.resolveWith(b.partial,[d])):b.deferred.rejectWith(b.partial,[new Error("unrecognized_partial"),f[c]])}),c._pendingPartialRequests={}}),g.fail(function(a,b){"abort"!==b&&(_.each(c._pendingPartialRequests,function(b,c){b.deferred.rejectWith(b.partial,[a,f[c]])}),c._pendingPartialRequests={})})},b.settings.timeouts.selectiveRefresh),f.deferred.promise()},c.addPartials=function(b,d){var f;b||(b=document.documentElement),b=a(b),d=_.extend({triggerRendered:!0},d||{}),f=b.find("[data-customize-partial-id]"),b.is("[data-customize-partial-id]")&&(f=f.add(b)),f.each(function(){var b,f,g,h,i,j,k=a(this);g=k.data("customize-partial-id"),g&&(j=k.data("customize-partial-placement-context")||{},b=c.partial(g),b||(i=k.data("customize-partial-options")||{},i.constructingContainerContext=k.data("customize-partial-placement-context")||{},h=c.partialConstructor[k.data("customize-partial-type")]||c.Partial,b=new h(g,i),c.partial.add(b.id,b)),d.triggerRendered&&!k.data("customize-partial-content-rendered")&&(f=new e({partial:b,context:j,container:k}),a(f.container).attr("title",c.data.l10n.shiftClickToEdit),b.createEditShortcutForPlacement(f),c.trigger("partial-content-rendered",f)),k.data("customize-partial-content-rendered",!0))})},b.bind("preview-ready",function(){var d,e,f;_.extend(c.data,_customizePartialRefreshExports),_.each(c.data.partials,function(a,b){var d,e=c.partial(b);e?_.extend(e.params,a):(d=c.partialConstructor[a.type]||c.Partial,e=new d(b,{params:a}),c.partial.add(b,e))}),d=function(a,b){var d=this;c.partial.each(function(c){c.isRelatedSetting(d,a,b)&&c.refresh()})},e=function(a){d.call(a,a(),null),a.bind(d)},f=function(a){d.call(a,null,a()),a.unbind(d)},b.bind("add",e),b.bind("remove",f),b.each(function(a){a.bind(d)}),c.addPartials(document.documentElement,{triggerRendered:!1}),"undefined"!=typeof MutationObserver&&(c.mutationObserver=new MutationObserver(function(b){_.each(b,function(b){c.addPartials(a(b.target))})}),c.mutationObserver.observe(document.documentElement,{childList:!0,subtree:!0})),b.selectiveRefresh.bind("partial-content-rendered",function(a){a.container&&c.addPartials(a.container)}),b.selectiveRefresh.bind("render-partials-response",function(a){a.setting_validities&&b.preview.send("selective-refresh-setting-validities",a.setting_validities)}),b.preview.bind("edit-shortcut-visibility",function(a){b.selectiveRefresh.editShortcutVisibility.set(a)}),b.selectiveRefresh.editShortcutVisibility.bind(function(b){var c,d=a(document.body);c="hidden"===b&&d.hasClass("customize-partial-edit-shortcuts-shown")&&!d.hasClass("customize-partial-edit-shortcuts-hidden"),d.toggleClass("customize-partial-edit-shortcuts-hidden",c),d.toggleClass("customize-partial-edit-shortcuts-shown","visible"===b)}),b.preview.bind("active",function(){c.partial.each(function(a){a.deferred.ready.resolve()}),c.partial.bind("add",function(a){a.deferred.ready.resolve()})})}),c}(jQuery,wp.customize);
;wp.customize.widgetsPreview=wp.customize.WidgetCustomizerPreview=function(a,b,c,d){var e;return e={renderedSidebars:{},renderedWidgets:{},registeredSidebars:[],registeredWidgets:{},widgetSelectors:[],preview:null,l10n:{widgetTooltip:""},selectiveRefreshableWidgets:{}},e.init=function(){var a=this;a.preview=d.preview,b.isEmpty(a.selectiveRefreshableWidgets)||a.addPartials(),a.buildWidgetSelectors(),a.highlightControls(),a.preview.bind("highlight-widget",a.highlightWidget),d.preview.bind("active",function(){a.highlightControls()})},e.WidgetPartial=d.selectiveRefresh.Partial.extend({initialize:function(a,c){var f,g=this;if(f=a.match(/^widget\[(.+)]$/),!f)throw new Error("Illegal id for widget partial.");g.widgetId=f[1],g.widgetIdParts=e.parseWidgetId(g.widgetId),c=c||{},c.params=b.extend({settings:[e.getWidgetSettingId(g.widgetId)],containerInclusive:!0},c.params||{}),d.selectiveRefresh.Partial.prototype.initialize.call(g,a,c)},refresh:function(){var b,c=this;return e.selectiveRefreshableWidgets[c.widgetIdParts.idBase]?d.selectiveRefresh.Partial.prototype.refresh.call(c):(b=a.Deferred(),b.reject(),c.fallback(),b.promise())},renderContent:function(a){var b=this;d.selectiveRefresh.Partial.prototype.renderContent.call(b,a)&&(d.preview.send("widget-updated",b.widgetId),d.selectiveRefresh.trigger("widget-updated",b))}}),e.SidebarPartial=d.selectiveRefresh.Partial.extend({initialize:function(a,c){var e,f=this;if(e=a.match(/^sidebar\[(.+)]$/),!e)throw new Error("Illegal id for sidebar partial.");if(f.sidebarId=e[1],c=c||{},c.params=b.extend({settings:["sidebars_widgets["+f.sidebarId+"]"]},c.params||{}),d.selectiveRefresh.Partial.prototype.initialize.call(f,a,c),!f.params.sidebarArgs)throw new Error("The sidebarArgs param was not provided.");if(f.params.settings.length>1)throw new Error("Expected SidebarPartial to only have one associated setting")},ready:function(){var a=this;b.each(a.settings(),function(c){d(c).bind(b.bind(a.handleSettingChange,a))}),d.selectiveRefresh.bind("partial-content-rendered",function(c){var f=c.partial.extended(e.WidgetPartial)&&-1!==b.indexOf(a.getWidgetIds(),c.partial.widgetId);f&&d.selectiveRefresh.trigger("sidebar-updated",a)}),d.bind("change",function(c){var d,f;f=e.parseWidgetSettingId(c.id),f&&(d=f.idBase,f.number&&(d+="-"+String(f.number)),-1!==b.indexOf(a.getWidgetIds(),d)&&a.ensureWidgetPlacementContainers(d))})},findDynamicSidebarBoundaryNodes:function(){var a,c,d=this,e={};return a=/^(dynamic_sidebar_before|dynamic_sidebar_after):(.+):(\d+)$/,c=function(f){b.each(f,function(f){var g;if(8===f.nodeType){if(g=f.nodeValue.match(a),!g||g[2]!==d.sidebarId)return;b.isUndefined(e[g[3]])&&(e[g[3]]={before:null,after:null,instanceNumber:parseInt(g[3],10)}),"dynamic_sidebar_before"===g[1]?e[g[3]].before=f:e[g[3]].after=f}else 1===f.nodeType&&c(f.childNodes)})},c(document.body.childNodes),b.values(e)},placements:function(){var a=this;return b.map(a.findDynamicSidebarBoundaryNodes(),function(b){return new d.selectiveRefresh.Placement({partial:a,container:null,startNode:b.before,endNode:b.after,context:{instanceNumber:b.instanceNumber}})})},getWidgetIds:function(){var a,c,e=this;if(a=e.settings()[0],!a)throw new Error("Missing associated setting.");if(!d.has(a))throw new Error("Setting does not exist.");if(c=d(a).get(),!b.isArray(c))throw new Error("Expected setting to be array of widget IDs");return c.slice(0)},reflowWidgets:function(){var a,c,e,f=this,g=[];return c=f.getWidgetIds(),a=f.placements(),e={},b.each(c,function(a){var b=d.selectiveRefresh.partial("widget["+a+"]");b&&(e[a]=b)}),b.each(a,function(a){var c,f=[],h=!1,i=-1;b.each(e,function(d){b.each(d.placements(),function(b){a.context.instanceNumber===b.context.sidebar_instance_number&&(c=b.container.index(),f.push({partial:d,placement:b,position:c}),c<i&&(h=!0),i=c)})}),h&&(b.each(f,function(b){a.endNode.parentNode.insertBefore(b.placement.container[0],a.endNode),d.selectiveRefresh.trigger("partial-content-moved",b.placement)}),g.push(a))}),g.length>0&&d.selectiveRefresh.trigger("sidebar-updated",f),g},ensureWidgetPlacementContainers:function(c){var f,g=this,h=!1,i="widget["+c+"]";return f=d.selectiveRefresh.partial(i),f||(f=new e.WidgetPartial(i,{params:{}})),b.each(g.placements(),function(d){var e,i;e=b.find(f.placements(),function(a){return a.context.sidebar_instance_number===d.context.instanceNumber}),e||(i=a(g.params.sidebarArgs.before_widget.replace(/%1\$s/g,c).replace(/%2\$s/g,"widget")+g.params.sidebarArgs.after_widget),i[0]&&(i.attr("data-customize-partial-id",f.id),i.attr("data-customize-partial-type","widget"),i.attr("data-customize-widget-id",c),i.data("customize-partial-placement-context",{sidebar_id:g.sidebarId,sidebar_instance_number:d.context.instanceNumber}),d.endNode.parentNode.insertBefore(i[0],d.endNode),h=!0))}),d.selectiveRefresh.partial.add(f.id,f),h&&g.reflowWidgets(),f},handleSettingChange:function(a,c){var e,f,g,h=this,i=[];return(e=c.length>0&&0===a.length||a.length>0&&0===c.length)?void h.fallback():(f=b.difference(c,a),b.each(f,function(a){var c=d.selectiveRefresh.partial("widget["+a+"]");c&&b.each(c.placements(),function(a){var b=a.context.sidebar_id===h.sidebarId||a.context.sidebar_args&&a.context.sidebar_args.id===h.sidebarId;b&&a.container.remove()})}),g=b.difference(a,c),b.each(g,function(a){var b=h.ensureWidgetPlacementContainers(a);i.push(b)}),b.each(i,function(a){a.refresh()}),void d.selectiveRefresh.trigger("sidebar-updated",h))},refresh:function(){var c=this,e=a.Deferred();return e.fail(function(){c.fallback()}),0===c.placements().length?e.reject():(b.each(c.reflowWidgets(),function(a){d.selectiveRefresh.trigger("partial-content-rendered",a)}),e.resolve()),e.promise()}}),d.selectiveRefresh.partialConstructor.sidebar=e.SidebarPartial,d.selectiveRefresh.partialConstructor.widget=e.WidgetPartial,e.addPartials=function(){b.each(e.registeredSidebars,function(a){var b,c="sidebar["+a.id+"]";b=d.selectiveRefresh.partial(c),b||(b=new e.SidebarPartial(c,{params:{sidebarArgs:a}}),d.selectiveRefresh.partial.add(b.id,b))})},e.buildWidgetSelectors=function(){var b=this;a.each(b.registeredSidebars,function(c,d){var e,f,g,h=[d.before_widget,d.before_title,d.after_title,d.after_widget].join("");e=a(h),f=e.prop("tagName")||"",g=e.prop("className")||"",g&&(g=g.replace(/\S*%[12]\$s\S*/g,""),g=g.replace(/^\s+|\s+$/g,""),g&&(f+="."+g.split(/\s+/).join(".")),b.widgetSelectors.push(f))})},e.highlightWidget=function(b){var c=a(document.body),d=a("#"+b);c.find(".widget-customizer-highlighted-widget").removeClass("widget-customizer-highlighted-widget"),d.addClass("widget-customizer-highlighted-widget"),setTimeout(function(){d.removeClass("widget-customizer-highlighted-widget")},500)},e.highlightControls=function(){var b=this,c=this.widgetSelectors.join(",");d.settings.channel&&(a(c).attr("title",this.l10n.widgetTooltip),a(document).on("mouseenter",c,function(){b.preview.send("highlight-widget-control",a(this).prop("id"))}),a(document).on("click",c,function(c){c.shiftKey&&(c.preventDefault(),b.preview.send("focus-widget-control",a(this).prop("id")))}))},e.parseWidgetId=function(a){var b,c={idBase:"",number:null};return b=a.match(/^(.+)-(\d+)$/),b?(c.idBase=b[1],c.number=parseInt(b[2],10)):c.idBase=a,c},e.parseWidgetSettingId=function(a){var b,c={idBase:"",number:null};return(b=a.match(/^widget_([^\[]+?)(?:\[(\d+)])?$/))?(c.idBase=b[1],b[2]&&(c.number=parseInt(b[2],10)),c):null},e.getWidgetSettingId=function(a){var b,c=this.parseWidgetId(a);return b="widget_"+c.idBase,c.number&&(b+="["+String(c.number)+"]"),b},d.bind("preview-ready",function(){a.extend(e,_wpWidgetCustomizerPreviewSettings),e.init()}),e}(jQuery,_,wp,wp.customize);