/*! 
 * BuddyBoss Wall JavaScript Library 
 * @package BuddyBoss Wall 
 */!function(a,b,c){function d(b,c){this.bodyOverflowX,this.checkInterval=null,this.content,this.$el=a(b),this.elProxyPosition,this.$elProxy,this.enabled=!0,this.options=a.extend({},j,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()}function e(b,c){var d=!0;return a.each(b,function(a,e){if("undefined"==typeof c[a]||b[a]!==c[a])return d=!1,!1}),d}function f(){return!l&&k}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",j={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={init:function(){var b=this;if(c.querySelector){if(null!==b.options.content)b.setContent(b.options.content);else{var d=b.$el.attr("title");"undefined"==typeof d&&(d=null),b.setContent(d)}var e=b.options.functionInit(b.$el,b.content);"undefined"!=typeof e&&b.setContent(e),b.$el.removeAttr("title").addClass("tooltipstered"),!k&&b.options.iconDesktop||k&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!0,b.showTooltip())}).on("mouseleave."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!1)}),k&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b.showTooltipNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){f()&&!b.options.touchDevices||b.showTooltip()})}},showTooltip:function(){var a=this;"shown"!=a.status&&"appearing"!=a.status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a.showTooltipNow()},a.options.delay):a.showTooltipNow())},showTooltipNow:function(){var c=this;clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,c.enabled&&null!==c.content&&(c.options.onlyOne&&a(".tooltipstered").not(c.$el).each(function(b,c){var d=a(c),e=d[h]("status"),f=d[h]("option","autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d[h]("hide")}),c.options.functionBefore(c.$elProxy,function(){if("hidden"!==c.status){var d=0;"disappearing"===c.status&&(c.status="appearing",g()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.stop().fadeIn(function(){c.status="shown"}))}else{c.status="appearing";var d=c.options.speed;c.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var e="tooltipster-"+c.options.animation,f="-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;",h=c.options.fixedWidth>0?"width:"+Math.round(c.options.fixedWidth)+"px;":"",i=c.options.maxWidth>0?"max-width:"+Math.round(c.options.maxWidth)+"px;":"",j=c.options.interactive?"pointer-events: auto;":"";if(c.$tooltip=a('<div class="tooltipster-base '+c.options.theme+'" style="'+h+" "+i+" "+j+" "+f+'"><div class="tooltipster-content"></div></div>'),g()&&c.$tooltip.addClass(e),c.insertContent(),c.$tooltip.appendTo("body"),c.positionTooltip(),c.options.functionReady(c.$el,c.$tooltip),g()?(c.$tooltip.addClass(e+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.css("display","none").fadeIn(c.options.speed,function(){c.status="shown"}),c.setCheckInterval(),a(b).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.positionTooltip()}),c.options.autoClose)if(a("body").off("."+c.namespace),"hover"==c.options.trigger)if(k&&setTimeout(function(){a("body").on("touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive){k&&c.$tooltip.on("touchstart."+c.namespace,function(a){a.stopPropagation()});var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l),l=setTimeout(function(){c.hideTooltip()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hideTooltip()});else"click"==c.options.trigger&&(setTimeout(function(){a("body").on("click."+c.namespace+" touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive&&c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(a){a.stopPropagation()}))}c.options.timer>0&&(c.timerHide=setTimeout(function(){c.timerHide=null,c.hideTooltip()},c.options.timer+d))}))},setCheckInterval:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.status||0===a("body").find(b.$tooltip).length)"shown"!=b.status&&"appearing"!=b.status||b.hideTooltip(),b.cancelCheckInterval();else if(b.options.positionTracker){var c=b.positionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||b.positionTooltip()}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(){var c=this;if(clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,"shown"==c.status||"appearing"==c.status){c.status="disappearing";var d=function(){c.status="hidden",c.$tooltip.remove(),c.$tooltip=null,a(b).off("."+c.namespace),a("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX),c.$elProxy.off("."+c.namespace+"-autoClose"),c.options.functionAfter(c.$elProxy)};g()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(d)):c.$tooltip.stop().fadeOut(c.options.speed,d)}},setContent:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.content=a},insertContent:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.content||a.options.contentAsHTML?b.empty().append(a.content):b.text(a.content)},updateTooltip:function(a){var b=this;b.setContent(a),null!==b.content?"hidden"!==b.status&&(b.insertContent(),b.positionTooltip(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hideTooltip()},positionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},positionTooltip:function(){function c(){var c=a(b).scrollLeft();D-c<0&&(f=D-c,D=c),D+j-c>g&&(f=D-(g+c-j),D=g+c-j)}function d(c,d){h.offset.top-a(b).scrollTop()-l-G-12<0&&d.indexOf("top")>-1&&(I=c),h.offset.top+h.dimension.height+l+12+G>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(I=c,F=h.offset.top-l-G-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e.positionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,j=e.$tooltip.outerWidth(!1),k=e.$tooltip.innerWidth()+1,l=e.$tooltip.outerHeight(!1);if(e.$elProxy.is("area")){var m=e.$elProxy.attr("shape"),n=e.$elProxy.parent().attr("name"),o=a('img[usemap="#'+n+'"]'),p=o.offset().left,q=o.offset().top,r=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==m){var s=parseInt(r[0]),t=parseInt(r[1]),u=parseInt(r[2]);h.dimension.height=2*u,h.dimension.width=2*u,h.offset.top=q+t-u,h.offset.left=p+s-u}else if("rect"==m){var s=parseInt(r[0]),t=parseInt(r[1]),v=parseInt(r[2]),w=parseInt(r[3]);h.dimension.height=w-t,h.dimension.width=v-s,h.offset.top=q+t,h.offset.left=p+s}else if("poly"==m){var x=0,y=0,z=0,A=0,B="even";for(i=0;i<r.length;i++){var C=parseInt(r[i]);"even"==B?(C>z&&(z=C,0===i&&(x=z)),C<x&&(x=C),B="odd"):(C>A&&(A=C,1==i&&(y=A)),C<y&&(y=C),B="even")}h.dimension.height=A-y,h.dimension.width=z-x,h.offset.top=q+y,h.offset.left=p+x}else h.dimension.height=o.outerHeight(!1),h.dimension.width=o.outerWidth(!1),h.offset.top=q,h.offset.left=p}0===e.options.fixedWidth&&e.$tooltip.css({width:Math.round(k)+"px","padding-left":"0px","padding-right":"0px"});var D=0,E=0,F=0,G=parseInt(e.options.offsetY),H=parseInt(e.options.offsetX),I=e.options.position;if("top"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left+H-J/2,F=h.offset.top-l-G-12,c(),d("bottom","top")}if("top-left"==I&&(D=h.offset.left+H,F=h.offset.top-l-G-12,c(),d("bottom-left","top-left")),"top-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top-l-G-12,c(),d("bottom-right","top-right")),"bottom"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left-J/2+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top","bottom")}if("bottom-left"==I&&(D=h.offset.left+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top-left","bottom-left")),"bottom-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top+h.dimension.height+G+12,c(),d("top-right","bottom-right")),"left"==I){D=h.offset.left-H-j-12,E=h.offset.left+H+h.dimension.width+12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D<0&&E+j>g){var L=2*parseFloat(e.$tooltip.css("border-width")),M=j+D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),D=h.offset.left-H-M-12-L,K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D<0&&(D=h.offset.left+H+h.dimension.width+12,f="left")}if("right"==I){D=h.offset.left+H+h.dimension.width+12,E=h.offset.left-H-j-12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D+j>g&&E<0){var L=2*parseFloat(e.$tooltip.css("border-width")),M=g-D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D+j>g&&(D=h.offset.left-H-j-12,f="right")}if(e.options.arrow){var N="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1)var O=e.$tooltip.css("background-color");else var O=e.options.arrowColor;if(f?"left"==f?(N="tooltipster-arrow-right",f=""):"right"==f?(N="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==I||"top-left"==I||"top-right"==I)var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)var P=parseFloat(e.$tooltip.css("border-top-width")),Q=e.$tooltip.css("border-top-color");else if("left"==I)var P=parseFloat(e.$tooltip.css("border-right-width")),Q=e.$tooltip.css("border-right-color");else if("right"==I)var P=parseFloat(e.$tooltip.css("border-left-width")),Q=e.$tooltip.css("border-left-color");else var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");P>1&&P++;var R="";if(0!==P){var S="",T="border-color: "+Q+";";N.indexOf("bottom")!==-1?S="margin-top: -"+Math.round(P)+"px;":N.indexOf("top")!==-1?S="margin-bottom: -"+Math.round(P)+"px;":N.indexOf("left")!==-1?S="margin-right: -"+Math.round(P)+"px;":N.indexOf("right")!==-1&&(S="margin-left: -"+Math.round(P)+"px;"),R='<span class="tooltipster-arrow-border" style="'+S+" "+T+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var U='<div class="'+N+' tooltipster-arrow" style="'+f+'">'+R+'<span style="border-color:'+O+';"></span></div>';e.$tooltip.append(U)}e.$tooltip.css({top:Math.round(F)+"px",left:Math.round(D)+"px"})}}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(j,b[1]);break;default:c=!1}return!!c||this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster");if(!c)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');switch(b[0]){case"content":case"update":if("undefined"==typeof b[1])return e=c.content,!1;c.updateTooltip(b[1]);break;case"destroy":c.hideTooltip(),c.$el[0]!==c.$elProxy[0]&&c.$elProxy.remove();var d="string"==typeof c.content?c.content:a("<div></div>").append(c.content).html();c.$el.removeClass("tooltipstered").attr("title",d).removeData("tooltipster").off("."+c.namespace);break;case"disable":c.hideTooltip(),c.enabled=!1;break;case"elementIcon":return e=c.$el[0]!==c.$elProxy[0]?c.$elProxy[0]:void 0,!1;case"elementTooltip":return e=c.$tooltip?c.$tooltip[0]:void 0,!1;case"enable":c.enabled=!0;break;case"hide":c.hideTooltip();break;case"option":e=c.options[b[1]];break;case"reposition":c.positionTooltip();break;case"show":c.showTooltipNow();break;case"status":return e=c.status,!1;default:throw new Error('Unknown method .tooltipster("'+b[0]+'")')}}),"#*$~&"!==e?e:this}return this.each(function(){a(this).data("tooltipster")||a(this).data("tooltipster",new d(this,b[0]))})};var k=!!("ontouchstart"in b),l=!1;a("body").one("mousemove",function(){l=!0})}(jQuery,window,document);
;/*! 
 * BuddyBoss Wall JavaScript Library 
 * @package BuddyBoss Wall 
 */function budyboss_wall_comment_like_unlike(a){if(jq=jQuery,a=jq(a),a.hasClass("fav-comment")||a.hasClass("unfav-comment")){var b=a.hasClass("fav-comment")?"fav":"unfav",c=a.closest("[id^=acomment-]"),d=c.attr("id").substr(9,c.attr("id").length);a.addClass("loading"),jq.post(ajaxurl,{action:"activity_mark_"+b,cookie:bp_get_cookies(),id:d,item_type:"comment"},function(c){a.removeClass("loading"),a.fadeOut(200,function(){jq(this).html(c),jq(this).attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),jq(this).fadeIn(200)}),"fav"==b?(jq(".item-list-tabs #activity-favs-personal-li").length||(jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul #activity-mentions").before('<li id="activity-favorites"><a href="#">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)),a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("unfav-comment"),a.addClass("fav-comment"),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())-1),Number(jq(".item-list-tabs ul #activity-favorites span").html())||(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove()))})}return!1}function bb_url_scrapeURL(a){var b="";if(a.indexOf("http://")>=0?b=bb_url_getUrl("http://",a):a.indexOf("https://")>=0?b=bb_url_getUrl("https://",a):a.indexOf("www.")>=0&&(b=bb_url_getUrl("www",a)),""!=b){var c=document.createElement("a");c.href=b;var d=c.hostname;window.Code.BuddyBoss_Wall_Util.state.excluded_oembed_hosts.indexOf(d)!=-1&&(b="")}return""===b?(jQuery("#bb-url-scrapper").hide(),void jQuery(".bb-url-scrapper-container").hide()):void bb_load_url_preview(b)}function bb_load_url_preview(a){bb_is_valid_url(a)&&bb_url_getUrlData(a)}function bb_url_abortTimer(){null!=bb_url_tid&&clearTimeout(bb_url_tid)}function bb_url_getUrlData(a){jQuery("#whats-new-submit input").prop("disabled",!0),jQuery(".bb-url-scrapper-container").show(),jQuery(".bb-url-scrapper-loading").show(),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-error").hide();var b={action:"bb_url_parser",url:a};jQuery.ajax({url:ajaxurl,data:b,type:"POST",dataType:"json",success:function(b){if(jQuery("#whats-new-submit input").prop("disabled",!1),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1),jQuery("#bb-url-scrapper-img-holder").show(),""==b.title)return void jQuery(".bb-url-scrapper-container").hide();if(jQuery(".bb-url-scrapper-loading").hide(),""==b.error){jQuery("#bb-url-error").hide(),jQuery("#bb-url-scrapper").show(),bb_urlInUse=a;var c="";jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage",""),bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,c=b.title,jQuery("#bb-url-scrapper-title").html(c),jQuery("#bb-url-scrapper-title-hidden").val(c),jQuery("#bb-url-scrapper-url").text(a),jQuery("#bb-url-scrapper-url-hidden").val(a),jQuery("#bb-url-scrapper-description").html(b.description),jQuery("#bb-url-scrapper-description-hidden").val(b.description),jQuery.each(b.images,function(a,b){bb_url_imgSrcArray.push(b)}),0!=bb_url_imgSrcArray.length&&jQuery("#buddyboss-media-add-photo-button").prop("disabled",!0)}else jQuery("#bb-url-error").text(b.error),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-error").show();jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text("1 of "+bb_url_imgSrcArray.length)}})}function bb_is_valid_url(a){var b=/^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/;return b.test(a)}function bb_url_getUrl(a,b){for(var c="",d=b.indexOf(a),e=d;e<b.length&&(" "!=b[e]&&"\n"!=b[e]);e++)c+=b[e];return"www"===a&&(a="http://",c=a+c),c}var jq=$=jQuery;window.Code=window.Code||{},window.Code.BuddyBoss_Wall_Util=function(a,b,c,d){var e={state:c,lang:function(a){var a=a||"undefined key!";return c[a]||"Language key missing for: "+a}};return e}(window,window.jQuery,window.BuddyBoss_Wall_Appstate||!1),window.Code.BuddyBoss_Wall=function(a,b,c,d){var e=c.state||{},f=(c.lang,{on:null,setup_form:function(){var a=b("#buddyboss-wall-tpl-form"),c=b("body.just-me.has-activity #item-body > .activity").first(),d=b("#whats-new-form");!d.length&&a.length&&c.length},setup_comments:function(){var a=b(".buddyboss-wall-tpl-activity-comments");a.each(function(){var a=b(this),c=a.parent().find(".activity-comments");c.length&&!a.data("buddyboss-wall-appended")&&(a.data("buddyboss-wall-appended",!0),c.prepend(a.html()))})},setup_link_previews:function(){jQuery("#whats-new").addClass("bblinkBox"),jQuery("#whats-new-textarea").append('<div class="bb-url-scrapper-container"><i class="bb-url-scrapper-loading buddyboss-wall-ajax-loader fa fa-spinner"></i><div id="bb-url-scrapper"><div id="bb-url-scrapper-img-holder"><div id="bb-url-scrapper-img"><img src="" /><a title="Cancel Preview Image" href="#" id="bbimagecloselinksuggestion"><i class="fa fa-times"></i></a></div><div class="bb-url-thumb-nav"><input type="button" id="bb-url-prevPicButton" value="<" /><input type="button" id="bb-url-nextPicButton" value=">"><div id="bb-url-scrapper-img-count"></div></div></div><div id="bb-url-scrapper-text-holder"><div id="bb-url-scrapper-title"></div><div id="bb-url-scrapper-url"></div><div id="bb-url-scrapper-description"></div><div id="bb-url-error"></div><a title="Cancel Preview" href="#" id="bbcloselinksuggestion"><i class="fa fa-times"></i></a></div></div></div>'),jQuery("#whats-new-form").append('<input type="hidden" id="bb-url-scrapper-img-hidden" name="bb-url-scrapper-img-hidden" value="" /><input type="hidden" id="bb-url-scrapper-title-hidden"  name="bb-url-scrapper-title-hidden" value="" /><input type="hidden" id="bb-url-scrapper-url-hidden" name="bb-url-scrapper-url-hidden" value="" /><input type="hidden" id="bb-url-scrapper-description-hidden" name="bb-url-scrapper-description-hidden" value="" /><input type="hidden" id="bb-url-no-scrapper" name="bb-url-no-scrapper" value="1" />'),jQuery("#bb-url-scrapper").hide(),jQuery("#bb-url-nextPicButton").click(function(a){bb_url_imgArrayCounter++,bb_url_imgArrayCounter>=bb_url_imgSrcArray.length&&(bb_url_imgArrayCounter=0),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bb-url-prevPicButton").click(function(a){bb_url_imgArrayCounter--,bb_url_imgArrayCounter<0&&(bb_url_imgArrayCounter=bb_url_imgSrcArray.length-1),jQuery("#bb-url-scrapper-img").find("img").attr("src",bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-hidden").val(bb_url_imgSrcArray[bb_url_imgArrayCounter]),jQuery("#bb-url-scrapper-img-count").text(bb_url_imgArrayCounter+1+" of "+bb_url_imgSrcArray.length)}),jQuery("#bbimagecloselinksuggestion").click(function(a){a.preventDefault(),jQuery("#bb-url-scrapper-img-holder").hide(),jQuery("#bb-url-scrapper-img-hidden").val(""),jQuery("#buddyboss-media-add-photo-button").prop("disabled",!1)}),jQuery("#bbcloselinksuggestion").click(function(a){a.preventDefault(),jQuery(".bb-url-scrapper-container").hide(),jQuery("#bb-url-no-scrapper").val("1"),jQuery("#bb-url-scrapper-description").text(""),jQuery("#bb-url-scrapper-description-hidden").val(""),jQuery("#bb-url-scrapper-title").text(""),jQuery("#bb-url-scrapper-title-hidden").val(""),jQuery("#bb-url-scrapper-url").text(""),jQuery("#bb-url-scrapper-url-hidden").val(""),jQuery("#bb-url-scrapper-img").css("backgroundImage","")}),jQuery(".bblinkBox").on("keyup",function(a){"1"===jQuery("#bb-url-no-scrapper").val()&&(urlText=this.value,bb_url_abortTimer(),bb_url_tid=setTimeout(function(){bb_url_scrapeURL(urlText)},1e3),13==a.which&&this.rows++)})},setup:function(){f.on=!0,b.ajaxPrefilter(f.prefilter),b(document).ajaxSuccess(function(a){f.setup_comments(),setTimeout(f.setup_comments,205),setTimeout(f.setup_comments,500)}),f.setup_form(),f.setup_comments(),e.enabled_link_preview&&f.setup_link_previews();var a=b("#buddyboss-wall-tpl-greeting").html(),c=b("#whats-new-form .activity-greeting");c.length&&a&&c.html(a).show()},teardown:function(){f.on=!1},prefilter:function(a,c,d){item_type=c.data&&c.data.item_type||"";var g,h=parseInt(c.data&&c.data.id||0),i=c.data&&c.data.action||"",j="activity_mark_fav"===i||"activity_mark_unfav"===i,k="post_update"===i,l="comment"===item_type;k&&e.enabled_link_preview&&(g=b("#bb-url-scrapper-url").html().length,g>0&&(a.data+="&bb_link_url="+encodeURIComponent(b("#bb-url-scrapper-url-hidden").val()),a.data+="&bb_link_title="+encodeURIComponent(b("#bb-url-scrapper-title-hidden").val()),a.data+="&bb_link_img="+encodeURIComponent(b("#bb-url-scrapper-img-hidden").val()),a.data+="&bb_link_description="+encodeURIComponent(b("#bb-url-scrapper-description-hidden").val()),b(".bb-url-scrapper-container").hide(),b("#bb-url-no-scrapper").val("1"),b("#bb-url-scrapper-description").text(""),b("#bb-url-scrapper-description-hidden").val(""),b("#bb-url-scrapper-title").text(""),b("#bb-url-scrapper-title-hidden").val(""),b("#bb-url-scrapper-url").text(""),b("#bb-url-scrapper-url-hidden").val(""),b("#bb-url-scrapper-img").css("backgroundImage",""))),j&&h>0&&(g=b("#activity-"+h).find(".button.loading"),type=g.hasClass("fav")?"fav":"unfav",l&&(g=b("#acomment-"+h).find(".acomment-like.loading"),type=g.hasClass("fav-comment")?"fav":"unfav"),a.success=function(a){return function(c,d,e){c[0]+c[1]==="-1"&&b.isFunction(a)?a(c):f.success(g,type,l,c,d,e)}}(a.success))},success:function(a,b,c,e,f,g){var h=!1,i="",j="",k=0,l=!1,m=e.indexOf("{")!=-1&&jQuery.parseJSON(e);if(i=m&&m.but_text?m.but_text:e,m&&m.hasOwnProperty("like_count")&&(m.like_count?(h=!0,j=m.num_likes):l=!0),a.fadeOut(200,function(){var a=jq(this),d=a.parents(".activity-item"),e=d.find(".activity-comments"),f=e.find("ul").first(),g=e.find(".activity-like-count:not(.reply-like-count)"),k=e.find("li").not(".activity-like-count"),m=j;c&&(e=a.parents(".acomment-options"),f=e.find("ul").first(),g=e.find(".activity-like-count"),k=e.find("li").not(".activity-like-count"),m=j),a.html(i),a.attr("title","fav"==b?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav),a.fadeIn(200),g.remove(),h&&(f.length?f.prepend(m):c?e.append('<ul class="acomment-reply-like-content">'+m+"</ul>"):e.prepend("<ul>"+m+"</ul>")),l&&f.length&&!k.length&&f.remove()}),"fav"==b){var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))+1),jq(".item-list-tabs #activity-favorites").length||jq(".item-list-tabs ul li#activity-mentions").before('<li id="activity-favorites"><a href="#" class="localized">'+BP_DTheme.my_favs+" <span>0</span></a></li>"),c?(a.removeClass("fav-comment"),a.addClass("unfav-comment")):(a.removeClass("fav"),a.addClass("unfav")),jq(".item-list-tabs ul #activity-favorites span").html(Number(jq(".item-list-tabs ul #activity-favorites span").html())+1)}else{var n=jq(".item-list-tabs ul #activity-favorites span").html();n!=d&&(k=Number(n.replace(/,/g,""))-1),c?(a.removeClass("unfav-comment"),a.addClass("fav-comment")):(a.removeClass("unfav"),a.addClass("fav")),n&&jq(".item-list-tabs ul #activity-favorites span").html(k),0==k&&(jq(".item-list-tabs ul #activity-favorites").hasClass("selected")&&bp_activity_request(null,null),jq(".item-list-tabs ul #activity-favorites").remove())}"activity-favorites"==jq(".item-list-tabs li.selected").attr("id")&&a.closest(".activity-item").slideUp(100),a.removeClass("loading")}});b(document).ready(function(){f.setup(),String.prototype.startsWith=function(a){return this.match("^"+a)==a}});var g={setup:function(){f.setup()},teardown:function(){f.teardown()}};return g}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util),function(a,b,c,d){var e={ajaxResetTimeout:201},f=c.state||{},g=(c.lang,{}),h={};g.init=function(){h.document=b(document),h.document.ajaxSuccess(g.ajaxSuccessListener),g.initTooltips(),BP_DTheme&&f&&b.extend(BP_DTheme,f)},g.ajaxSuccessListener=function(b,c,d){g.destroyTooltips(),a.setTimeout(g.initTooltips,e.ajaxResetTimeout)},g.destroyTooltips=function(){h.tooltips&&h.tooltips.length&&(h.tooltips.tooltipster("destroy"),h.tooltips=null)},g.initTooltips=function(){h.tooltips=b(".buddyboss-wall-tt-others"),h.tooltips.length&&h.tooltips.tooltipster({contentAsHTML:!0,functionInit:g.getTooltipContent,interactive:!0,position:"top-left",theme:"tooltipster-buddyboss"})},g.getTooltipContent=function(a,b){var c=a.parent().find(".buddyboss-wall-tt-content").detach().html();return c},f.load_tooltips&&(g.load_tooltips=!0),jQuery(document).ready(function(){g.load_tooltips===!0&&g.init()})}(window,window.jQuery,window.Code.BuddyBoss_Wall_Util);var bb_url_imgSrcArray=[],bb_url_imgArrayCounter=0,bb_url_tid;
;/*! 
 * BuddyBoss Media JavaScript Library 
 * @package BuddyBoss Media 
 */!function(a,b,c){function d(b,c){this.bodyOverflowX,this.checkInterval=null,this.content,this.$el=a(b),this.elProxyPosition,this.$elProxy,this.enabled=!0,this.options=a.extend({},j,c),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()}function e(b,c){var d=!0;return a.each(b,function(a,e){if("undefined"==typeof c[a]||b[a]!==c[a])return d=!1,!1}),d}function f(){return!l&&k}function g(){var a=c.body||c.documentElement,b=a.style,d="transition";if("string"==typeof b[d])return!0;v=["Moz","Webkit","Khtml","O","ms"],d=d.charAt(0).toUpperCase()+d.substr(1);for(var e=0;e<v.length;e++)if("string"==typeof b[v[e]+d])return!0;return!1}var h="tooltipster",j={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(a,b){},functionBefore:function(a,b){b()},functionReady:function(a,b){},functionAfter:function(a){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};d.prototype={init:function(){var b=this;if(c.querySelector){if(null!==b.options.content)b.setContent(b.options.content);else{var d=b.$el.attr("title");"undefined"==typeof d&&(d=null),b.setContent(d)}var e=b.options.functionInit(b.$el,b.content);"undefined"!=typeof e&&b.setContent(e),b.$el.removeAttr("title").addClass("tooltipstered"),!k&&b.options.iconDesktop||k&&b.options.iconTouch?("string"==typeof b.options.icon?(b.$elProxy=a('<span class="'+b.options.iconTheme+'"></span>'),b.$elProxy.text(b.options.icon)):b.options.iconCloning?b.$elProxy=b.options.icon.clone(!0):b.$elProxy=b.options.icon,b.$elProxy.insertAfter(b.$el)):b.$elProxy=b.$el,"hover"==b.options.trigger?(b.$elProxy.on("mouseenter."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!0,b.showTooltip())}).on("mouseleave."+b.namespace,function(){f()&&!b.options.touchDevices||(b.mouseIsOverProxy=!1)}),k&&b.options.touchDevices&&b.$elProxy.on("touchstart."+b.namespace,function(){b.showTooltipNow()})):"click"==b.options.trigger&&b.$elProxy.on("click."+b.namespace,function(){f()&&!b.options.touchDevices||b.showTooltip()})}},showTooltip:function(){var a=this;"shown"!=a.status&&"appearing"!=a.status&&(a.options.delay?a.timerShow=setTimeout(function(){("click"==a.options.trigger||"hover"==a.options.trigger&&a.mouseIsOverProxy)&&a.showTooltipNow()},a.options.delay):a.showTooltipNow())},showTooltipNow:function(){var c=this;clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,c.enabled&&null!==c.content&&(c.options.onlyOne&&a(".tooltipstered").not(c.$el).each(function(b,c){var d=a(c),e=d[h]("status"),f=d[h]("option","autoClose");"hidden"!==e&&"disappearing"!==e&&f&&d[h]("hide")}),c.options.functionBefore(c.$elProxy,function(){if("hidden"!==c.status){var d=0;"disappearing"===c.status&&(c.status="appearing",g()?(c.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+c.options.animation+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.stop().fadeIn(function(){c.status="shown"}))}else{c.status="appearing";var d=c.options.speed;c.bodyOverflowX=a("body").css("overflow-x"),a("body").css("overflow-x","hidden");var e="tooltipster-"+c.options.animation,f="-webkit-transition-duration: "+c.options.speed+"ms; -webkit-animation-duration: "+c.options.speed+"ms; -moz-transition-duration: "+c.options.speed+"ms; -moz-animation-duration: "+c.options.speed+"ms; -o-transition-duration: "+c.options.speed+"ms; -o-animation-duration: "+c.options.speed+"ms; -ms-transition-duration: "+c.options.speed+"ms; -ms-animation-duration: "+c.options.speed+"ms; transition-duration: "+c.options.speed+"ms; animation-duration: "+c.options.speed+"ms;",h=c.options.fixedWidth>0?"width:"+Math.round(c.options.fixedWidth)+"px;":"",i=c.options.maxWidth>0?"max-width:"+Math.round(c.options.maxWidth)+"px;":"",j=c.options.interactive?"pointer-events: auto;":"";if(c.$tooltip=a('<div class="tooltipster-base '+c.options.theme+'" style="'+h+" "+i+" "+j+" "+f+'"><div class="tooltipster-content"></div></div>'),g()&&c.$tooltip.addClass(e),c.insertContent(),c.$tooltip.appendTo("body"),c.positionTooltip(),c.options.functionReady(c.$el,c.$tooltip),g()?(c.$tooltip.addClass(e+"-show"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(function(){c.status="shown"})):c.$tooltip.css("display","none").fadeIn(c.options.speed,function(){c.status="shown"}),c.setCheckInterval(),a(b).on("scroll."+c.namespace+" resize."+c.namespace,function(){c.positionTooltip()}),c.options.autoClose)if(a("body").off("."+c.namespace),"hover"==c.options.trigger)if(k&&setTimeout(function(){a("body").on("touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive){k&&c.$tooltip.on("touchstart."+c.namespace,function(a){a.stopPropagation()});var l=null;c.$elProxy.add(c.$tooltip).on("mouseleave."+c.namespace+"-autoClose",function(){clearTimeout(l),l=setTimeout(function(){c.hideTooltip()},c.options.interactiveTolerance)}).on("mouseenter."+c.namespace+"-autoClose",function(){clearTimeout(l)})}else c.$elProxy.on("mouseleave."+c.namespace+"-autoClose",function(){c.hideTooltip()});else"click"==c.options.trigger&&(setTimeout(function(){a("body").on("click."+c.namespace+" touchstart."+c.namespace,function(){c.hideTooltip()})},0),c.options.interactive&&c.$tooltip.on("click."+c.namespace+" touchstart."+c.namespace,function(a){a.stopPropagation()}))}c.options.timer>0&&(c.timerHide=setTimeout(function(){c.timerHide=null,c.hideTooltip()},c.options.timer+d))}))},setCheckInterval:function(){var b=this;b.checkInterval=setInterval(function(){if(0===a("body").find(b.$el).length||0===a("body").find(b.$elProxy).length||"hidden"==b.status||0===a("body").find(b.$tooltip).length)"shown"!=b.status&&"appearing"!=b.status||b.hideTooltip(),b.cancelCheckInterval();else if(b.options.positionTracker){var c=b.positionInfo(b.$elProxy),d=!1;e(c.dimension,b.elProxyPosition.dimension)&&("fixed"===b.$elProxy.css("position")?e(c.position,b.elProxyPosition.position)&&(d=!0):e(c.offset,b.elProxyPosition.offset)&&(d=!0)),d||b.positionTooltip()}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(){var c=this;if(clearTimeout(c.timerShow),c.timerShow=null,clearTimeout(c.timerHide),c.timerHide=null,"shown"==c.status||"appearing"==c.status){c.status="disappearing";var d=function(){c.status="hidden",c.$tooltip.remove(),c.$tooltip=null,a(b).off("."+c.namespace),a("body").off("."+c.namespace).css("overflow-x",c.bodyOverflowX),c.$elProxy.off("."+c.namespace+"-autoClose"),c.options.functionAfter(c.$elProxy)};g()?(c.$tooltip.clearQueue().removeClass("tooltipster-"+c.options.animation+"-show").addClass("tooltipster-dying"),c.options.speed>0&&c.$tooltip.delay(c.options.speed),c.$tooltip.queue(d)):c.$tooltip.stop().fadeOut(c.options.speed,d)}},setContent:function(a){"object"==typeof a&&null!==a&&this.options.contentCloning&&(a=a.clone(!0)),this.content=a},insertContent:function(){var a=this,b=this.$tooltip.find(".tooltipster-content");"string"!=typeof a.content||a.options.contentAsHTML?b.empty().append(a.content):b.text(a.content)},updateTooltip:function(a){var b=this;b.setContent(a),null!==b.content?"hidden"!==b.status&&(b.insertContent(),b.positionTooltip(),b.options.updateAnimation&&(g()?(b.$tooltip.css({width:"","-webkit-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+b.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=b.status&&(b.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==b.status&&b.$tooltip.css({"-webkit-transition":b.options.speed+"ms","-moz-transition":b.options.speed+"ms","-o-transition":b.options.speed+"ms","-ms-transition":b.options.speed+"ms",transition:b.options.speed+"ms"})},b.options.speed))},b.options.speed)):b.$tooltip.fadeTo(b.options.speed,.5,function(){"hidden"!=b.status&&b.$tooltip.fadeTo(b.options.speed,1)}))):b.hideTooltip()},positionInfo:function(a){return{dimension:{height:a.outerHeight(!1),width:a.outerWidth(!1)},offset:a.offset(),position:{left:parseInt(a.css("left")),top:parseInt(a.css("top"))}}},positionTooltip:function(){function c(){var c=a(b).scrollLeft();D-c<0&&(f=D-c,D=c),D+j-c>g&&(f=D-(g+c-j),D=g+c-j)}function d(c,d){h.offset.top-a(b).scrollTop()-l-G-12<0&&d.indexOf("top")>-1&&(I=c),h.offset.top+h.dimension.height+l+12+G>a(b).scrollTop()+a(b).height()&&d.indexOf("bottom")>-1&&(I=c,F=h.offset.top-l-G-12)}var e=this;if(0!==a("body").find(e.$tooltip).length){e.$tooltip.css("width",""),e.elProxyPosition=e.positionInfo(e.$elProxy);var f=null,g=a(b).width(),h=e.elProxyPosition,j=e.$tooltip.outerWidth(!1),k=e.$tooltip.innerWidth()+1,l=e.$tooltip.outerHeight(!1);if(e.$elProxy.is("area")){var m=e.$elProxy.attr("shape"),n=e.$elProxy.parent().attr("name"),o=a('img[usemap="#'+n+'"]'),p=o.offset().left,q=o.offset().top,r=void 0!==e.$elProxy.attr("coords")?e.$elProxy.attr("coords").split(","):void 0;if("circle"==m){var s=parseInt(r[0]),t=parseInt(r[1]),u=parseInt(r[2]);h.dimension.height=2*u,h.dimension.width=2*u,h.offset.top=q+t-u,h.offset.left=p+s-u}else if("rect"==m){var s=parseInt(r[0]),t=parseInt(r[1]),v=parseInt(r[2]),w=parseInt(r[3]);h.dimension.height=w-t,h.dimension.width=v-s,h.offset.top=q+t,h.offset.left=p+s}else if("poly"==m){var x=0,y=0,z=0,A=0,B="even";for(i=0;i<r.length;i++){var C=parseInt(r[i]);"even"==B?(C>z&&(z=C,0===i&&(x=z)),C<x&&(x=C),B="odd"):(C>A&&(A=C,1==i&&(y=A)),C<y&&(y=C),B="even")}h.dimension.height=A-y,h.dimension.width=z-x,h.offset.top=q+y,h.offset.left=p+x}else h.dimension.height=o.outerHeight(!1),h.dimension.width=o.outerWidth(!1),h.offset.top=q,h.offset.left=p}0===e.options.fixedWidth&&e.$tooltip.css({width:Math.round(k)+"px","padding-left":"0px","padding-right":"0px"});var D=0,E=0,F=0,G=parseInt(e.options.offsetY),H=parseInt(e.options.offsetX),I=e.options.position;if("top"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left+H-J/2,F=h.offset.top-l-G-12,c(),d("bottom","top")}if("top-left"==I&&(D=h.offset.left+H,F=h.offset.top-l-G-12,c(),d("bottom-left","top-left")),"top-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top-l-G-12,c(),d("bottom-right","top-right")),"bottom"==I){var J=h.offset.left+j-(h.offset.left+h.dimension.width);D=h.offset.left-J/2+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top","bottom")}if("bottom-left"==I&&(D=h.offset.left+H,F=h.offset.top+h.dimension.height+G+12,c(),d("top-left","bottom-left")),"bottom-right"==I&&(D=h.offset.left+h.dimension.width+H-j,F=h.offset.top+h.dimension.height+G+12,c(),d("top-right","bottom-right")),"left"==I){D=h.offset.left-H-j-12,E=h.offset.left+H+h.dimension.width+12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D<0&&E+j>g){var L=2*parseFloat(e.$tooltip.css("border-width")),M=j+D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),D=h.offset.left-H-M-12-L,K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D<0&&(D=h.offset.left+H+h.dimension.width+12,f="left")}if("right"==I){D=h.offset.left+H+h.dimension.width+12,E=h.offset.left-H-j-12;var K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1));if(F=h.offset.top-K/2-G,D+j>g&&E<0){var L=2*parseFloat(e.$tooltip.css("border-width")),M=g-D-L;e.$tooltip.css("width",M+"px"),l=e.$tooltip.outerHeight(!1),K=h.offset.top+l-(h.offset.top+e.$elProxy.outerHeight(!1)),F=h.offset.top-K/2-G}else D+j>g&&(D=h.offset.left-H-j-12,f="right")}if(e.options.arrow){var N="tooltipster-arrow-"+I;if(e.options.arrowColor.length<1)var O=e.$tooltip.css("background-color");else var O=e.options.arrowColor;if(f?"left"==f?(N="tooltipster-arrow-right",f=""):"right"==f?(N="tooltipster-arrow-left",f=""):f="left:"+Math.round(f)+"px;":f="","top"==I||"top-left"==I||"top-right"==I)var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");else if("bottom"==I||"bottom-left"==I||"bottom-right"==I)var P=parseFloat(e.$tooltip.css("border-top-width")),Q=e.$tooltip.css("border-top-color");else if("left"==I)var P=parseFloat(e.$tooltip.css("border-right-width")),Q=e.$tooltip.css("border-right-color");else if("right"==I)var P=parseFloat(e.$tooltip.css("border-left-width")),Q=e.$tooltip.css("border-left-color");else var P=parseFloat(e.$tooltip.css("border-bottom-width")),Q=e.$tooltip.css("border-bottom-color");P>1&&P++;var R="";if(0!==P){var S="",T="border-color: "+Q+";";N.indexOf("bottom")!==-1?S="margin-top: -"+Math.round(P)+"px;":N.indexOf("top")!==-1?S="margin-bottom: -"+Math.round(P)+"px;":N.indexOf("left")!==-1?S="margin-right: -"+Math.round(P)+"px;":N.indexOf("right")!==-1&&(S="margin-left: -"+Math.round(P)+"px;"),R='<span class="tooltipster-arrow-border" style="'+S+" "+T+';"></span>'}e.$tooltip.find(".tooltipster-arrow").remove();var U='<div class="'+N+' tooltipster-arrow" style="'+f+'">'+R+'<span style="border-color:'+O+';"></span></div>';e.$tooltip.append(U)}e.$tooltip.css({top:Math.round(F)+"px",left:Math.round(D)+"px"})}}},a.fn[h]=function(){var b=arguments;if(0===this.length){if("string"==typeof b[0]){var c=!0;switch(b[0]){case"setDefaults":a.extend(j,b[1]);break;default:c=!1}return!!c||this}return this}if("string"==typeof b[0]){var e="#*$~&";return this.each(function(){var c=a(this).data("tooltipster");if(!c)throw new Error("You called Tooltipster's \""+b[0]+'" method on an uninitialized element');switch(b[0]){case"content":case"update":if("undefined"==typeof b[1])return e=c.content,!1;c.updateTooltip(b[1]);break;case"destroy":c.hideTooltip(),c.$el[0]!==c.$elProxy[0]&&c.$elProxy.remove();var d="string"==typeof c.content?c.content:a("<div></div>").append(c.content).html();c.$el.removeClass("tooltipstered").attr("title",d).removeData("tooltipster").off("."+c.namespace);break;case"disable":c.hideTooltip(),c.enabled=!1;break;case"elementIcon":return e=c.$el[0]!==c.$elProxy[0]?c.$elProxy[0]:void 0,!1;case"elementTooltip":return e=c.$tooltip?c.$tooltip[0]:void 0,!1;case"enable":c.enabled=!0;break;case"hide":c.hideTooltip();break;case"option":e=c.options[b[1]];break;case"reposition":c.positionTooltip();break;case"show":c.showTooltipNow();break;case"status":return e=c.status,!1;default:throw new Error('Unknown method .tooltipster("'+b[0]+'")')}}),"#*$~&"!==e?e:this}return this.each(function(){a(this).data("tooltipster")||a(this).data("tooltipster",new d(this,b[0]))})};var k=!!("ontouchstart"in b),l=!1;a("body").one("mousemove",function(){l=!0})}(jQuery,window,document);
;/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r,G,f,v){var J=f("html"),n=f(r),p=f(G),b=f.fancybox=function(){b.open.apply(this,arguments)},I=navigator.userAgent.match(/msie/i),B=null,s=G.createTouch!==v,t=function(a){return a&&a.hasOwnProperty&&a instanceof f},q=function(a){return a&&"string"===f.type(a)},E=function(a){return q(a)&&0<a.indexOf("%")},l=function(a,d){var e=parseInt(a,10)||0;d&&E(a)&&(e*=b.getViewport()[d]/100);return Math.ceil(e)},w=function(a,b){return l(a,b)+"px"};f.extend(b,{version:"2.1.5",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(I?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:f.noop,beforeLoad:f.noop,afterLoad:f.noop,beforeShow:f.noop,afterShow:f.noop,beforeChange:f.noop,beforeClose:f.noop,afterClose:f.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(a,d){if(a&&(f.isPlainObject(d)||(d={}),!1!==b.close(!0)))return f.isArray(a)||(a=t(a)?f(a).get():[a]),f.each(a,function(e,c){var k={},g,h,j,m,l;"object"===f.type(c)&&(c.nodeType&&(c=f(c)),t(c)?(k={href:c.data("fancybox-href")||c.attr("href"),title:c.data("fancybox-title")||c.attr("title"),isDom:!0,element:c},f.metadata&&f.extend(!0,k,c.metadata())):k=c);g=d.href||k.href||(q(c)?c:null);h=d.title!==v?d.title:k.title||"";m=(j=d.content||k.content)?"html":d.type||k.type;!m&&k.isDom&&(m=c.data("fancybox-type"),m||(m=(m=c.prop("class").match(/fancybox\.(\w+)/))?m[1]:null));q(g)&&(m||(b.isImage(g)?m="image":b.isSWF(g)?m="swf":"#"===g.charAt(0)?m="inline":q(c)&&(m="html",j=c)),"ajax"===m&&(l=g.split(/\s+/,2),g=l.shift(),l=l.shift()));j||("inline"===m?g?j=f(q(g)?g.replace(/.*(?=#[^\s]+$)/,""):g):k.isDom&&(j=c):"html"===m?j=g:!m&&(!g&&k.isDom)&&(m="inline",j=c));f.extend(k,{href:g,type:m,content:j,title:h,selector:l});a[e]=k}),b.opts=f.extend(!0,{},b.defaults,d),d.keys!==v&&(b.opts.keys=d.keys?f.extend({},b.defaults.keys,d.keys):!1),b.group=a,b._start(b.opts.index)},cancel:function(){var a=b.coming;a&&!1!==b.trigger("onCancel")&&(b.hideLoading(),b.ajaxLoad&&b.ajaxLoad.abort(),b.ajaxLoad=null,b.imgPreload&&(b.imgPreload.onload=b.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),b.coming=null,b.current||b._afterZoomOut(a))},close:function(a){b.cancel();!1!==b.trigger("beforeClose")&&(b.unbindEvents(),b.isActive&&(!b.isOpen||!0===a?(f(".fancybox-wrap").stop(!0).trigger("onReset").remove(),b._afterZoomOut()):(b.isOpen=b.isOpened=!1,b.isClosing=!0,f(".fancybox-item, .fancybox-nav").remove(),b.wrap.stop(!0,!0).removeClass("fancybox-opened"),b.transitions[b.current.closeMethod]())))},play:function(a){var d=function(){clearTimeout(b.player.timer)},e=function(){d();b.current&&b.player.isActive&&(b.player.timer=setTimeout(b.next,b.current.playSpeed))},c=function(){d();p.unbind(".player");b.player.isActive=!1;b.trigger("onPlayEnd")};if(!0===a||!b.player.isActive&&!1!==a){if(b.current&&(b.current.loop||b.current.index<b.group.length-1))b.player.isActive=!0,p.bind({"onCancel.player beforeClose.player":c,"onUpdate.player":e,"beforeLoad.player":d}),e(),b.trigger("onPlayStart")}else c()},next:function(a){var d=b.current;d&&(q(a)||(a=d.direction.next),b.jumpto(d.index+1,a,"next"))},prev:function(a){var d=b.current;d&&(q(a)||(a=d.direction.prev),b.jumpto(d.index-1,a,"prev"))},jumpto:function(a,d,e){var c=b.current;c&&(a=l(a),b.direction=d||c.direction[a>=c.index?"next":"prev"],b.router=e||"jumpto",c.loop&&(0>a&&(a=c.group.length+a%c.group.length),a%=c.group.length),c.group[a]!==v&&(b.cancel(),b._start(a)))},reposition:function(a,d){var e=b.current,c=e?e.wrap:null,k;c&&(k=b._getPosition(d),a&&"scroll"===a.type?(delete k.position,c.stop(!0,!0).animate(k,200)):(c.css(k),e.pos=f.extend({},e.dim,k)))},update:function(a){var d=a&&a.type,e=!d||"orientationchange"===d;e&&(clearTimeout(B),B=null);b.isOpen&&!B&&(B=setTimeout(function(){var c=b.current;c&&!b.isClosing&&(b.wrap.removeClass("fancybox-tmp"),(e||"load"===d||"resize"===d&&c.autoResize)&&b._setDimension(),"scroll"===d&&c.canShrink||b.reposition(a),b.trigger("onUpdate"),B=null)},e&&!s?0:300))},toggle:function(a){b.isOpen&&(b.current.fitToView="boolean"===f.type(a)?a:!b.current.fitToView,s&&(b.wrap.removeAttr("style").addClass("fancybox-tmp"),b.trigger("onUpdate")),b.update())},hideLoading:function(){p.unbind(".loading");f("#fancybox-loading").remove()},showLoading:function(){var a,d;b.hideLoading();a=f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");p.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),b.cancel()});b.defaults.fixed||(d=b.getViewport(),a.css({position:"absolute",top:0.5*d.h+d.y,left:0.5*d.w+d.x}))},getViewport:function(){var a=b.current&&b.current.locked||!1,d={x:n.scrollLeft(),y:n.scrollTop()};a?(d.w=a[0].clientWidth,d.h=a[0].clientHeight):(d.w=s&&r.innerWidth?r.innerWidth:n.width(),d.h=s&&r.innerHeight?r.innerHeight:n.height());return d},unbindEvents:function(){b.wrap&&t(b.wrap)&&b.wrap.unbind(".fb");p.unbind(".fb");n.unbind(".fb")},bindEvents:function(){var a=b.current,d;a&&(n.bind("orientationchange.fb"+(s?"":" resize.fb")+(a.autoCenter&&!a.locked?" scroll.fb":""),b.update),(d=a.keys)&&p.bind("keydown.fb",function(e){var c=e.which||e.keyCode,k=e.target||e.srcElement;if(27===c&&b.coming)return!1;!e.ctrlKey&&(!e.altKey&&!e.shiftKey&&!e.metaKey&&(!k||!k.type&&!f(k).is("[contenteditable]")))&&f.each(d,function(d,k){if(1<a.group.length&&k[c]!==v)return b[d](k[c]),e.preventDefault(),!1;if(-1<f.inArray(c,k))return b[d](),e.preventDefault(),!1})}),f.fn.mousewheel&&a.mouseWheel&&b.wrap.bind("mousewheel.fb",function(d,c,k,g){for(var h=f(d.target||null),j=!1;h.length&&!j&&!h.is(".fancybox-skin")&&!h.is(".fancybox-wrap");)j=h[0]&&!(h[0].style.overflow&&"hidden"===h[0].style.overflow)&&(h[0].clientWidth&&h[0].scrollWidth>h[0].clientWidth||h[0].clientHeight&&h[0].scrollHeight>h[0].clientHeight),h=f(h).parent();if(0!==c&&!j&&1<b.group.length&&!a.canShrink){if(0<g||0<k)b.prev(0<g?"down":"left");else if(0>g||0>k)b.next(0>g?"up":"right");d.preventDefault()}}))},trigger:function(a,d){var e,c=d||b.coming||b.current;if(c){f.isFunction(c[a])&&(e=c[a].apply(c,Array.prototype.slice.call(arguments,1)));if(!1===e)return!1;c.helpers&&f.each(c.helpers,function(d,e){if(e&&b.helpers[d]&&f.isFunction(b.helpers[d][a]))b.helpers[d][a](f.extend(!0,{},b.helpers[d].defaults,e),c)});p.trigger(a)}},isImage:function(a){return q(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(a){return q(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(a){var d={},e,c;a=l(a);e=b.group[a]||null;if(!e)return!1;d=f.extend(!0,{},b.opts,e);e=d.margin;c=d.padding;"number"===f.type(e)&&(d.margin=[e,e,e,e]);"number"===f.type(c)&&(d.padding=[c,c,c,c]);d.modal&&f.extend(!0,d,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});d.autoSize&&(d.autoWidth=d.autoHeight=!0);"auto"===d.width&&(d.autoWidth=!0);"auto"===d.height&&(d.autoHeight=!0);d.group=b.group;d.index=a;b.coming=d;if(!1===b.trigger("beforeLoad"))b.coming=null;else{c=d.type;e=d.href;if(!c)return b.coming=null,b.current&&b.router&&"jumpto"!==b.router?(b.current.index=a,b[b.router](b.direction)):!1;b.isActive=!0;if("image"===c||"swf"===c)d.autoHeight=d.autoWidth=!1,d.scrolling="visible";"image"===c&&(d.aspectRatio=!0);"iframe"===c&&s&&(d.scrolling="scroll");d.wrap=f(d.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+c+" fancybox-tmp "+d.wrapCSS).appendTo(d.parent||"body");f.extend(d,{skin:f(".fancybox-skin",d.wrap),outer:f(".fancybox-outer",d.wrap),inner:f(".fancybox-inner",d.wrap)});f.each(["Top","Right","Bottom","Left"],function(a,b){d.skin.css("padding"+b,w(d.padding[a]))});b.trigger("onReady");if("inline"===c||"html"===c){if(!d.content||!d.content.length)return b._error("content")}else if(!e)return b._error("href");"image"===c?b._loadImage():"ajax"===c?b._loadAjax():"iframe"===c?b._loadIframe():b._afterLoad()}},_error:function(a){f.extend(b.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:a,content:b.coming.tpl.error});b._afterLoad()},_loadImage:function(){var a=b.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;b.coming.width=this.width/b.opts.pixelRatio;b.coming.height=this.height/b.opts.pixelRatio;b._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;b._error("image")};a.src=b.coming.href;!0!==a.complete&&b.showLoading()},_loadAjax:function(){var a=b.coming;b.showLoading();b.ajaxLoad=f.ajax(f.extend({},a.ajax,{url:a.href,error:function(a,e){b.coming&&"abort"!==e?b._error("ajax",a):b.hideLoading()},success:function(d,e){"success"===e&&(a.content=d,b._afterLoad())}}))},_loadIframe:function(){var a=b.coming,d=f(a.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",s?"auto":a.iframe.scrolling).attr("src",a.href);f(a.wrap).bind("onReset",function(){try{f(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(a){}});a.iframe.preload&&(b.showLoading(),d.one("load",function(){f(this).data("ready",1);s||f(this).bind("load.fb",b.update);f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();b._afterLoad()}));a.content=d.appendTo(a.inner);a.iframe.preload||b._afterLoad()},_preloadImages:function(){var a=b.group,d=b.current,e=a.length,c=d.preload?Math.min(d.preload,e-1):0,f,g;for(g=1;g<=c;g+=1)f=a[(d.index+g)%e],"image"===f.type&&f.href&&((new Image).src=f.href)},_afterLoad:function(){var a=b.coming,d=b.current,e,c,k,g,h;b.hideLoading();if(a&&!1!==b.isActive)if(!1===b.trigger("afterLoad",a,d))a.wrap.stop(!0).trigger("onReset").remove(),b.coming=null;else{d&&(b.trigger("beforeChange",d),d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());b.unbindEvents();e=a.content;c=a.type;k=a.scrolling;f.extend(b,{wrap:a.wrap,skin:a.skin,outer:a.outer,inner:a.inner,current:a,previous:d});g=a.href;switch(c){case"inline":case"ajax":case"html":a.selector?e=f("<div>").html(e).find(a.selector):t(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),a.wrap.bind("onReset",function(){f(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",!1)}));break;case"image":e=a.tpl.image.replace("{href}",g);break;case"swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+g+'"></param>',h="",f.each(a.swf,function(a,b){e+='<param name="'+a+'" value="'+b+'"></param>';h+=" "+a+'="'+b+'"'}),e+='<embed src="'+g+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}(!t(e)||!e.parent().is(a.inner))&&a.inner.append(e);b.trigger("beforeShow");a.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);b._setDimension();b.reposition();b.isOpen=!1;b.coming=null;b.bindEvents();if(b.isOpened){if(d.prevMethod)b.transitions[d.prevMethod]()}else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();b.transitions[b.isOpened?a.nextMethod:a.openMethod]();b._preloadImages()}},_setDimension:function(){var a=b.getViewport(),d=0,e=!1,c=!1,e=b.wrap,k=b.skin,g=b.inner,h=b.current,c=h.width,j=h.height,m=h.minWidth,u=h.minHeight,n=h.maxWidth,p=h.maxHeight,s=h.scrolling,q=h.scrollOutside?h.scrollbarWidth:0,x=h.margin,y=l(x[1]+x[3]),r=l(x[0]+x[2]),v,z,t,C,A,F,B,D,H;e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");x=l(k.outerWidth(!0)-k.width());v=l(k.outerHeight(!0)-k.height());z=y+x;t=r+v;C=E(c)?(a.w-z)*l(c)/100:c;A=E(j)?(a.h-t)*l(j)/100:j;if("iframe"===h.type){if(H=h.content,h.autoHeight&&1===H.data("ready"))try{H[0].contentWindow.document.location&&(g.width(C).height(9999),F=H.contents().find("body"),q&&F.css("overflow-x","hidden"),A=F.outerHeight(!0))}catch(G){}}else if(h.autoWidth||h.autoHeight)g.addClass("fancybox-tmp"),h.autoWidth||g.width(C),h.autoHeight||g.height(A),h.autoWidth&&(C=g.width()),h.autoHeight&&(A=g.height()),g.removeClass("fancybox-tmp");c=l(C);j=l(A);D=C/A;m=l(E(m)?l(m,"w")-z:m);n=l(E(n)?l(n,"w")-z:n);u=l(E(u)?l(u,"h")-t:u);p=l(E(p)?l(p,"h")-t:p);F=n;B=p;h.fitToView&&(n=Math.min(a.w-z,n),p=Math.min(a.h-t,p));z=a.w-y;r=a.h-r;h.aspectRatio?(c>n&&(c=n,j=l(c/D)),j>p&&(j=p,c=l(j*D)),c<m&&(c=m,j=l(c/D)),j<u&&(j=u,c=l(j*D))):(c=Math.max(m,Math.min(c,n)),h.autoHeight&&"iframe"!==h.type&&(g.width(c),j=g.height()),j=Math.max(u,Math.min(j,p)));if(h.fitToView)if(g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height(),h.aspectRatio)for(;(a>z||y>r)&&(c>m&&j>u)&&!(19<d++);)j=Math.max(u,Math.min(p,j-10)),c=l(j*D),c<m&&(c=m,j=l(c/D)),c>n&&(c=n,j=l(c/D)),g.width(c).height(j),e.width(c+x),a=e.width(),y=e.height();else c=Math.max(m,Math.min(c,c-(a-z))),j=Math.max(u,Math.min(j,j-(y-r)));q&&("auto"===s&&j<A&&c+x+q<z)&&(c+=q);g.width(c).height(j);e.width(c+x);a=e.width();y=e.height();e=(a>z||y>r)&&c>m&&j>u;c=h.aspectRatio?c<F&&j<B&&c<C&&j<A:(c<F||j<B)&&(c<C||j<A);f.extend(h,{dim:{width:w(a),height:w(y)},origWidth:C,origHeight:A,canShrink:e,canExpand:c,wPadding:x,hPadding:v,wrapSpace:y-k.outerHeight(!0),skinSpace:k.height()-j});!H&&(h.autoHeight&&j>u&&j<p&&!c)&&g.height("auto")},_getPosition:function(a){var d=b.current,e=b.getViewport(),c=d.margin,f=b.wrap.width()+c[1]+c[3],g=b.wrap.height()+c[0]+c[2],c={position:"absolute",top:c[0],left:c[3]};d.autoCenter&&d.fixed&&!a&&g<=e.h&&f<=e.w?c.position="fixed":d.locked||(c.top+=e.y,c.left+=e.x);c.top=w(Math.max(c.top,c.top+(e.h-g)*d.topRatio));c.left=w(Math.max(c.left,c.left+(e.w-f)*d.leftRatio));return c},_afterZoomIn:function(){var a=b.current;a&&(b.isOpen=b.isOpened=!0,b.wrap.css("overflow","visible").addClass("fancybox-opened"),b.update(),(a.closeClick||a.nextClick&&1<b.group.length)&&b.inner.css("cursor","pointer").bind("click.fb",function(d){!f(d.target).is("a")&&!f(d.target).parent().is("a")&&(d.preventDefault(),b[a.closeClick?"close":"next"]())}),a.closeBtn&&f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",function(a){a.preventDefault();b.close()}),a.arrows&&1<b.group.length&&((a.loop||0<a.index)&&f(a.tpl.prev).appendTo(b.outer).bind("click.fb",b.prev),(a.loop||a.index<b.group.length-1)&&f(a.tpl.next).appendTo(b.outer).bind("click.fb",b.next)),b.trigger("afterShow"),!a.loop&&a.index===a.group.length-1?b.play(!1):b.opts.autoPlay&&!b.player.isActive&&(b.opts.autoPlay=!1,b.play()))},_afterZoomOut:function(a){a=a||b.current;f(".fancybox-wrap").trigger("onReset").remove();f.extend(b,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});b.trigger("afterClose",a)}});b.transitions={getOrigPosition:function(){var a=b.current,d=a.element,e=a.orig,c={},f=50,g=50,h=a.hPadding,j=a.wPadding,m=b.getViewport();!e&&(a.isDom&&d.is(":visible"))&&(e=d.find("img:first"),e.length||(e=d));t(e)?(c=e.offset(),e.is("img")&&(f=e.outerWidth(),g=e.outerHeight())):(c.top=m.y+(m.h-g)*a.topRatio,c.left=m.x+(m.w-f)*a.leftRatio);if("fixed"===b.wrap.css("position")||a.locked)c.top-=m.y,c.left-=m.x;return c={top:w(c.top-h*a.topRatio),left:w(c.left-j*a.leftRatio),width:w(f+j),height:w(g+h)}},step:function(a,d){var e,c,f=d.prop;c=b.current;var g=c.wrapSpace,h=c.skinSpace;if("width"===f||"height"===f)e=d.end===d.start?1:(a-d.start)/(d.end-d.start),b.isClosing&&(e=1-e),c="width"===f?c.wPadding:c.hPadding,c=a-c,b.skin[f](l("width"===f?c:c-g*e)),b.inner[f](l("width"===f?c:c-g*e-h*e))},zoomIn:function(){var a=b.current,d=a.pos,e=a.openEffect,c="elastic"===e,k=f.extend({opacity:1},d);delete k.position;c?(d=this.getOrigPosition(),a.openOpacity&&(d.opacity=0.1)):"fade"===e&&(d.opacity=0.1);b.wrap.css(d).animate(k,{duration:"none"===e?0:a.openSpeed,easing:a.openEasing,step:c?this.step:null,complete:b._afterZoomIn})},zoomOut:function(){var a=b.current,d=a.closeEffect,e="elastic"===d,c={opacity:0.1};e&&(c=this.getOrigPosition(),a.closeOpacity&&(c.opacity=0.1));b.wrap.animate(c,{duration:"none"===d?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:b._afterZoomOut})},changeIn:function(){var a=b.current,d=a.nextEffect,e=a.pos,c={opacity:1},f=b.direction,g;e.opacity=0.1;"elastic"===d&&(g="down"===f||"up"===f?"top":"left","down"===f||"right"===f?(e[g]=w(l(e[g])-200),c[g]="+=200px"):(e[g]=w(l(e[g])+200),c[g]="-=200px"));"none"===d?b._afterZoomIn():b.wrap.css(e).animate(c,{duration:a.nextSpeed,easing:a.nextEasing,complete:b._afterZoomIn})},changeOut:function(){var a=b.previous,d=a.prevEffect,e={opacity:0.1},c=b.direction;"elastic"===d&&(e["down"===c||"up"===c?"top":"left"]=("up"===c||"left"===c?"-":"+")+"=200px");a.wrap.animate(e,{duration:"none"===d?0:a.prevSpeed,easing:a.prevEasing,complete:function(){f(this).trigger("onReset").remove()}})}};b.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,el:f("html"),create:function(a){a=f.extend({},this.defaults,a);this.overlay&&this.close();this.overlay=f('<div class="fancybox-overlay"></div>').appendTo(b.coming?b.coming.parent:a.parent);this.fixed=!1;a.fixed&&b.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(a){var d=this;a=f.extend({},this.defaults,a);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(a);this.fixed||(n.bind("resize.overlay",f.proxy(this.update,this)),this.update());a.closeClick&&this.overlay.bind("click.overlay",function(a){if(f(a.target).hasClass("fancybox-overlay"))return b.isActive?b.close():d.close(),!1});this.overlay.css(a.css).show()},close:function(){var a,b;n.unbind("resize.overlay");this.el.hasClass("fancybox-lock")&&(f(".fancybox-margin").removeClass("fancybox-margin"),a=n.scrollTop(),b=n.scrollLeft(),this.el.removeClass("fancybox-lock"),n.scrollTop(a).scrollLeft(b));f(".fancybox-overlay").remove().hide();f.extend(this,{overlay:null,fixed:!1})},update:function(){var a="100%",b;this.overlay.width(a).height("100%");I?(b=Math.max(G.documentElement.offsetWidth,G.body.offsetWidth),p.width()>b&&(a=p.width())):p.width()>n.width()&&(a=p.width());this.overlay.width(a).height(p.height())},onReady:function(a,b){var e=this.overlay;f(".fancybox-overlay").stop(!0,!0);e||this.create(a);a.locked&&(this.fixed&&b.fixed)&&(e||(this.margin=p.height()>n.height()?f("html").css("margin-right").replace("px",""):!1),b.locked=this.overlay.append(b.wrap),b.fixed=!1);!0===a.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(a,b){var e,c;b.locked&&(!1!==this.margin&&(f("*").filter(function(){return"fixed"===f(this).css("position")&&!f(this).hasClass("fancybox-overlay")&&!f(this).hasClass("fancybox-wrap")}).addClass("fancybox-margin"),this.el.addClass("fancybox-margin")),e=n.scrollTop(),c=n.scrollLeft(),this.el.addClass("fancybox-lock"),n.scrollTop(e).scrollLeft(c));this.open(a)},onUpdate:function(){this.fixed||this.update()},afterClose:function(a){this.overlay&&!b.coming&&this.overlay.fadeOut(a.speedOut,f.proxy(this.close,this))}};b.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(a){var d=b.current,e=d.title,c=a.type;f.isFunction(e)&&(e=e.call(d.element,d));if(q(e)&&""!==f.trim(e)){d=f('<div class="fancybox-title fancybox-title-'+c+'-wrap">'+e+"</div>");switch(c){case"inside":c=b.skin;break;case"outside":c=b.wrap;break;case"over":c=b.inner;break;default:c=b.skin,d.appendTo("body"),I&&d.width(d.width()),d.wrapInner('<span class="child"></span>'),b.current.margin[2]+=Math.abs(l(d.css("margin-bottom")))}d["top"===a.position?"prependTo":"appendTo"](c)}}};f.fn.fancybox=function(a){var d,e=f(this),c=this.selector||"",k=function(g){var h=f(this).blur(),j=d,k,l;!g.ctrlKey&&(!g.altKey&&!g.shiftKey&&!g.metaKey)&&!h.is(".fancybox-wrap")&&(k=a.groupAttr||"data-fancybox-group",l=h.attr(k),l||(k="rel",l=h.get(0)[k]),l&&(""!==l&&"nofollow"!==l)&&(h=c.length?f(c):e,h=h.filter("["+k+'="'+l+'"]'),j=h.index(this)),a.index=j,!1!==b.open(h,a)&&g.preventDefault())};a=a||{};d=a.index||0;!c||!1===a.live?e.unbind("click.fb-start").bind("click.fb-start",k):p.undelegate(c,"click.fb-start").delegate(c+":not('.fancybox-item, .fancybox-nav')","click.fb-start",k);this.filter("[data-fancybox-start=1]").trigger("click");return this};p.ready(function(){var a,d;f.scrollbarWidth===v&&(f.scrollbarWidth=function(){var a=f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),b=a.children(),b=b.innerWidth()-b.height(99).innerWidth();a.remove();return b});if(f.support.fixedPosition===v){a=f.support;d=f('<div style="position:fixed;top:20px;"></div>').appendTo("body");var e=20===d[0].offsetTop||15===d[0].offsetTop;d.remove();a.fixedPosition=e}f.extend(b.defaults,{scrollbarWidth:f.scrollbarWidth(),fixed:f.support.fixedPosition,parent:f("body")});a=f(r).width();J.addClass("fancybox-lock-test");d=f(r).width();J.removeClass("fancybox-lock-test");f("<style type='text/css'>.fancybox-margin{margin-right:"+(d-a)+"px;}</style>").appendTo("head")})})(window,document,jQuery);;var jq=$=jQuery.noConflict();window.Code=window.Code||{Util:false,PhotoSwipe:false};window.BuddyBoss_Media_Util=(function(window,jq,opt,undefined){var $window=jq(window);var Util={state:opt,lang:function(key){var key=key||'undefined key!';return opt[key]||'Language key missing for: '+key;}}
var resizeThrottle;function checkMobile(){if(!Util.state.isMobile&&$window.width()<=800){Util.state.isMobile=true;}
else if(!Util.state.isMobile){Util.state.isMobile=false;}}
checkMobile();$window.on('resize orientationchange',function(){clearTimeout(resizeThrottle);resizeThrottle=setTimeout(checkMobile,75);});return Util;}
(window,window.jQuery,window.BuddyBoss_Media_Appstate||{}));window.Code.BuddyBossSwiper=(function(window,PhotoSwipe_Util,PhotoSwipe,BuddyBoss_Media_Util){if(!PhotoSwipe_Util||!PhotoSwipe){return false;}
var
$buddyboss_photo_grid=jq('#buddyboss-media-grid'),$document=jq(document),buddyboss_mediawipe=false,current_photo_permalink,current_photo_activity_text,$caption,$comment_link,comment_count,favorite_count,favorite_class,photo_id;buddyboss_mediawipe_options={preventSlideshow:true,imageScaleMethod:'fitNoUpscale',loop:false,captionAndToolbarAutoHideDelay:0,getToolbar:function(){return'<div class="ps-toolbar-close"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-favorite"><div class="ps-toolbar-content"></div><div class="ps-favorite-count"></div></div><div class="ps-toolbar-comments"><div class="ps-toolbar-content"></div><div class="ps-comments-count"></div></div><div class="ps-toolbar-delete"><div class="ps-toolbar-content loading" style="display:none"><i class="fa fa-spinner fa-spin"></i></div><div class="ps-toolbar-content real"></div></div><div class="ps-toolbar-previous ps-toolbar-previous-disabled"><div class="ps-toolbar-content"></div></div><div class="ps-toolbar-next"><div class="ps-toolbar-content"></div></div>';},getImageCaption:function(el){var $pic=jq(el);var $comment,$caption;current_photo_permalink='#';current_photo_activity_text='';if($pic.find('img,i').length==0)
return'';current_photo_permalink=$pic.find('img,i')[0].getAttribute('data-permalink');current_photo_owner=$pic.find('img,i')[0].getAttribute('data-owner');current_photo_media=$pic.find('img,i')[0].getAttribute('data-media');current_photo_link_elm=$pic;comment_count=$pic.find('img,i')[0].getAttribute('data-comment-count');favorite_count=$pic.find('img,i')[0].getAttribute('data-favorite-count');favorite_class=$pic.find('img,i')[0].getAttribute('data-bbmfav');photo_id=$pic.find('img,i')[0].getAttribute('data-photo-id');if(jq('#bbmedia-grid-wrapper').length>0){if($pic.closest('.bbmedia-grid-item').length>0){var caption_div=$pic.closest('.bbmedia-grid-item');}else if($pic.closest('.photo-item-wrapper').length>0){var caption_div=$pic.closest('.photo-item-wrapper');}
if(jq(caption_div).length>0){$caption=jq(caption_div).find('.buddyboss_media_caption');$comment=$caption.find('.buddyboss_media_caption_body');$comment.find('a').remove();current_photo_activity_text=$comment.text();if(current_photo_activity_text.replace(/\s/g,'')===''){current_photo_activity_text=$caption.find('.buddyboss_media_caption_action').text();}}}
else{var comment_content_class='';var comment_header_class='';if($pic.parents('.activity-inner').length!=0){comment_content_class='activity-inner';comment_header_class='activity-header';}else if($pic.parents('.acomment-content').length!=0){comment_content_class='acomment-content';comment_header_class='acomment-meta';}else if($pic.parents('.bbp-reply-content').length!=0){comment_content_class='bbp-reply-content';comment_header_class='bbp-reply-content p';}
if(''!=comment_header_class){$comment=$pic.parents('.'+comment_content_class).clone();$comment.find('a').remove();current_photo_activity_text=$comment.text();if(current_photo_activity_text.replace(/\s/g,'')===''){current_photo_activity_text=$pic.parents('.'+comment_content_class).find('.'+comment_header_class).text();}}}
return jq.trim(current_photo_activity_text);},getImageMetaData:function(el){return{href:current_photo_permalink,caption:current_photo_activity_text,owner:current_photo_owner,media:current_photo_media,link_elm:current_photo_link_elm,comment_count:comment_count,favorite_count:favorite_count,favorite_class:favorite_class,photo_id:photo_id};}};BuddyBossSwiperClass={has_grid:function(){return $buddyboss_photo_grid.length>0;},has_photoswipe:function(){return buddyboss_mediawipe!==false;},location_from_current:function(){var current,comments_href,callback_args;if(!BuddyBossSwiperClass.has_photoswipe()){return false;}
current=buddyboss_mediawipe.getCurrentImage();comments_href=current.metaData.href;callback_args={comments_href:comments_href,current:current};jq(document).trigger('buddyboss:media:comment_link',callback_args);setTimeout(function(){window.location=comments_href;},15);},reset:function(){if(buddyboss_mediawipe!==false){try{PhotoSwipe.unsetActivateInstance(buddyboss_mediawipe);PhotoSwipe.detatch(buddyboss_mediawipe);}
catch(e){}}
BuddyBossSwiperClass.start();},start:function(){var _pics_sel=BuddyBossSwiperClass.has_grid()?'.gallery-icon > a':'.buddyboss-media-photo-wrap';var $buddyboss_media=jq(_pics_sel);if($buddyboss_media.length>0){buddyboss_mediawipe=$buddyboss_media.photoSwipe(buddyboss_mediawipe_options);buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onBeforeShow,function(e){jq('html').css({overflow:'hidden'});});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onHide,function(e){jq('html').css({overflow:'auto'});current_photo_activity_text=null;current_photo_permalink=null;$caption.off('click');$caption=null;$comment_link=null;setTimeout(function(){jq(window).trigger('reset_carousel');},555);});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onCaptionAndToolbarShow,function(e){$caption=jq('.ps-caption').on('click',function(e){window.location=buddyboss_mediawipe.getCurrentImage().metaData.href;});$comment_link=jq('.ps-toolbar-comments');});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onToolbarTap,function(e){if(e.toolbarAction===PhotoSwipe.Toolbar.ToolbarAction.none){if(e.tapTarget===$comment_link[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,$comment_link[0])){var current=buddyboss_mediawipe.getCurrentImage(),comments_href=current.metaData.href,callback_args={comments_href:comments_href,current:current};jq(document).trigger('buddyboss:media:comment_link',callback_args);window.location=comments_href;}
if(e.tapTarget===jq('.ps-toolbar-favorite')[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,jq('.ps-toolbar-favorite')[0])){cache_ele=buddyboss_mediawipe.getCurrentImage().metaData.link_elm;var target=buddyboss_mediawipe.getCurrentImage().metaData;var act_id=target.media;if(jq('#activity-'+act_id).length>0){var $act_obj=jq('#activity-'+act_id);var fav_class_obj=$act_obj.find('.buddyboss-media-photo').first();var current_fav_class=fav_class_obj.attr('data-bbmfav');var fav_class='fav';var unfav_class='unfav';var type=current_fav_class==='bbm-fav'?'fav':'unfav';var act_fav_button=jq('#activity-'+act_id+' .activity-meta .'+type);var fav_activity_meta_obj=jq('#activity-'+act_id).find('.activity-meta .fav');var unfav_activity_meta_obj=jq('#activity-'+act_id).find('.activity-meta .unfav');}else if(jq('#acomment-'+act_id).length>0){var $act_obj=jq('#acomment-'+act_id);var fav_class_obj=$act_obj.find('.buddyboss-media-photo').first();var current_fav_class=fav_class_obj.attr('data-bbmfav');var fav_class='fav-comment';var unfav_class='unfav-comment';var type=current_fav_class==='bbm-fav'?'fav':'unfav';var act_fav_button=jq('#acomment-'+act_id+' .acomment-options .'+type+'-comment');var fav_activity_meta_obj=jq('#acomment-'+act_id).find('.acomment-options .fav-comment:first');var unfav_activity_meta_obj=jq('#acomment-'+act_id).find('.acomment-options .unfav-comment:first');}else if(jq('*[data-media="'+act_id+'"]').length>0){var $_obj=jq('*[data-media="'+act_id+'"]'),fav_class_obj=$_obj;current_fav_class=$_obj.attr('data-bbmfav'),fav_class='fav-comment',unfav_class='unfav-comment',type=current_fav_class==='bbm-fav'?'fav':'unfav',fav_activity_meta_obj=$_obj,unfav_activity_meta_obj=$_obj;}
mark_it=jq.post(ajaxurl,{action:'bbm_activity_mark_'+type,id:act_id,item_type:'bbm_activity_mark'});try{mark_it.done(function(d){if(d){d=jq.parseJSON(d);if(d.action==='fav'){jq('.ps-toolbar-favorite').removeClass('bbm-fav');jq('.ps-toolbar-favorite').addClass('bbm-unfav');jq(fav_class_obj).attr('data-bbmfav','bbm-unfav');if(fav_activity_meta_obj.length>0){var fav_url=jq(fav_activity_meta_obj).attr('href');jq(fav_activity_meta_obj).removeClass(fav_class);jq(fav_activity_meta_obj).addClass(unfav_class);jq(fav_activity_meta_obj).attr('title',BP_DTheme.remove_fav);var new_url=fav_url.replace('unfavorite','favorite');jq(fav_activity_meta_obj).attr('href',new_url);}
if('undefined'!=typeof act_fav_button){var title='fav'==type?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav;act_fav_button.attr('title',title);act_fav_button.html(title);act_fav_button.removeClass('fav');act_fav_button.addClass('unfav');}}
else{jq('.ps-toolbar-favorite').removeClass('bbm-unfav');jq('.ps-toolbar-favorite').addClass('bbm-fav');jq(fav_class_obj).attr('data-bbmfav','bbm-fav');if(unfav_activity_meta_obj.length>0){var fav_url=jq(unfav_activity_meta_obj).attr('href');jq(unfav_activity_meta_obj).removeClass(unfav_class);jq(unfav_activity_meta_obj).addClass(fav_class);jq(unfav_activity_meta_obj).attr('title',BP_DTheme.mark_as_fav);var new_url=fav_url.replace('favorite','unfavorite');jq(unfav_activity_meta_obj).attr('href',new_url);}
if('undefined'!=typeof act_fav_button){var title='fav'==type?BP_DTheme.remove_fav:BP_DTheme.mark_as_fav;act_fav_button.attr('title',title);act_fav_button.html(title);act_fav_button.removeClass('unfav');act_fav_button.addClass('fav');}}
jq(fav_class_obj).attr('data-favorite-count',d.count);jq('.ps-favorite-count').html(d.count);}});}catch(e){}}
if(e.tapTarget===jq('.ps-toolbar-delete')[0]||PhotoSwipe_Util.DOM.isChildOf(e.tapTarget,jq('.ps-toolbar-delete')[0])){if(confirm(BuddyBoss_Media_Appstate.sure_delete_photo)){jq('.ps-toolbar-delete').find(".loading").show();jq('.ps-toolbar-delete').find(".real").hide();cache_ele=buddyboss_mediawipe.getCurrentImage().metaData.link_elm;delete_it=jq.post(ajaxurl,{'action':'buddyboss_delete_media','media':buddyboss_mediawipe.getCurrentImage().metaData.media,'photo-id':buddyboss_mediawipe.getCurrentImage().metaData.photo_id});try{delete_it.done(function(d){if(d=="done"){var contentToRemove=document.querySelectorAll("#activity-"+buddyboss_mediawipe.getCurrentImage().metaData.media);jq(contentToRemove).remove();jq(".ps-toolbar-close .ps-toolbar-content").click();location.reload();}else{alert(d);}});delete_it.always(function(){jq('.ps-toolbar-delete').find(".loading").hide();jq('.ps-toolbar-delete').find(".real").show();jq(cache_ele).first().click();});}catch(e){}}}}});buddyboss_mediawipe.addEventHandler(PhotoSwipe.EventTypes.onDisplayImage,function(e){jq('.ps-comments-count').html(buddyboss_mediawipe.getCurrentImage().metaData.comment_count);$delete_link=jq('.ps-toolbar-delete');if(buddyboss_mediawipe.getCurrentImage().metaData.owner=="1"){$delete_link.show();}else{$delete_link.hide();}
var acti_id=buddyboss_mediawipe.getCurrentImage().metaData.media;if(jq('#activity-'+acti_id).length>0){var fav_class_obj=jq('#activity-'+acti_id).find('.buddyboss-media-photo').first();}else if(jq('#acomment-'+acti_id).length>0){var fav_class_obj=jq('#acomment-'+acti_id).find('.buddyboss-media-photo').first();}else if(jq('*[data-media="'+acti_id+'"]').length>0){var fav_class_obj=jq('*[data-media="'+acti_id+'"]');}
if('undefined'!=typeof fav_class_obj){jq('.ps-favorite-count').html(fav_class_obj.attr('data-favorite-count'));jq('.ps-toolbar-favorite').removeClass('bbm-unfav');jq('.ps-toolbar-favorite').removeClass('bbm-fav');jq('.ps-toolbar-favorite').addClass(fav_class_obj.attr('data-bbmfav'));}});}}}
BuddyBossSwiperClass.start();function ajaxSuccessHandler(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');var resetCallback=function(action){return function(){var reset_action=['activity_get_older_updates','post_update','new_activity_comment','delete_activity_comment','activity_widget_filter','get_single_activity_content'];if(-1!==reset_action.indexOf(action)){BuddyBossSwiperClass.reset();}}}(action);window.setTimeout(resetCallback,205);window.setTimeout(resetCallback,750);}
jq(document).ajaxSuccess(ajaxSuccessHandler);return BuddyBossSwiperClass;}
(window,window.Code.Util||false,window.Code.PhotoSwipe||false,window.BuddyBoss_Media_Util));window.BuddyBoss_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _l={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
this.setup_modal();this.setup_textbox();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');if('post_update'==action){var slug=BBOSS_MEDIA.photo_component_slug;var data={action:'bbm_photo_counts'};jq.ajax({type:'GET',url:ajaxurl,data:data,success:function(response){if(response.success){var $photo_cnt_span=jq('#'+slug+'-personal-li #user-'+slug+' span');if($photo_cnt_span.length>0){$photo_cnt_span.text(response.data);}}}});}},inject_markup:function(){var $activity_greeting=jq('.my-gallery .activity-greeting'),greeting=lang('user_add_photo');if($activity_greeting.length&&!!greeting){$activity_greeting.text(greeting).show();}
var $whats_new_content=jq('#whats-new-content');var $add_photo=jq('#buddyboss-media-tpl-add-photo');if($add_photo.length&&$whats_new_content.length){$whats_new_content.before($add_photo.html());}
var $preview_pane=jq('#buddyboss-media-tpl-preview');if($preview_pane.length&&$whats_new_content.length&&'undefined'==typeof bbpress_media){$whats_new_content.find('textarea').after($preview_pane.html());}},get_elements:function(){_l.$whats_new=jq('#whats-new');if(_l.$whats_new.length===0&&'undefined'==typeof bbpress_media){return false;}
_l.$add_photo=jq('#buddyboss-media-bulk-uploader');_l.$open_uploder_button=jq('#buddyboss-media-open-uploader-button');_l.$add_photo_button=jq('#logo-file-browser-button');_l.$post_button=jq('#whats-new-submit').find('[type=submit],button');_l.$uploader=jq('#buddyboss-media-bulk-uploader');_l.$uploaded=jq('#buddyboss-media-bulk-uploader-uploaded .images');_l.$preview_pane=jq('#buddyboss-media-preview-inner');_l.$privacy_bp=jq('#bbwall-activity-privacy');_l.$privacy_modal=jq('#bbm-media-privacy');return true;},setup_textbox:function(){_l.$whats_new.blur(function(){setTimeout(function(){if(pics_uploaded&&pics_uploaded.length>0){_l.$post_button.removeAttr('disabled');_l.$post_button.prop('disabled',false);}},200)});},setup_modal:function(){_l.$open_uploder_button.fancybox({href:'#buddyboss-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('#buddyboss-media-bulk-uploader-text').val(_l.$whats_new.val());if(_l.$privacy_bp.length>0){_l.$privacy_modal.val(_l.$privacy_bp.val());}
_l.$preview_pane.hide();},beforeClose:function(){if(jq('#buddyboss-media-bulk-uploader-text').length>0){_l.$whats_new.val(jq('#buddyboss-media-bulk-uploader-text').val());}
if(_l.$privacy_bp.length>0){_l.$privacy_bp.val(_l.$privacy_modal.val());}},afterClose:function(){_l.$preview_pane.html(_l.$uploaded.html());_l.$preview_pane.show();}});jq('#aw-whats-new-submit-bbmedia').click(function(){jq.fancybox.close();_l.$post_button.trigger('click');});},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='post_update')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_l.$preview_pane.html('');_l.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_l.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_l.$add_photo_button[0],dragdrop:true,container:'buddyboss-media-bulk-uploader-reception',drop_element:'buddyboss-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_l.$add_photo.find('.moxie-shim').find("input").length=='0'){_l.$add_photo.find('.moxie-shim').first().css("z-index",10);_l.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_l.$add_photo_button[0]).clone();jq(_l.$add_photo_button[0]).after(clone).remove();_l.$add_photo_button[0]=clone;jq(_l.$add_photo_button[0]).on("click",function(){_l.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jq('#aw-whats-new-submit-bbmedia').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_l.$uploaded.append(newimg);_l.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');if('undefined'!=typeof bbpress_media){$file.append("<input type='hidden' value='"+responseJSON.attachment_id+"' name='bbm_bbpress_attachments[]'>");}
$file.data('attachment_id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();jq('.fancybox-close').on('click',function(){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);});if(jq('#buddyboss-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("a.browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}
if(jq('#buddyboss-media-add-photo').length>0&&'false'===BBOSS_MEDIA.is_media_page&&'false'===BBOSS_MEDIA.is_photo_page){var additional_dropzone=document.getElementById('buddyboss-media-add-photo');$additional_dropzone=jq(additional_dropzone);var input=new mOxie.FileInput({browse_button:jq(".browse-file-button")[0],container:additional_dropzone,multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;},}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);},}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_Edit_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _el={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;if(!this.get_elements()){return false;}
setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);jq(document).on('click','a.buddyboss_edit_activity.action-edit',APP.editActivityMediaPreview);},destroy:function(){},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='buddypress-edit-activity-save')
return;var media_ids=[];jq("#buddyboss-edit-media-preview .file").map(function(idx,ele){media_ids[idx]=jq(ele).data('media-id');});var new_data=jq.extend({},origOptions.data,{'buddyboss_media_aid':media_ids,});options.data=jq.param(new_data);},get_elements:function(){_el.$add_photo=jq('#buddyboss-edit-media-bulk-uploader');_el.$open_uploder_button=jq('#buddyboss-edit-media-open-uploader-button');_el.$add_photo_button=jq('#browse-file-button');_el.$uploaded=jq('#buddyboss-media-bulk-uploader-uploaded .images');_el.$preview_pane=jq('#buddyboss-edit-media-preview-inner');return true;},editActivityMediaPreview:function(e){$elm_edit_btn=jq(this);var activity_id=$elm_edit_btn.data('activity_id');var data={'action':'buddypress_edit_activity_media_content','activity_id':$elm_edit_btn.data('activity_id'),};jq.ajax({type:'POST',url:ajaxurl,data:data,success:function(response){$media_edit_wrapper=jq('#buddyboss-edit-media-preview-inner');$media_edit_wrapper.html(response);}});},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_el.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_el.$add_photo_button[0],dragdrop:true,container:'buddyboss-edit-media-bulk-uploader-reception',drop_element:'buddyboss-edit-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_el.$add_photo.find('.moxie-shim').find("input").length=='0'){_el.$add_photo.find('.moxie-shim').first().css("z-index",10);_el.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_el.$add_photo_button[0]).clone();jq(_el.$add_photo_button[0]).after(clone).remove();_el.$add_photo_button[0]=clone;jq(_el.$add_photo_button[0]).on("click",function(){_el.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jq('#aw-whats-new-submit-bbmedia').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_el.$uploaded.append(newimg);_el.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('media-id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();jq('.fancybox-close').on('click',function(){jq('#aw-whats-new-submit-bbmedia').prop('disabled',false);});if(jq('#buddyboss-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_el.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();if(jq("#buddyboss-edit-media-add-photo .browse-file-button").is(':visible')){var input=new mOxie.FileInput({browse_button:jq("#buddyboss-edit-media-add-photo .browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_el.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}}
if(jq('#buddyboss-edit-media-add-photo a.buddyboss-media-add-photo').length>0&&'false'===BBOSS_MEDIA.is_photo_page){var additional_dropzone=document.getElementById('buddyboss-media-add-photo');$additional_dropzone=jq(additional_dropzone);var input=new mOxie.FileInput({browse_button:jq("#buddyboss-edit-media-add-photo .browse-file-button")[0],container:additional_dropzone,multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;},editActivityRemoveMedia:function(el){var $el=jq(el);$el.parent().remove();},}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);},editActivityRemoveMedia:function(el){return APP.editActivityRemoveMedia(el);},}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_Comment_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _cl={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
jq(document).on('click','.buddyboss-comment-media-add-photo-button',APP.set_post_button);jq('ul#activity-stream').on('click','a.acomment-reply',APP.set_file_browse_button);this.setup_modal();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},inject_markup:function(){var $ac_form_submit=jq("input[name='ac_form_submit']:not(.has-comment-media-button)");var $add_photo=jq('#buddyboss-comment-media-tpl-add-photo');if($add_photo.length&&$ac_form_submit.length){$ac_form_submit.before($add_photo.html());$ac_form_submit.addClass('has-comment-media-button');}
var $preview_pane=jq('#buddyboss-comment-media-tpl-preview');if($preview_pane.length&&$ac_form_submit.length){var $ac_reply_content=jq('.ac-reply-content:not(.has-comment-media-button)')
$ac_reply_content.after($preview_pane.html());$ac_reply_content.addClass('has-comment-media-button')}},get_elements:function(){_cl.$comment_input=null;_cl.$browse_file_button=null;_cl.$comment_media_container=null;_cl.$add_photo=jq('#buddyboss-comment-media-bulk-uploader');_cl.$open_uploder_button=jq('.open-uploader-button.buddyboss-comment-media-add-photo-button');_cl.$add_photo_button=jq('.logo-comment-file-browser-button');_cl.$post_button=null;_cl.$uploader=jq('#buddyboss-comment-media-bulk-uploader');_cl.$uploaded=jq('.buddyboss-comment-media-bulk-uploader-uploaded .images');_cl.$preview_pane=jq('.buddyboss-comment-media-preview-inner');return true;},setup_modal:function(){_cl.$open_uploder_button.fancybox({href:'#buddyboss-comment-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('.buddyboss-comment-media-bulk-uploader-text').val(_cl.$comment_input.val());},beforeClose:function(){if(jq('.buddyboss-comment-media-bulk-uploader-text').length>0){_cl.$comment_input.val(jq('.buddyboss-comment-media-bulk-uploader-text').val());}},afterClose:function(){_cl.$preview_pane.html(_cl.$uploaded.html());_cl.$preview_pane.show();}});jq('#buddyboss-comment-media-attach').click(function(){jq.fancybox.close();_cl.$post_button.trigger('click');});},set_post_button:function(e){$attach_comment_media_button=jq(this).parents('.ac-reply-content');_cl.$post_button=$attach_comment_media_button.find('input[name=ac_form_submit]');_cl.$comment_input=$attach_comment_media_button.find('textarea');},set_file_browse_button:function(e){$acomment_reply_button=jq(this);$activity_comment_div=$acomment_reply_button.parents('.activity-content').next('.activity-comments')
_cl.$browse_file_button=$activity_comment_div.find('.browse-file-button');_cl.$comment_media_container=$activity_comment_div.find('.buddyboss-comment-media-add-photo');var input=new mOxie.FileInput({browse_button:_cl.$browse_file_button.get(0),container:_cl.$comment_media_container.get(0),multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='new_activity_comment')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');var action_arr=['activity_get_older_updates','post_update','activity_widget_filter'];if(-1!=action_arr.indexOf(action)){setTimeout(function(){APP.inject_markup();},2000);}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_cl.$preview_pane.html('');_cl.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_cl.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_cl.$add_photo_button[0],dragdrop:true,container:'buddyboss-comment-media-bulk-uploader-reception',drop_element:'buddyboss-comment-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_cl.$add_photo.find('.moxie-shim').find("input").length=='0'){_cl.$add_photo.find('.moxie-shim').first().css("z-index",10);_cl.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_cl.$add_photo_button[0]).clone();jq(_cl.$add_photo_button[0]).after(clone).remove();_cl.$add_photo_button[0]=clone;jq(_cl.$add_photo_button[0]).on("click",function(){_cl.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){jQuery('.has-comment-media-button').prop('disabled',true);jQuery('#buddyboss-comment-media-attach').prop('disabled',true);if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_cl.$uploaded.append(newimg);_cl.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){jQuery('.has-comment-media-button').prop('disabled',false);jQuery('#buddyboss-comment-media-attach').prop('disabled',false);var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('attachment_id',responseJSON.attachment_id);$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_Comment_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){jQuery('.has-comment-media-button').prop('disabled',false);alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();if(jq('#buddyboss-comment-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("#buddyboss-comment-media-add-photo .browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;}}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);}}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));window.BuddyBoss_bbPress_Media_Uploader=(function(window,jq,util,undefined){var uploader=false;var _cl={},filesAdded=0;var state=util.state||{},lang=util.lang;var pics_uploaded=[];var APP={init:function(){var self=this;this.inject_markup();if(!this.get_elements()){return false;}
jq(document).on('click','.buddyboss-bbpress-media-add-photo-button',APP.set_post_button);this.setup_modal();setTimeout(function(){self.start_uploader();},10);jq.ajaxPrefilter(APP.prefilter);jq(document).ajaxSuccess(APP.ajaxSuccessHandler);},destroy:function(){},inject_markup:function(){var $whats_new_content=jq('.bbp-submit-wrapper');var $add_photo=jq('#buddyboss-bbpress-media-tpl-add-photo');if($add_photo.length&&$whats_new_content.length){$whats_new_content.append($add_photo.html());}},get_elements:function(){_cl.$bbpress_input=null;_cl.$add_photo=jq('#buddyboss-bbpress-media-bulk-uploader');_cl.$open_uploder_button=jq('.open-uploader-button.buddyboss-bbpress-media-add-photo-button');_cl.$add_photo_button=jq('.logo-bbpress-file-browser-button');_cl.$post_button=null;_cl.$uploader=jq('#buddyboss-bbpress-media-bulk-uploader');_cl.$uploaded=jq('.buddyboss-bbpress-media-bulk-uploader-uploaded .images');_cl.$preview_pane=jq('.buddyboss-bbpress-media-preview-inner');return true;},setup_modal:function(){_cl.$open_uploder_button.fancybox({href:'#buddyboss-bbpress-media-bulk-uploader-wrapper',minWidth:500,beforeLoad:function(){jq('.buddyboss-bbpress-media-bulk-uploader-text').val(_cl.$bbpress_input.val());},beforeClose:function(){if(jq('.buddyboss-bbpress-media-bulk-uploader-text').length>0){_cl.$bbpress_input.val(jq('.buddyboss-bbpress-media-bulk-uploader-text').val());}}});jq('#buddyboss-bbpress-media-attach').click(function(){jq.fancybox.close();_cl.$post_button.trigger('click');});},set_post_button:function(e){$attach_bbpress_media_button=jq(this).parents('.ac-reply-content');_cl.$post_button=$attach_bbpress_media_button.find('input[name=ac_form_submit]');_cl.$bbpress_input=$attach_bbpress_media_button.find('textarea');},prefilter:function(options,origOptions,jqXHR){var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='new_activity_bbpress')
return;var new_data,pic_html='';if(pics_uploaded.length>0){for(var i=0;i<pics_uploaded.length;i++){var pic=jq('<a/>').attr('href',pics_uploaded[i].url).attr('target','_blank').attr('title',pics_uploaded[i].name).addClass('buddyboss-media-photo-link').html(pics_uploaded[i].name)[0].outerHTML;pic_html+=pic;}
new_data=jq.extend({},origOptions.data,{content:origOptions.data.content+' '+pic_html,pics_uploaded:pics_uploaded});options.data=jq.param(new_data);options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.post_success(response,txt,xhr);}}})(options.success);}
else if(origOptions.data&&origOptions.data.action==='get_single_activity_content'){options.success=(function(old_success){return function(response,txt,xhr){if(jq.isFunction(old_success)){old_success(response,txt,xhr);}
if(response[0]+response[1]!=='-1'){APP.readmore_success(response,txt,xhr);}}})(options.success);}},ajaxSuccessHandler:function(e,xhr,options){var action=bbmedia_getQueryVariable(options.data,'action');if('activity_get_older_updates'==action){APP.inject_markup();}},post_success:function(response){var $new=jq("li.new-update").find('.buddyboss-media-photo-wrap');if($new.length>0&&typeof BuddyBossSwiper=='object'&&BuddyBossSwiper.hasOwnProperty('reset')){BuddyBossSwiper.reset();}
pics_uploaded=[];_cl.$preview_pane.html('');_cl.$uploaded.html('');uploader.splice(0,uploader.files.length);filesAdded=0;},start_uploader:function(){var $progressBar,progressPercent=0;var ieMobile=navigator.userAgent.indexOf('IEMobile')!==-1;if(ieMobile){_cl.$add_photo.addClass('legacy');}
uploader=new plupload.Uploader({runtimes:state.uploader_runtimes||'html5,flash,silverlight,html4',browse_button:_cl.$add_photo_button[0],dragdrop:true,container:'buddyboss-bbpress-media-bulk-uploader-reception',drop_element:'buddyboss-bbpress-media-bulk-uploader-wrapper',max_file_size:state.uploader_filesize||'10mb',multi_selection:state.uploader_multiselect||false,url:ajaxurl,multipart:true,multipart_params:{action:'buddyboss_media_post_photo','cookie':encodeURIComponent(document.cookie),'_wpnonce_post_update':BBOSS_MEDIA.media_upload_nonce},flash_swf_url:state.uploader_swf_url||'',silverlight_xap_url:state.uploader_xap_url||'',filters:[{title:lang('file_browse_title'),extensions:state.uploader_filetypes||'jpg,jpeg,gif,png,bmp',prevent_duplicates:true}],init:{Init:function(){if(_cl.$add_photo.find('.moxie-shim').find("input").length=='0'){_cl.$add_photo.find('.moxie-shim').first().css("z-index",10);_cl.$add_photo.find('.moxie-shim').css("cursor",'pointer');}else{clone=jq(_cl.$add_photo_button[0]).clone();jq(_cl.$add_photo_button[0]).after(clone).remove();_cl.$add_photo_button[0]=clone;jq(_cl.$add_photo_button[0]).on("click",function(){_cl.$add_photo.find('.moxie-shim').find("input").click();});}},FilesAdded:function(up,files){if(up.files.length>state.uploader_max_files||files.length>state.uploader_max_files){uploader.splice(filesAdded,uploader.files.length);alert(lang('exceed_max_files_per_batch'));return false;}
for(var i=0;i<files.length;i++){if(jq('div[data-fileid="'+files[i].id+'"]').length===0){var newimg="<div data-fileid='"+files[i].id+"' class='file uploading'><img src='"+state.uploader_temp_img+"'><progress class='buddyboss-media-progress-bar' value='0' max='100'></progress></div>";_cl.$uploaded.append(newimg);_cl.$preview_pane.append(newimg);filesAdded++;}}
jq.fancybox.update();up.start();},UploadProgress:function(up,file){if(file&&file.hasOwnProperty('percent')){$progressBar=jq('div[data-fileid="'+file.id+'"]').find('progress');progressPercent=file.percent;$progressBar.val(progressPercent);}},FileUploaded:function(up,file,info){var responseJSON=jq.parseJSON(info.response);$file=jq('div[data-fileid="'+file.id+'"]');$file.removeClass('uploading');$file.data('attachment_id',responseJSON.attachment_id);$file.append("<input type='hidden' value='"+responseJSON.attachment_id+"' name='bbm_bbpress_attachments[]'>");$file.find('>img').attr('src',responseJSON.url);$file.find('progress').replaceWith("<a href='#' onclick='return window.BuddyBoss_bbPress_Media_Uploader.removeUploaded(\""+file.id+"\");' class='delete'>+</a>");pics_uploaded.push(responseJSON);jq.fancybox.update();},Error:function(up,args){alert(lang('error_uploading_photo'));$progressWrap.removeClass('uploading');$postButton.prop("disabled",false).removeClass('loading');}}});uploader.init();if(jq('#buddyboss-bbpress-media-bulk-uploader-reception-fake').length>0){var additional_dropzone=document.getElementById('buddyboss-media-bulk-uploader-reception-fake');$additional_dropzone=jq(additional_dropzone);var dropzone=new mOxie.FileDrop({drop_zone:additional_dropzone});dropzone.ondrop=function(event){_l.$open_uploder_button.click();uploader.addFile(dropzone.files);};dropzone.init();var input=new mOxie.FileInput({browse_button:jq("a.browse-file-button",$additional_dropzone)[0],container:additional_dropzone,multiple:true});input.onchange=function(event){_l.$open_uploder_button.click();uploader.addFile(input.files);};input.init();}
if(jq('.buddyboss-bbpress-media-add-photo').length>0){var additional_dropzone=document.getElementsByClassName('buddyboss-bbpress-media-add-photo');var input=new mOxie.FileInput({browse_button:jq(".browse-file-button")[0],container:additional_dropzone[0],multiple:true});input.onchange=function(event){uploader.addFile(input.files);};input.init();}},removeUploaded:function(fileid){var $file=jq('div[data-fileid="'+fileid+'"]');if(pics_uploaded.length>0){var pics_uploaded_temp=[];for(var i=0;i<pics_uploaded.length;i++){if(pics_uploaded[i].attachment_id!==$file.data('attachment_id')){pics_uploaded_temp.push(pics_uploaded[i]);}}
pics_uploaded=pics_uploaded_temp;}
var file_to_remove=false;jq.each(uploader.files,function(i,ufile){if(ufile.hasOwnProperty('id')&&ufile.id==fileid){file_to_remove=ufile;}});if(file_to_remove){uploader.removeFile(file_to_remove);filesAdded--;}
$file.remove();return false;}}
var API={setup:function(){APP.init();},teardown:function(){APP.destroy();},removeUploaded:function(file){return APP.removeUploaded(file);}}
jq(document).ready(function(){APP.init();});return API;}
(window,window.jQuery,window.BuddyBoss_Media_Util));function bbmedia_getQueryVariable(query,variable){if(typeof query!=='string'||query==''||typeof variable=='undefined'||variable=='')
return'';var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable){return pair[1];}}
return(false);}
bbmedia_move_media_opened=false;bbmedia_tag_friends_opened=false;jq(document).ready(function(){jq(document).keyup(function(e){if(e.keyCode==27&&(bbmedia_move_media_opened===true||bbmedia_tag_friends_opened===true)){if(bbmedia_move_media_opened===true)
buddyboss_media_move_media_close();if(bbmedia_tag_friends_opened===true)
buddyboss_media_tag_friends_close();}});setMediaPageCookie();jq.ajaxPrefilter(function(options,originalOptions,jqXHR){var originalSuccess=options.success;var action=bbmedia_getQueryVariable(options.data,'action');if(typeof action=='undefined'||action!='activity_get_older_updates')
return;options.success=function(data){jq('#bbmedia-grid-wrapper #activity-stream li.load-more').remove();if(originalSuccess!=null){originalSuccess(data);}};});jq('#activity-stream').on('click','.activity-meta > a.fav',function(){var img_wrap=jq(this).parents('.activity-content').find('.buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_favorite(img_wrap);});jq('#activity-stream').on('click','.activity-meta > a.unfav',function(){var img_wrap=jq(this).parents('.activity-content').find('.buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_unfavorite(img_wrap);});jq('#activity-stream').on('click','.acomment-options > a.fav-comment',function(){var img_wrap=jq(this).parent().parent().find('.acomment-content > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_favorite(img_wrap);});jq('#activity-stream').on('click','.acomment-options > a.unfav-comment',function(){var img_wrap=jq(this).parent().parent().find('.acomment-content > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
bbm_ps_mark_unfavorite(img_wrap);});jq('#activity-stream').on('click','input[name=ac_form_submit]',function(e){var $activity_elm=jq(this).parents('.activity-item');var img_wrap=$activity_elm.find('.activity-inner > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var img=jq(this);var comment_count=img.attr('data-comment-count');var new_comment_count=parseInt(comment_count)+1;img.attr('data-comment-count',new_comment_count);});});jq('#activity-stream').on('click','a.acomment-delete',function(e){var $activity_elm=jq(this).parents('.activity-item');var $reply_thread=jq(this).parents('li[id^=acomment]:first').find('li[id^=acomment]');if(0<$reply_thread.length){var deleted_comments=$reply_thread.length+1;}else{var deleted_comments=1;}
var img_wrap=$activity_elm.find('.activity-inner > .buddyboss-media-photos-wrap-container');if(!(img_wrap.length>0)){return;}
jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var img=jq(this);var comment_count=img.attr('data-comment-count');if(0<=comment_count){var new_comment_count=parseInt(comment_count)-deleted_comments;img.attr('data-comment-count',new_comment_count);}});});jq('div.buddyboss-media-photos-wrap-container').each(function(index,val){var tall_images=jq(this).find('a.size-activity-2-thumbnail-tall');tall_images_height_scale(tall_images[0],tall_images[1]);});jq(document).on('click','a.browse-file-button',function(e){e.preventDefault();});});var hidden,visibilityChange;if(typeof document.hidden!=="undefined"){hidden="hidden";visibilityChange="visibilitychange";}else if(typeof document.msHidden!=="undefined"){hidden="msHidden";visibilityChange="msvisibilitychange";}else if(typeof document.webkitHidden!=="undefined"){hidden="webkitHidden";visibilityChange="webkitvisibilitychange";}
function setMediaPageVisibilityChange(){if(!document[hidden]){setMediaPageCookie();}}
function setMediaPageCookie(){if(jq('body').hasClass('buddyboss-media-all-media')){docCookies.setItem("bp-bboss-is-media-page","yes","","/");}else{docCookies.removeItem("bp-bboss-is-media-page","/");}}
document.addEventListener(visibilityChange,setMediaPageVisibilityChange,false);function tall_images_height_scale(img1,img2){var h1=jq(img1).find('img').height();var h2=jq(img2).find('img').height();if(h1<h2){jq(img1).height(h2);jq(img1).find('img').height(h2);jq(img2).height(h2);jq(img2).find('img').height(h2);}
else if(h2<h1){jq(img2).height(h1);jq(img2).find('img').height(h1);jq(img1).height(h1);jq(img1).find('img').height(h1);}}
function bbm_ps_mark_favorite(img_wrap){jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var fav_count=jq(this).attr('data-favorite-count');jq(this).attr('data-bbmfav','bbm-unfav');jq(this).attr('data-favorite-count',parseInt(fav_count)+1);});}
function bbm_ps_mark_unfavorite(img_wrap){jq(img_wrap).find('.buddyboss-media-photo-wrap .buddyboss-media-photo').each(function(){var fav_count=jq(this).attr('data-favorite-count');jq(this).attr('data-bbmfav','bbm-fav');if(fav_count==0){jq(this).attr('data-favorite-count',parseInt(fav_count));}else{jq(this).attr('data-favorite-count',parseInt(fav_count)-1);}});}
function buddyboss_media_initiate_media_move(link){$link=jq(link);$form=jq('#frm_buddyboss-media-move-media');$form_wrapper=$form.parent();$link.closest('.activity').find('form.ac-form').slideUp();if($form_wrapper.is(':visible')){buddyboss_media_move_media_close();return false;}
jq('.buddyboss-activity-comments-form').hide();$link.closest('.activity-content').after($form_wrapper);var selected_album=$link.data('album_id');if(!selected_album)
selected_album='';$form.find('#buddyboss_media_move_media_albums').val(selected_album);$form_wrapper.slideDown(200);bbmedia_move_media_opened=true;$form.find('input[name="activity_id"]').val($link.data('activity_id'));return false;}
function buddyboss_media_submit_media_move(){$form=jq('#frm_buddyboss-media-move-media');$submit_button=$form.find('input[type="submit"]');if($submit_button.hasClass('loading'))
return false;var bbm_move_media_albums_id=$form.find('select[name="buddyboss_media_move_media_albums"]').val();var data={'action':$form.find('input[name="action"]').val(),'bboss_media_move_media_nonce':$form.find('input[name="bboss_media_move_media_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'buddyboss_media_move_media_albums':bbm_move_media_albums_id};$submit_button.addClass('loading');$form.find("#message").removeAttr('class').html('');jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){response=jq.parseJSON(response);if(response.status){$form.find("#message").addClass('updated').html("<p>"+response.message+"</p>");if($form.find('input[name="is_single_album"]').val()=='yes'){setTimeout(function(){buddyboss_media_media_move_cleanup($form,true);},2000);}else{setTimeout(function(){buddyboss_media_media_move_cleanup($form,false);},2000);}
$form.parents('li.activity-item').find('a.buddyboss_media_move').data('album_id',bbm_move_media_albums_id);}else{$form.find("#message").addClass('error').html("<p>"+response.message+"</p>");}
$submit_button.removeClass('loading');}});return false;}
function buddyboss_media_media_move_cleanup($form,remove_activity_item){$form.find("#message").removeAttr('class').html('');$form_wrapper=$form.parent();buddyboss_media_move_media_close();if(remove_activity_item){$activity=$form.closest('.activity');jq('body').append($form_wrapper);$form_wrapper.hide();$activity.slideUp(200,function(){$activity.remove();});}}
function buddyboss_media_move_media_close(){$form=jq('#frm_buddyboss-media-move-media');$form_wrapper=$form.parent();$form_wrapper.slideUp(200);bbmedia_move_media_opened=false;return false;}
function buddyboss_media_initiate_tagging(link){$link=jq(link);$form=jq('#frm_buddyboss-media-tag-friends');$form_wrapper=$form.parent();$link.closest('.activity').find('form.ac-form').slideUp();if($form_wrapper.is(':visible')){buddyboss_media_tag_friends_close();return false;}
jq('.buddyboss-activity-comments-form').hide();$link.closest('.activity-content').after($form_wrapper);$form_wrapper.slideDown(200);bbmedia_tag_friends_opened=true;$form.find('input[name="ac_search"]').off('input').on('input',function(){buddyboss_media_tag_friends_search();});$form.find('.preloading').show();$form.find('input[name="activity_id"]').val($link.data('activity_id'));buddyboss_media_tag_friends_search();return false;}
function buddyboss_media_tag_friends_close(){$form=jq('#frm_buddyboss-media-tag-friends');$form_wrapper=$form.parent();$form.data('doingsearch','no');$form.find('#invite-list > ul').html('');$form.find('input[name="ac_search"]').off('input').val('').hide();$form_wrapper.slideUp(200);bbmedia_tag_friends_opened=false;return false;}
function buddyboss_media_tag_friends_search(){$form=jq('#frm_buddyboss-media-tag-friends');if($form.data('doingsearch')=='yes')
return false;var search_term=jq.trim($form.find('input[name="ac_search"]').val());var exclude_ids=[];$form.find('#invite-list > ul > li').each(function(){if(jq(this).hasClass('more_i10')){jq(this).remove();}else{if(jq(this).find('input[type="checkbox"]').is(':checked')){exclude_ids.push(jq(this).find('input[type="checkbox"]').val());}else{jq(this).remove();}}});$form.data('doingsearch','yes');$form.find('.preloading').show();$form.find('#message').each(function(){jq(this).remove();});var data={'action':$form.find('input[name="action"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'search_term':search_term,'exclude_ids':exclude_ids};jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){if($form.data('doingsearch')=='no')
return;$form.find('.preloading').hide();response=jq.parseJSON(response);$ul=$form.find('#invite-list > ul');if(response.friends_list){var count=response.friends_list.length;for(var i=0;i<count;i++){$ul.append(response.friends_list[i]);}
if(count<response.total){var more=response.total-count;var more_i10=response.more_i10.replace('xx',more);$ul.append("<li class='more_i10'>"+more_i10+"</li>");}
$ul.show();}else{if($ul.html()!=''){$form.find('#invite-list').append(response.error);}}
jq('#invite-list input[name="friends[]"]').unbind('change').bind('change',function(){buddyboss_media_tag_friends_toggle_tag(data.activity_id,jq(this).val());});jq('#friend-list .action .remove').click(function(e){e.preventDefault();buddyboss_media_tag_friends_toggle_tag(data.activity_id,jq(this).data('userid'));});if(search_term==''&&response.show_search){$form.find('input[name="ac_search"]').show();}
$form.data('doingsearch','no');}});return false;}
function buddyboss_media_tag_friends_toggle_tag(activity_id,friend_id){$form=jq('#frm_buddyboss-media-tag-friends');var data={'action':$form.find('input[name="action_tag"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':activity_id,'friend_id':friend_id};jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){}});}
function buddyboss_media_tag_friends_complete(){$form=jq('#frm_buddyboss-media-tag-friends');var data={'action':$form.find('input[name="action_tag_complete"]').val(),'buddyboss_media_tag_friends_nonce':$form.find('input[name="buddyboss_media_tag_friends_nonce"]').val(),'activity_id':$form.find('input[name="activity_id"]').val(),'update_action':false};if($form.closest('.activity').find(BuddyBoss_Media_Appstate.activity_header_selector).length>0){data.update_action=true;}
$form.find('input[type="submit"]').addClass('loading');jq.ajax({type:"POST",url:ajaxurl,data:data,success:function(response){$form.find('input[type="submit"]').removeClass('loading');if(data.update_action===true){response=jq.parseJSON(response);$activity=$form.closest('.activity');$activity.find(BuddyBoss_Media_Appstate.activity_header_selector).html(response.activity_action);if(response.activity_tooltip){$activity.find('.buddyboss-media-tt-content').remove();$activity.append(response.activity_tooltip);window.BBMediaTooltips.initTooltips();}}
buddyboss_media_tag_friends_close();}});return false;}
(function(window,$){var BBMediaTooltips={};var $el={};BBMediaTooltips.init=function(){BBMediaTooltips.initTooltips();}
BBMediaTooltips.initTooltips=function(){$el.tooltips=jq('.buddyboss-media-tt-others');if($el.tooltips.length){$el.tooltips.tooltipster({contentAsHTML:true,functionInit:BBMediaTooltips.getTooltipContent,interactive:true,position:'top-left',theme:'tooltipster-buddyboss'});}}
BBMediaTooltips.getTooltipContent=function(origin,content){var $content=origin.closest('li').find('.buddyboss-media-tt-content').detach().html();return $content;}
jq(document).ready(function(){if(BuddyBoss_Media_Appstate.enable_tagging==true){BBMediaTooltips.initTooltips();window.BBMediaTooltips=BBMediaTooltips;}});}(window,window.jQuery));var docCookies=docCookies||{getItem:function(sKey){if(!sKey){return null;}
return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null;},setItem:function(sKey,sValue,vEnd,sPath,sDomain,bSecure){if(!sKey||/^(?:expires|max\-age|path|domain|secure)$/i.test(sKey)){return false;}
var sExpires="";if(vEnd){switch(vEnd.constructor){case Number:sExpires=vEnd===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+vEnd;break;case String:sExpires="; expires="+vEnd;break;case Date:sExpires="; expires="+vEnd.toUTCString();break;}}
document.cookie=encodeURIComponent(sKey)+"="+encodeURIComponent(sValue)+sExpires+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"")+(bSecure?"; secure":"");return true;},removeItem:function(sKey,sPath,sDomain){if(!this.hasItem(sKey)){return false;}
document.cookie=encodeURIComponent(sKey)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(sDomain?"; domain="+sDomain:"")+(sPath?"; path="+sPath:"");return true;},hasItem:function(sKey){if(!sKey){return false;}
return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie);},keys:function(){var aKeys=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var nLen=aKeys.length,nIdx=0;nIdx<nLen;nIdx++){aKeys[nIdx]=decodeURIComponent(aKeys[nIdx]);}
return aKeys;}};
;function buddypress_edit_activity_initiate(a){return jQuery(a).hasClass("action-save")?buddypress_edit_activity_save(a):buddypress_edit_activity_get(a),!1}function buddypress_edit_activity_get(a){$link=jQuery(a),$form=jQuery("#frm_buddypress-edit-activity"),$form_wrapper=$form.parent(),$link.addClass("loading"),$link.hasClass("buddyboss_edit_activity_comment")?B_E_A_.current_activity_org=$link.closest("[id^=acomment]").find(" > .acomment-content").html():B_E_A_.current_activity_org=$link.closest(".activity-content").find(".activity-inner").html();var b={action:$form.find('input[name="action_get"]').val(),buddypress_edit_activity_nonce:$form.find('input[name="buddypress_edit_activity_nonce"]').val(),activity_id:$link.data("activity_id")};jQuery.ajax({type:"POST",url:ajaxurl,data:b,success:function(a){if(a=jQuery.parseJSON(a),a.status){$link.removeClass("loading").addClass("action-save").html(B_E_A_.button_text.save);var c=jQuery("<a href='#'>").addClass("bp-secondary-action buddyboss_edit_activity_cancel").html(B_E_A_.button_text.cancel);$link.before(c),c.attr("onclick","return buddypress_edit_activity_cancel(this);"),c.data("target_type","activity"),$link.hasClass("buddyboss_edit_activity_comment")?($link.closest("[id^=acomment]").find(" > .acomment-content").html("").hide().after($form_wrapper),c.data("target_type","comment")):($link.closest(".activity-content").find(".activity-inner").html("").hide().after($form_wrapper),c.addClass("button")),$form_wrapper.show(),$form.find('input[name="activity_id"]').val(b.activity_id),$form.find("textarea").val(a.content)}}})}function buddypress_edit_activity_save(a){$link=jQuery(a),$form=jQuery("#frm_buddypress-edit-activity"),$form_wrapper=$form.parent(),$link.addClass("loading"),jQuery(".buddyboss_edit_activity_cancel").remove();var b={action:$form.find('input[name="action_save"]').val(),buddypress_edit_activity_nonce:$form.find('input[name="buddypress_edit_activity_nonce"]').val(),activity_id:$link.data("activity_id"),content:$form.find("textarea").val()};jQuery.ajax({type:"POST",url:ajaxurl,data:b,success:function(a){a=jQuery.parseJSON(a),a.status&&($link.removeClass("loading").removeClass("action-save").html(B_E_A_.button_text.edit),$link.hasClass("buddyboss_edit_activity_comment")?$link.closest("[id^=acomment]").find(" > .acomment-content").html(a.content).show():$link.closest(".activity-content").find(".activity-inner").html(a.content).show(),$form_wrapper.hide(),jQuery("body").append($form_wrapper))}})}function buddypress_edit_activity_cancel(a){var b=jQuery(a),c=jQuery("#frm_buddypress-edit-activity"),d=c.parent(),e="";return"comment"==b.data("target_type")?(b.closest("[id^=acomment]").find(" > .acomment-content").html(B_E_A_.current_activity_org).show(),e=b.closest("[id^=acomment]").find(".buddyboss_edit_activity_comment.action-save")):(b.closest(".activity-content").find(".activity-inner").html(B_E_A_.current_activity_org).show(),e=b.closest(".activity-content").find(".buddyboss_edit_activity.action-save")),e.removeClass("action-save").html(B_E_A_.button_text.edit),d.hide(),jQuery("body").append(d),b.remove(),!1}
;/*!
 * jQuery UI Resizable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/resizable/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)}(function(a){return a.widget("ui.resizable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseInt(a,10)||0},_isNumber:function(a){return!isNaN(parseInt(a,10))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:g._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),g.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1)},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),c<f.maxWidth&&(f.maxWidth=c),e<f.maxHeight&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.position.top+this.size.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];b<4;b++)c[b]=parseInt(d[b],10)||0,c[b]+=parseInt(e[b],10)||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;b<this._proportionallyResizeElements.length;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0};a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(e[b]=c||null)}),b.css(e)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&d.maxWidth<n,q=d.maxHeight&&d.maxHeight<o,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((o-k<=0||n-j<=0)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=j-b.width,c.size.width=n,c.position.left=g.left+f.width-n))}}),a.ui.resizable});
;/*!
 * jQuery UI Draggable 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./mouse","./widget"],a):a(jQuery)}(function(a){return a.widget("ui.draggable",a.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return this._blurActiveElement(b),!(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=this.document[0];if(this.handleElement.is(b.target))try{c.activeElement&&"body"!==c.activeElement.nodeName.toLowerCase()&&a(c.activeElement).blur()}catch(d){}},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._normalizeRightBottom(),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.focus(),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,r<i-p||q>j+p||t<k-p||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=Math.abs(k-t)<=p,f=Math.abs(l-s)<=p,g=Math.abs(i-r)<=p,h=Math.abs(j-q)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=Math.abs(k-s)<=p,f=Math.abs(l-t)<=p,g=Math.abs(i-q)<=p,h=Math.abs(j-r)<=p,e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable});
;/*!
 * jQuery UI Button 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/button/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./widget"],a):a(jQuery)}(function(a){var b,c="ui-button ui-widget ui-state-default ui-corner-all",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",e=function(){var b=a(this);setTimeout(function(){b.find(":ui-button").button("refresh")},1)},f=function(b){var c=b.name,d=b.form,e=a([]);return c&&(c=c.replace(/'/g,"\\'"),e=d?a(d).find("[name='"+c+"'][type=radio]"):a("[name='"+c+"'][type=radio]",b.ownerDocument).filter(function(){return!this.form})),e};return a.widget("ui.button",{version:"1.11.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,e),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var d=this,g=this.options,h="checkbox"===this.type||"radio"===this.type,i=h?"":"ui-state-active";null===g.label&&(g.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(c).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){g.disabled||this===b&&a(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){g.disabled||a(this).removeClass(i)}).bind("click"+this.eventNamespace,function(a){g.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),h&&this.element.bind("change"+this.eventNamespace,function(){d.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(g.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(g.disabled)return!1;a(this).addClass("ui-state-active"),d.buttonElement.attr("aria-pressed","true");var b=d.element[0];f(b).not(b).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return!g.disabled&&(a(this).addClass("ui-state-active"),b=this,void d.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){return!g.disabled&&void a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){return!g.disabled&&void(b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",g.disabled),this._resetButton()},_determineButtonType:function(){var a,b,c;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),c=this.element.is(":checked"),c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",c)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(c+" ui-state-active "+d).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){return this._super(a,b),"disabled"===a?(this.widget().toggleClass("ui-state-disabled",!!b),this.element.prop("disabled",!!b),void(b&&("checkbox"===this.type||"radio"===this.type?this.buttonElement.removeClass("ui-state-focus"):this.buttonElement.removeClass("ui-state-focus ui-state-active")))):void this._resetButton()},refresh:function(){var b=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?f(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(d),c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),e=this.options.icons,f=e.primary&&e.secondary,g=[];e.primary||e.secondary?(this.options.text&&g.push("ui-button-text-icon"+(f?"s":e.primary?"-primary":"-secondary")),e.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+e.primary+"'></span>"),e.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+e.secondary+"'></span>"),this.options.text||(g.push(f?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):g.push("ui-button-text-only"),b.addClass(g.join(" "))}}),a.widget("ui.buttonset",{version:"1.11.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b),this._super(a,b)},refresh:function(){var b="rtl"===this.element.css("direction"),c=this.element.find(this.options.items),d=c.filter(":ui-button");c.not(":ui-button").button(),d.button("refresh"),this.buttons=c.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}}),a.ui.button});
;/*!
 * jQuery UI Dialog 1.11.4
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/dialog/
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","./core","./widget","./button","./draggable","./mouse","./position","./resizable"],a):a(jQuery)}(function(a){return a.widget("ui.dialog",{version:"1.11.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"Close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;c<0&&a(this).css("top",b.top-c)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&a.fn.draggable&&this._makeDraggable(),this.options.resizable&&a.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var b=this.options.appendTo;return b&&(b.jquery||b.nodeType)?a(b):this.document.find(b||"body").eq(0)},_destroy:function(){var a,b=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),a=b.parent.children().eq(b.index),a.length&&a[0]!==this.element[0]?a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},disable:a.noop,enable:a.noop,close:function(b){var c,d=this;if(this._isOpen&&this._trigger("beforeClose",b)!==!1){if(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),!this.opener.filter(":focusable").focus().length)try{c=this.document[0].activeElement,c&&"body"!==c.nodeName.toLowerCase()&&a(c).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){d._trigger("close",b)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(b,c){var d=!1,e=this.uiDialog.siblings(".ui-front:visible").map(function(){return+a(this).css("z-index")}).get(),f=Math.max.apply(null,e);return f>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",f+1),d=!0),d&&!c&&this._trigger("focus",b),d},open:function(){var b=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=a(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){b._focusTabbable(),b._trigger("focus")}),this._makeFocusTarget(),void this._trigger("open"))},_focusTabbable:function(){var a=this._focusedElement;a||(a=this.element.find("[autofocus]")),a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(b){function c(){var b=this.document[0].activeElement,c=this.uiDialog[0]===b||a.contains(this.uiDialog[0],b);c||this._focusTabbable()}b.preventDefault(),c.call(this),this._delay(c)},_createWrapper:function(){this.uiDialog=a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(b){if(this.options.closeOnEscape&&!b.isDefaultPrevented()&&b.keyCode&&b.keyCode===a.ui.keyCode.ESCAPE)return b.preventDefault(),void this.close(b);if(b.keyCode===a.ui.keyCode.TAB&&!b.isDefaultPrevented()){var c=this.uiDialog.find(":tabbable"),d=c.filter(":first"),e=c.filter(":last");b.target!==e[0]&&b.target!==this.uiDialog[0]||b.shiftKey?b.target!==d[0]&&b.target!==this.uiDialog[0]||!b.shiftKey||(this._delay(function(){e.focus()}),b.preventDefault()):(this._delay(function(){d.focus()}),b.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var b;this.uiDialogTitlebar=a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){a(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=a("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(a){a.preventDefault(),this.close(a)}}),b=a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(b),this.uiDialog.attr({"aria-labelledby":b.attr("id")})},_title:function(a){this.options.title||a.html("&#160;"),a.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var b=this,c=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),a.isEmptyObject(c)||a.isArray(c)&&!c.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(a.each(c,function(c,d){var e,f;d=a.isFunction(d)?{click:d,text:c}:d,d=a.extend({type:"button"},d),e=d.click,d.click=function(){e.apply(b.element[0],arguments)},f={icons:d.icons,text:d.showText},delete d.icons,delete d.showText,a("<button></button>",d).button(f).appendTo(b.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c=this,d=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,e){a(this).addClass("ui-dialog-dragging"),c._blockFrames(),c._trigger("dragStart",d,b(e))},drag:function(a,d){c._trigger("drag",a,b(d))},stop:function(e,f){var g=f.offset.left-c.document.scrollLeft(),h=f.offset.top-c.document.scrollTop();d.position={my:"left top",at:"left"+(g>=0?"+":"")+g+" top"+(h>=0?"+":"")+h,of:c.window},a(this).removeClass("ui-dialog-dragging"),c._unblockFrames(),c._trigger("dragStop",e,b(f))}})},_makeResizable:function(){function b(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}var c=this,d=this.options,e=d.resizable,f=this.uiDialog.css("position"),g="string"==typeof e?e:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:d.maxWidth,maxHeight:d.maxHeight,minWidth:d.minWidth,minHeight:this._minHeight(),handles:g,start:function(d,e){a(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",d,b(e))},resize:function(a,d){c._trigger("resize",a,b(d))},stop:function(e,f){var g=c.uiDialog.offset(),h=g.left-c.document.scrollLeft(),i=g.top-c.document.scrollTop();d.height=c.uiDialog.height(),d.width=c.uiDialog.width(),d.position={my:"left top",at:"left"+(h>=0?"+":"")+h+" top"+(i>=0?"+":"")+i,of:c.window},a(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",e,b(f))}}).css("position",f)},_trackFocus:function(){this._on(this.widget(),{focusin:function(b){this._makeFocusTarget(),this._focusedElement=a(b.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var b=this._trackingInstances(),c=a.inArray(this,b);c!==-1&&b.splice(c,1)},_trackingInstances:function(){var a=this.document.data("ui-dialog-instances");return a||(a=[],this.document.data("ui-dialog-instances",a)),a},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(b){var c=this,d=!1,e={};a.each(b,function(a,b){c._setOption(a,b),a in c.sizeRelatedOptions&&(d=!0),a in c.resizableRelatedOptions&&(e[a]=b)}),d&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",e)},_setOption:function(a,b){var c,d,e=this.uiDialog;"dialogClass"===a&&e.removeClass(this.options.dialogClass).addClass(b),"disabled"!==a&&(this._super(a,b),"appendTo"===a&&this.uiDialog.appendTo(this._appendTo()),"buttons"===a&&this._createButtons(),"closeText"===a&&this.uiDialogTitlebarClose.button({label:""+b}),"draggable"===a&&(c=e.is(":data(ui-draggable)"),c&&!b&&e.draggable("destroy"),!c&&b&&this._makeDraggable()),"position"===a&&this._position(),"resizable"===a&&(d=e.is(":data(ui-resizable)"),d&&!b&&e.resizable("destroy"),d&&"string"==typeof b&&e.resizable("option","handles",b),d||b===!1||this._makeResizable()),"title"===a&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,b,c,d=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),d.minWidth>d.width&&(d.width=d.minWidth),a=this.uiDialog.css({height:"auto",width:d.width}).outerHeight(),b=Math.max(0,d.minHeight-a),c="number"==typeof d.maxHeight?Math.max(0,d.maxHeight-a):"none","auto"===d.height?this.element.css({minHeight:b,maxHeight:c,height:"auto"}):this.element.height(Math.max(0,d.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var b=a(this);return a("<div>").css({position:"absolute",width:b.outerWidth(),height:b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(b){return!!a(b.target).closest(".ui-dialog").length||!!a(b.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var b=!0;this._delay(function(){b=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(a){b||this._allowInteraction(a)||(a.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var a=this.document.data("ui-dialog-overlays")-1;a?this.document.data("ui-dialog-overlays",a):this.document.unbind("focusin").removeData("ui-dialog-overlays"),this.overlay.remove(),this.overlay=null}}})});